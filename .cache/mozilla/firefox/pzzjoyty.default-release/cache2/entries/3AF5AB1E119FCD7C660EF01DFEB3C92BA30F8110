<script type="text/template" id="sidebar-template">
<%
	var parameters = '?currentPage=1';
	parameters += '&perPage=' + app.userModel.get('USERS_LISTNUM');
	parameters += '&sortField=M_TIME&sortOrder=DESC';

	var totalNewMails = (function() {
		var total = 0;
		mboxCollection.forEach(function(mboxModel) {
			var mboxType = mboxModel.get('MBOX_TYPE');
			if (!(mboxType === 1 || mboxType === 6))
				return;
			var mboxPublic = mboxModel.get('MBOX_PUBLIC');
			if (mboxPublic === 'S')
				return;
			if (mboxModel.get('SHARED_MBOX_ID') > 0)
				return;
			total += mboxModel.get('MBOX_NEW_MAILCOUNT');
		});
		return total;
	})();

	var getMboxByType = function(MBOX_TYPE) {
		var mbox, mboxModel = mboxCollection.findModel('MBOX_TYPE', MBOX_TYPE);
		if (mboxModel) {
			mbox = mboxModel.toJSON();
		} else {
			mbox = new app.mail.MboxModel().toJSON();
		}
		return mbox;
	};
%>
	<!-- 편지쓰기 | 예약 편지쓰기 -->
	<div class="mc-btn_workset">
		<a href="#compose" class="mc-btn_quick"><span><%= i18n.compose %></span></a>
		<a href="#compose-for-me" class="mc-btn_import"><span><%= i18n.composeForMe %></span></a>
	</div>
	<div class="section_typemail">
		<!-- 안읽음 -->
		<a href="#mboxes/unseen/mails<%= parameters + '&specialUseMailbox=unseen' %>" class="mc-atc unread " title="<%= i18n.unseen %>">
			<span class="cnt"><%= totalNewMails > 0 ? totalNewMails : 0 %></span>
			<em><%= i18n.unseen %><span class="blind"><%= i18n.unseen %></span></em>
		</a>
		<!-- 중요편지 -->
		<a href="#mboxes/important/mails" class="mc-bu8 important" title="<%= i18n.important %>">
			<span class="icon"></span>
			<em><%= i18n.important %><span class="blind"><%= i18n.important %></span></em>
		</a>
		<a href="#mboxes/attached/mails" class="mc-bu9 attach" title="<%= i18n.attached %>">
			<span class="icon"></span>
			<em><%= i18n.attached %><span class="blind"><%= i18n.attached %></span></em>
		</a>
	</div>
	<div class="mc-svc_menu_area mcScrl">
		<div class="mc-list_menu">
			<ul id="mc-bg">
				<!-- 전체 편지함-->
				<li class="mc-nh" data-mbox-id="all">
					<a href="#mboxes/all/mails" class="mc-bu1"><%= i18n.allMails %></a>
				</li>
				<!-- 받은편지함 -->
				<% mbox = getMboxByType(1); %>
				<li data-mbox-id="<%= mbox.MBOX_IDX %>">
					<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-bu2"><%= i18n.mbox.inbox %></a>
					<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails?flag=unseen" class="mc-atc">
						<em class="mc-cut"><%= mbox.MBOX_NEW_MAILCOUNT > 0 ? mbox.MBOX_NEW_MAILCOUNT : '' %></em>
					</a>
				</li>
				<!-- 내게 쓴 편지함 -->
				<li data-mbox-id="sent-me">
					<a href="#mboxes/sent-me/mails" class="mc-bu3"><%= i18n.mbox.sentMe %></a>
					<a href="#" id="attach_to_me" class="mc-btn_2me"><span><%= i18n.attachToMe %></span></a>
				</li>
				<!-- 보낸 편지함 -->
				<% mbox = getMboxByType(2); %>
				<li data-mbox-id="<%= mbox.MBOX_IDX %>">
					<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-bu4"><%= i18n.mbox.sent %></a>
					<a href="#delivery-status" class="mc-btn_status"><span><%= i18n.deliveryStatus %></span></a>
				</li>
				<!-- 임시 편지함 -->
				<% mbox = getMboxByType(4); %>
				<li data-mbox-id="<%= mbox.MBOX_IDX %>">
					<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-bu5"><%= i18n.mbox.drafts %></a>
				</li>
<%
	if (app.config.approvalMail.enabled && app.domainDetailsModel.get('approvalEnabled')) {
%>
				<li data-mbox-id="sent">
					<a href="#approval/mboxes/sent/approvals" class="mc-bu12" id="ok_send"><%= i18n.approval.sent %></a>
					<a href="#approval/mboxes/sent/approvals?flag=request" class="mc-atc">
						<em class="mc-cut approval-sent-count"></em>
					</a>
				</li>
<%
		if (app.userModel.get('isApprover')) {
%>
				<li data-mbox-id="inbox">
					<a href="#approval/mboxes/inbox/approvals" class="mc-bu13" id="ok_rec"><%= i18n.approval.inbox %></a>
					<a href="#approval/mboxes/inbox/approvals?flag=pending" class="mc-atc">
						<em class="mc-cut approval-inbox-count"></em>
					</a>
					<a title="<%= i18n.deputyApproval %> <%= i18n.mbox.settings %>" class="mc-btn_setup" href="#settings/vacation-response"><span><%= i18n.deputyApproval %> <%= i18n.mbox.settings %></span></a>
				</li>
<%
		}
	}
%>
<% mbox = getMboxByType(7);
if (app.config.deletedlogging.enabled && mbox.MBOX_IDX){ %>
				
				<li data-mbox-id="<%= mbox.MBOX_IDX %>">
					<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-bu14"><%= i18n.mbox.restore %></a>
					<!-- 설정하기 -->
					<a href="#settings/deleted-mail" class="mc-btn_setup" title="<%= i18n.mbox.custom %> <%= i18n.mbox.settings %>">
						<span><%= i18n.mbox.settings %></span>
					</a>
				</li>
<% } %>
			</ul>
		</div>

		<!-- 내편지함 -->

		<div class="mc-section_myMail custom-mboxes">
			<h3 class="mc-lft_mTit">
				<!-- 내 편지함 -->
				<span><%= i18n.mbox.custom %></span>
				<!-- 설정하기 -->
				<a href="#settings/mboxes" class="mc-btn_setup" title="<%= i18n.mbox.custom %> <%= i18n.mbox.settings %>">
					<span><%= i18n.mbox.settings %></span>
				</a>
				<!-- 내 편지함 추가 -->
				<a href="#" class="mc-btn_add" title="<%= i18n.mbox.custom %> <%= i18n.add %>">
					<span><%= i18n.add %></span>
				</a>
				<a href="#" class="mc-btn_fd_up">
					<span><%= i18n.fold %>/<%= i18n.unfold %></span>
				</a>
			</h3>
			<div class="mc-list_menu">
				<!-- 내 편지함 목록 (#mbox-item-template) -->
			</div>
		</div>

		<!-- 검색편지함 -->
<%
	if (app.userModel.get('SEARCH_MBOX_ENABLED')) {
%>
		<div class="mc-section_myMail schb">
			<h3 class="mc-lft_mTit">
				<!-- 검색편지함 -->
				<span><%= i18n.searchMbox.mbox %></span>
				<!-- 설정하기 -->
				<a href="#settings/search-mboxes" class="mc-btn_setup" title="<%= i18n.searchMbox.mbox %> <%= i18n.mbox.settings %>">
					<span><%= i18n.mbox.settings %></span>
				</a>
				<!-- 내 편지함 추가 -->
				<a href="#" class="mc-btn_add" title="<%= i18n.searchMbox.mbox %> <%= i18n.add %>">
					<span><%= i18n.add %></span>
				</a>
				<a href="#" class="mc-btn_fd_up" onclick="$('div.schb:first .mc-list_menu').toggle().is(':visible') ? $('div.schb:first .mc-lft_mTit').removeClass('mc-lft_mTit_active') : $('div.schb:first .mc-lft_mTit').addClass('mc-lft_mTit_active'); return false;">
					<span><%= i18n.fold %>/<%= i18n.unfold %></span>
				</a>
			</h3>
			<div class="mc-list_menu">
				<!-- 검색메일함 목록 (#search-mbox-item-template) -->
			</div>
		</div>
<%
	}
%>
		<!-- Mail Label -->
<%
	if (app.userModel.get('MAIL_LABEL_ENABLED')) {
%>
		<div class="mc-section_myMail taglst">
			<h3 class="mc-lft_mTit">
				<span><%= i18n.label.label %></span>
				<a href="#settings/labels" class="mc-btn_setup" title="<%= i18n.label.label %> <%= i18n.mbox.settings %>">
					<span><%= i18n.mbox.settings %></span>
				</a>
				<a href="#" class="mc-btn_add" title="<%= i18n.label.label %> <%= i18n.add %>">
					<span><%= i18n.add %></span>
				</a>
				<a href="#" class="mc-btn_fd_up" onclick="$('div.taglst:first .mc-list_menu').toggle().is(':visible') ? $('div.taglst:first .mc-lft_mTit').removeClass('mc-lft_mTit_active') : $('div.taglst:first .mc-lft_mTit').addClass('mc-lft_mTit_active'); return false;">
					<span><%= i18n.fold %>/<%= i18n.unfold %></span>
				</a>
			</h3>
			<div class="mc-list_menu">
				<!-- 메일라벨 목록 (#label-item-template) -->
			</div>
		</div>
<%
	}
%>
		<!-- // Mail TAG -->

		<!-- 기타 편지함 -->

		<div class="mc-section_etcMail">
			<h3 class="mc-blind"><%= i18n.mbox.others %></h3>
			<div class="mc-list_menu">
				<ul>
					<!-- 스팸편지함 -->
					<% mbox = getMboxByType(5); %>
					<li data-mbox-id="<%= mbox.MBOX_IDX %>">
						<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-bu6"><%= i18n.mbox.junk %></a>
						<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails?flag=unseen" class="mc-atc">
							<em class="mc-cut"><%= mbox.MBOX_NEW_MAILCOUNT > 0 ? mbox.MBOX_NEW_MAILCOUNT : '' %></em>
						</a>
						<a href="#" class="mc-btn_clean" data-mbox-id="<%= mbox.MBOX_IDX %>">
							<span><%= i18n.empty.junk %></span>
						</a>
					</li>
					<!-- 휴지통 -->
					<% mbox = getMboxByType(3); %>
					<li data-mbox-id="<%= mbox.MBOX_IDX %>">
						<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-bu7"><%= i18n.mbox.trash %></a>
						<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails?flag=unseen" class="mc-atc">
							<em class="mc-cut"><%= mbox.MBOX_NEW_MAILCOUNT > 0 ? mbox.MBOX_NEW_MAILCOUNT : '' %></em>
						</a>
						<a href="#" class="mc-btn_clean" data-mbox-id="<%= mbox.MBOX_IDX %>">
							<span><%= i18n.empty.trash %></span>
						</a>
					</li>
					<!-- 주소록 -->
					<li>
						<a href="#contacts" class="mc-bu10"><%= i18n.contacts %></a>
					</li>
					<!-- 문자보내기 -->
					<% if (app.config.sms.enabled) { %>
					<li>
						<a href="#sms" class="mc-bu15"><%= i18n.sms.sent %></a>
					</li>
					<% } %>
					<!-- 외부편지 불러오기 -->
					<!--
					<li>
						<a href="#settings/import" class="mc-bu11"><%= i18n.Import.mails.text %></a>
						<a href="#settings/import" class="mc-btn_setup" title="<%= i18n.Import.mails.settings %>">
							<span><%= i18n.Import.mails.settings %></span>
						</a>
					</li>
					-->
					<li>
						<a href="#disk" class="mc-bu17 blob-attachments"><%= i18n.disk.management %></a>
					</li>
				</ul>
			</div>
		</div>

	</div>
</script>
<script type="text/template" id="mbox-item-template">
	<div class="reverse-area">
		<button class="btn_folder" type="button">
			<span class="mc-blind">toggle custom mailboxes</span>
		</button>
<%
	var className = '';
	if (mbox.MBOX_PUBLIC == 'S') {
		className = 'secu_folder';
	} else if (mbox.SHARING_MBOX_ID > 0) {
		className = 'share_doner';
	} else if (mbox.SHARED_MBOX_ID > 0) {
		className = 'share_acc';
	}
%>
		<span class="item_wrap <%= className %>">
			<p class="mc-folder_name" style="display:none">
				<input type="text" maxlength="50">
			</p>
			<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-folder_name <%= className %>" data-mbox-id="<%- mbox.MBOX_IDX %>">
				<%- mbox.MBOX_NAME %>
			</a>
<%
	if (mbox.SHARED_MBOX_ID == 0) {
%>
			<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails?flag=unseen" class="mc-noread_num mc-atc">
				<em><%= mbox.MBOX_NEW_MAILCOUNT > 0 ? mbox.MBOX_NEW_MAILCOUNT : '' %></em>
			</a>
			<a href="#" class="mc-btn_modify">
				<span><%= i18n.modify %></span>
			</a>
<%
	}
%>
		</span>
	</div>
	<ul class="child_folder" style="display:none;"></ul>
</script>
<script type="text/template" id="search-mbox-item-template">
	<div class="reverse-area">
		<span class="item_wrap">
			<p class="mc-folder_name" style="display:none">
				<input type="text" maxlength="50">
			</p>
<%
	var url = '#mboxes/' + searchMbox.mbox + '/mails?' + searchMbox.terms;
%>
			<a href="<%= url %>" class="mc-folder_name" data-mbox-id="<%- searchMbox.mbox %>" data-mbox-terms="<%- searchMbox.terms %>">
				<%- searchMbox.name %>
			</a>
			<a href="#" class="mc-btn_modify">
				<span><%= i18n.modify %></span>
			</a>
		</span>
	</div>
</script>
<script type="text/template" id="label-item-template">
	<div class="reverse-area">
		<span class="item_wrap">
			<a href="#labels/<%- label.id %>/mails" class="mc-folder_name" data-label-id="<%- label.id %>">
				<%- label.name %>
			</a>
			<a href="#" class="mc-btn_modify cc_<%- label.color %>">
				<span><%= i18n.modify %></span>
			</a>
		</span>
	</div>
</script>
<script type="text/template" id="mbox-contextmenu-template">
	<ul>
<% if (mbox.MBOX_TYPE === 6) { %>
		<li class="rename-mbox"><a href="#"><%= i18n.mbox.contextmenu.rename %></a></li>
<% } %>
		<li class="mark-all-as-read"><a href="#"><%= i18n.mbox.contextmenu.markAllAsRead %></a></li>
		<li class="empty-mbox"><a href="#"><%= i18n.mbox.contextmenu.empty %></a></li>
<% if (mbox.MBOX_TYPE === 6) { %>
		<li class="remove-mbox"><a href="#"><%= i18n.mbox.contextmenu.remove %></a></li>
<% } %>
		<li class="download-mbox"><a href="#"><%= i18n.mbox.contextmenu.download %></a></li>
	</ul>
</script>
<script type="text/template" id="search-mbox-contextmenu-template">
	<ul>
		<li class="rename-search-mbox"><a href="#"><%= i18n.searchMbox.contextmenu.rename %></a></li>
		<li class="modify-search-mbox"><a href="#"><%= i18n.searchMbox.contextmenu.modify %></a></li>
		<li class="invisible-search-mbox"><a href="#"><%= i18n.searchMbox.contextmenu.invisible %></a></li>
		<li class="remove-search-mbox"><a href="#"><%= i18n.searchMbox.contextmenu.remove %></a></li>
	</ul>
</script>
<script type="text/template" id="mbox-password-template">
	<div class="hTitle"><%= i18n.secureMailboxPassword %></div>
	<a href="#" class="close-mbox-passwd"><span class="lay_close"><%= i18n.close %></span></a>
	<div class="pop_content">
		<p><%= i18n.unauthorizedSecureMbox %></p>
		<table class="edit_table" cellspacing="0" cellpadding="0">
			<colgroup>
				<col width="120"/>
				<col width="auto"/>
			</colgroup>
			<tbody>
				<tr>
					<th><label for="mbox-passwd"><%= i18n.password %></label></th>
					<td><input type="password" name="secu_pw" id="mbox-passwd"/></td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="addButton">
		<button type="button" class="confirm-mbox-passwd"><%= i18n.confirm %></button>
		<button type="button" class="cancel-mbox-passwd"><%= i18n.close %></button>
	</div>
</script>
<script type="text/template" id="content-layout-template">
	<!-- FIXED AREA -->
	<div class="mc-cont_fix_area unselectable">

		<!-- CONTENT HEAD -->
		<div class="mc-content_header">
			<!-- #content-header-template -->
			<div class="mc-headFolder" id="listHeadDiv" style="display:">
			</div>
			<!-- #compose-header-template -->
			<div class="mc-headFolder" id="writeHeadDiv" style="display:none">
			</div>
			<!-- #compose-header-template -->
			<!-- #delivery-status-header-template -->
			<div class="mc-headFolder" id="deliveryStatusHeadDiv" style="display:none">
			</div>
			<!-- #approval-header-template -->
			<div class="mc-headFolder" id="approvalHeadDiv" style="display:none">
			</div>
			<!-- #simple-search-template -->
			<div id="searchInputDiv" style="display:inline;">
			</div>
			<div id="approvalSearchInputDiv" style="display:inline;">
			</div>
			<!-- #simple-search-template -->

		</div>
		<!-- //CONTENT HEAD -->

		<!-- DETAIL SEARCH #advanced-search-template -->
		<div class="mc-section_detailSrch" id="detail_search" style="display:none;">
		</div>
		<div class="mc-section_detailSrch" id="approval_detail_search" style="display:none;">
		</div>
		<!-- //DETAIL SEARCH -->

		<!-- #approval-tab-template -->
		<div class="mc-filterTab clearfix" id="approvalTabDiv" style="display: none;">
		</div>

		<!-- BTN AREA (#*-toolbar-template) -->

		<!-- LIST #list-toolbar-template -->
		<div class="mc-actionArea" id="listBtnMenu" style="display:">
		</div>
		<!-- //LIST -->

		<!-- LIST #delivery-status-toolbar-template -->
		<div class="mc-actionArea" id="deliveryBtnMenu" style="display:none">
		</div>
		<!-- //LIST -->

		<!-- LIST #approval-list-toolbar-template -->
		<div class="mc-actionArea" id="approvalListBtnMenu" style="display:none">
		</div>
		<!-- //LIST -->

		<!-- READ #approval-toolbar-template -->
		<div class="mc-actionArea" id="ok_send_readBtnMenu" style="display:none">
		</div>
		<!-- //READ -->

		<!-- READ #mail-toolbar-template -->
		<div class="mc-actionArea" id="readBtnMenu" style="display:none">
		</div>
		<!-- //READ -->

		<!-- WRITE #compose-toolbar-template -->
		<div class="mc-actionArea" id="writeBtnMenu" style="display:none">
		</div>
		<!-- //WRITE -->

		<!-- WRITE OK #sent-toolbar-template -->
		<div class="mc-actionArea" id="sentBtnMenu" style="display:none">
		</div>
		<!-- //WRITE OK -->

		<!-- //BTN AREA (#*-toolbar-template) -->

	</div>
	<!-- //FIXED AREA -->

	<!-- FLEXIBLE AREA -->
	<div class="mc-list_normal" id="cont_flex_area">
		<!-- MAIL LIST #mail-list-template -->
		<div class="mc-divList unselectable sendLst" id="divList" style="display:">
		</div>
		<!-- //MAIL LIST -->

		<!-- DELIVERY STATUS LIST #delivery-status-list-template -->
		<div class="mc-divList" id="deliveryList" style="display:none">
		</div>
		<!-- //DELIVERY STATUS LIST -->

		<!-- APPROVAL MAIL LIST #approval-list-template -->
		<div class="mc-divList ok_rec" id="ok_send_listDiv" style="display:none">
		</div>
		<!-- //APPROVAL MAIL LIST -->

		<!-- MAIL VIEW #mail-view-template -->
		<div class="mc-divContent" id="mc-preview" style="display:">
			<div title="분할위치 조정" class="mvBar"></div>
			<div class="mc-viewWrap">
			</div>
		</div>
		<!-- //MAIL VIEW -->

		<!-- APPROVAL VIEW #approval-view-template -->
		<div class="mc-divContent ok_rec" id="mc-preview-approval" style="display:none">
			<div title="분할위치 조정" class="mvBar"></div>
			<div class="mc-viewWrap">
			</div>
		</div>
		<!-- //APPROVAL VIEW -->

		<!-- DELIVERY STATUS MAIL VIEW #mail-view-template -->
		<div class="mc-divContent" id="mc-preview-delivery-status" style="display:none">
			<div class="mc-viewWrap">
			</div>
		</div>
		<!-- //DELIVERY STATUS MAIL VIEW -->

		<!-- MAIL WRITE #compose-mail-template -->
		<div class="mc-writeWrap" id="writeWrap" style="display:none">
		</div>
		<!-- //MAIL WRITE -->

		<!-- MAIL WRITE OK #sent-mail-template -->
		<div class="mc-divContent" id="sentWrap" style="display:none;left:0">
		</div>
		<!-- //MAIL WRITE OK -->

	</div>
	<!-- //FLEXIBLE AREA -->

	<!-- POPUP -->

	<!-- SELECT MAIL #select-categorized-mails-template -->
	<div id="ly_select_item" class="mc-dh_layer" style="left:11px;top:80px;display:none" hidable="true">
	</div>
	<!-- //SELECT MAIL -->

	<!-- 편지이동 #move-to-mbox-template -->
	<div id="moveMailLayer" class="mc-dh_layer" style="display:none;left:385px;top:80px" hidable="true">
	</div>
	<!-- //편지이동 -->

	<!-- 계속이동 #filter-mails-template -->
	<div id="ly_move_mail_continue" class="mc-dh_layer" style="display:none;left:385px;top:80px" hidable="true">
	</div>
	<!-- //계속이동 #filter-mails-template -->

	<!-- 라벨등록 #select-labels-template -->
	<div id="selectLabelsLayer" class="mc-dh_layer" style="display:none;left:789px; top:121px;" hidable="true">
	</div>
	<!-- //라벨등록 -->

	<!-- 추가기능 #more-actions-template -->
	<div id="ly_select_mailaction" class="mc-dh_layer" style="display:none;left:463px;top:80px" hidable="true">
	</div>
	<!-- //추가기능 #more-actions-template -->

	<!-- 헤더보기 원문보기 #mail-source-template -->
	<div id="viewmime" class="mc-dh_layer" style="display:none;left:45%;top:45%;margin-top:-200px;margin-left:-313px" hidable="true">
	</div>
	<!-- //헤더보기 원문보기 #mail-source-template -->

	<!-- 추가기능-주소록추가시 화면 #add-contact-template -->
	<div id="ly_address" class="mc-dh_layer" style="display:none;left:463px;top:80px" hidable="true">
	</div>
	<!-- //추가기능-주소록추가시 화면 #add-contact-template -->

	<!-- 발송취소 안내 #delivery-status-info-template -->
	<div id="sc_layer" class="mc-dh_layer" style="left:150px; width:350px; display:none;" hidable="true">
	</div>
	<!-- //발송취소 안내 #delivery-status-info-template -->

	<!-- 스팸신고 레이어 #report-spam-template -->
	<div class="mc-dh_layer mail-toolbar-report-spam" style="left:183px; top:80px; display:none;" hidable="true">
	</div>
	<!-- // e: 스팸신고 레이어 #report-spam-template -->

	<!-- 서명 레이어 #signature-template -->
	<div id="signature-layer" class="mc-dh_layer signature" style="display:none;"  hidable="true">
	</div>
	<!-- //서명 레이어 #signature-template -->

	<!-- 편지지 레이어 #stationery-template -->
	<div id="stationery-layer" class="mc-dh_layer letter" style="display:none;"  hidable="true">
	</div>
	<!-- //편지지 레이어 #stationery-template -->

	<!-- 문서양식 검색 레이어 #document-form-template -->
	<div id="document-form-layer" class="ad_layer fixed" style="display:none;width:600px;" hidable="true">
	</div>
	<!-- //문서양식 검색 레이어 #document-form-template -->

	<!-- 발송예약 #delay-delivery-template -->
	<div id="delay-delivery-layer" style="display:none;">
	</div>
	<!-- //발송예약 #delay-delivery-template -->

	<!-- 편지쓰기 설정 #compose-options-template -->
	<div id="compose-options-layer" class="mc-dh_layer" style="display:none;right:13px;top:84px;" hidable="true">
	</div>
	<!-- //편지쓰기 설정 #compose-options-template -->
	
	<!-- 대용량파일 환경설정 #blob-options-template -->
	<div id="blob-options-layer" class="ad_layer" style="width:570px; display:none;">
	</div>
	<!-- //대용량파일 환경설정 #blob-options-template -->

	<!-- 인쇄 설정 #print-options-template -->
	<div id="print-options-layer" class="mc-dh_layer" style="right:11px; top:80px; display:none;" hidable="true">
	</div>
	<!-- // 인쇄 설정 #print-options-template -->

	<!-- //POPUP -->
</script>
<script type="text/template" id="content-header-template">
<%
if (paginator.params && paginator.params['search']) {
	var search = paginator.params['search'];
	var searchResults = paginator.totalRecords;
	var searchTerms = [];
	switch (typeof search) {
	case 'string':
		searchTerms.push(search);
		break;
	case 'object':
		if (search.subject || search.body || search.attachments) {
			searchTerms.push(search.subject || search.body || search.attachments);
		}
		if (search.from) {
			searchTerms.push(i18n.from + ':' + search.from);
		}
		if (search.to) {
			searchTerms.push(i18n.to + ':' + (search.to || search.cc));
		}
		if (search.converation) {
			searchTerms.push(i18n.moreActions.showAsConveration + ':' + search.converation);
		}
	}
%>
	<strong class="mc-folderName"><%= i18n.search.results %></strong>
	<a href="<%- '#' + paginator.getURL({ page : 1 }) %>" class="mc-newMail"><%= i18n.search.resultsPrefix %><%= searchResults %><%= i18n.search.resultsSuffix %></a>
	<span class="mc-bar">/</span>
	<a class="mc-allMail"><%- searchTerms.join(', ') %></a>
<%
} else if (paginator.labelId) {
	var labelModel = labelCollection.findModel('id', paginator.labelId);
%>
	<strong class="mc-folderName"><%= i18n.label.header %><%- labelModel.get('name') %></strong>
	<a href="<%- '#' + paginator.getURL({ page : 1 }) %>" class="mc-newMail"><%= i18n.search.resultsPrefix %><%- paginator.totalRecords %><%= i18n.search.resultsSuffix %></a>
<%
} else {
	var mboxName;
	switch (mboxModel.get('MBOX_TYPE')) {
	case 1 :
		mboxName = i18n.mbox.inbox;
		break;
	case 2 :
		mboxName = i18n.mbox.sent;
		break;
	case 3 :
		mboxName = i18n.mbox.trash;
		break;
	case 4 :
		mboxName = i18n.mbox.drafts;
		break;
	case 5 :
		mboxName = i18n.mbox.junk;
		break;
	case 6 :
		mboxName = mboxModel.get('MBOX_NAME');
		break;
	case 7 :
		mboxName = i18n.mbox.restore;
		break;
	}
%>
	<strong class="mc-folderName">
		<%- mboxName %>
<%
	if (mboxModel.get('sharer')) {
%>
	<%- '(' + i18n.sharer + ' : ' + mboxModel.get('sharer') +')' %>
<%
	}
%>
	</strong>
<%
	if (mboxModel.get('SHARED_MBOX_ID') == 0) {
%>
	<a href="<%- '#' + paginator.getURL({ page : 1, flag : 'unseen' }) %>" class="mc-newMail"><%= mboxModel.get('MBOX_NEW_MAILCOUNT') %></a>
	<span class="mc-bar">/</span>
	<a href="<%- '#' + paginator.getURL({ page : 1, flag : null }) %>" class="mc-allMail"><%= mboxModel.get('MBOX_MAILCOUNT') %></a>
	<a href="#" class="mc-noReadDel"><%= i18n.deleteUnreadMail %></a>
<%
	} else {
%>
	<a href="<%- '#' + paginator.getURL({ page : 1, flag : null }) %>" class="mc-allMail"><%= mboxModel.get('MBOX_MAILCOUNT') %></a>
<%
	}
}
%>
</script>
<script type="text/template" id="compose-header-template">
<%
	var link = document.createElement("a");
	var hash = location.hash;
	link.href = hash.substring(hash.indexOf('#') + 1);
	var pathname = link.pathname;
	if (pathname.indexOf('/') == 0) {
		var lastSlashIndex = pathname.lastIndexOf('/');
		pathname = pathname.substring(lastSlashIndex + 1);
	}
	var header = i18n.compose;
	if (pathname == 'compose-for-me')
		header = i18n.composeForMe;
	else if (pathname == 'forward-for-me')
		header = i18n.forwardForMe;
%>
	<strong class="mc-folderName"><%= header %></strong>
	<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails" class="mc-noReadDel"><%= i18n.drafts %> <em class="mc-newMail"><%- mbox.MBOX_MAILCOUNT %></em></a>
</script>
<script type="text/template" id="delivery-status-header-template">
	<strong class="mc-folderName"><%= i18n.mbox.deliveryStatus %></strong>
	<a href="#delivery-status"><em class="mc-newMail"><%- paginator.totalRecords %></em></a>
</script>

<script type="text/template" id="simple-search-template">
	<fieldset class="mc-msearch">
		<legend><%= i18n.search.simple %></legend>
		<input name="" type="text" class="mc-search" placeholder="<%= i18n.search.simple %>">
		<input name="" type="button" class="mc-search_btn">
		<a href="#" class="mc-search_detail"><span><%= i18n.search.advanced %></span></a>
	</fieldset>
</script>
<script type="text/template" id="advanced-search-template">
	<div class="srch_item_row1">
		<div class="srch_item">
			<label><%= i18n.search.from %></label>
			<input name="" type="text" class="ipt_text advanced-search-from">
		</div>
		<div class="srch_item2">
			<label><%= i18n.search.to %></label>
			<select name="" class="slt_mailBox advanced-search-to-options">
				<option value="to+cc"><%= i18n.search.to %>+<%= i18n.search.cc %></option>
				<option value="to"><%= i18n.search.to %></option>
			</select>
			<input name="" type="text" class="ipt_text advanced-search-to">
		</div>
		<div class="srch_item3">
			<label for="chk_srchOption1"><%= i18n.search.contents %></label>
			<select name="" class="slt_mailBox advanced-search-contents-options">
				<option value="subject+body"><%= i18n.search.subject %>+<%= i18n.search.body %></option>
				<option value="subject"><%= i18n.search.subject %></option>
				<option value="body"><%= i18n.search.body %></option>
				<option value="attachments"><%= i18n.search.attachments %></option>
				<option value="all"><%= i18n.search.all %></option>
			</select>
			<input name="" type="text" class="ipt_text advanced-search-contents">
		</div>
	</div>
	<div class="srch_item_row2">
		<div class="srch_item">
			<label><%= i18n.search.mbox %></label>
			<select name="" class="slt_mailBox advanced-search-mbox-select">
			</select>
		</div>
		<div class="srch_item2">
			<label for="rdo_srchOption1"><%= i18n.search.excludeTrashAndSpam.label %>:</label>
			<input class="rdo_srch" id="rdo_srchOption1" type="radio" name="excludeTrashAndSpam" value="true" checked>
			<label for="rdo_srchOption1"><%= i18n.search.excludeTrashAndSpam.yes %></label>
			<input class="rdo_srch" id="rdo_srchOption2" type="radio" name="excludeTrashAndSpam" value="false">
			<label for="rdo_srchOption2"><%= i18n.search.excludeTrashAndSpam.no %></label>
		</div>
		<div class="srch_item3">
			<label><%= i18n.search.period %></label>
			<select name="" class="advanced-search-period-select">
				<option value="ALL"><%= i18n.search.all %></option>
				<option value="1W"><%= i18n.search.oneWeek %></option>
				<option value="1M"><%= i18n.search.oneMonth %></option>
				<option value="3M"><%= i18n.search.threeMonths %></option>
				<option value="6M"><%= i18n.search.sixMonths %></option>
				<option value="1Y"><%= i18n.search.oneYear %></option>
				<option value="CUSTOM"><%= i18n.search.custom %></option>
			</select>
			<input name="" type="text" class="ipt_text advanced-search-start-date" style="width: 65px;" disabled>
			<span class="hyphen">-</span>
			<input name="" type="text" class="ipt_text advanced-search-end-date" style="width: 65px;" disabled>
		</div>
	</div>
	<button class="btn_srch_submit"><span><%= i18n.search.text %></span></button>
</script>
<script type="text/template" id="list-toolbar-template">
	<div class="mc-buttonSet">
		<span class="mc-selectBtn">
			<button class="mc-sbLft btn_selectAll"><%= i18n.selectAll %></button>
			<!-- <button class="mc-sbRgt" onclick="$('#ly_select_item').toggle().attr('hidable', false);return false;"> -->
			<button class="mc-sbRgt">
				<img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp">
			</button>
		</span>
<%
	if (mbox.SHARED_MBOX_ID == 0) {
		if (mbox.MBOX_TYPE != 3 && mbox.MBOX_TYPE != 5 && user.USERS_DELBOX != 'N') {
%>
		<button type="button" class="b btn_deleteMail"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buDel"><%= i18n.Delete %></button>
<%
		}
%>
		<button type="button" class="b permanently-delete-mail"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buDel"><%= i18n.permanentlyDelete %></button>
<%
		if (mbox.MBOX_TYPE != 4) {
%>
		<button type="button" class="btn_markAsRead mark-readMode"><%= i18n.markAsRead %></button>
		<button type="button" class="btn_reportSpam b"><%= i18n.reportSpam %></button>
<%
		}
%>
		<span class="mc-groupBtn">
<%
		if (mbox.MBOX_TYPE != 4) {
%>
			<button type="button" class="lft reply-mail"><%= i18n.reply %></button>
			<button type="button" class="mdl reply-mail-to-all"><%= i18n.replyToAll %></button>
<%
		}
%>
			<button type="button" class="rgt forward-mail"><%= i18n.forward %></button>
<%
		if (mbox.MBOX_TYPE == 2) {
%>
			<button type="button" class="rgt recomposeMailBtn"><%= i18n.resend %></button>
<%
		}
%>
		</span>
<%
	}   //  end if (mbox.SHARED_MBOX_ID == 0)
%>
<%
	if (mbox.SHARED_MBOX_ID > 0) {
%>
		<span class="mc-groupBtn">
			<button type="button" class="forward-for-me"><%= i18n.forwardForMe %></button>
			<button type="button" class="forward-mail"><%= i18n.forward %></button>
		</span>
<%
	}
%>
<%
	if (mbox.MBOX_TYPE != 4) {
%>
<%
		if (mbox.SHARED_MBOX_ID == 0) {
%>
		<span class="mc-groupBtn"> 
			<button class="move-to-mbox lft"><%= i18n.moveTo.text %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
			<button class="select-label"><%= i18n.selectLabel.text %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
		</span>
<%
		}
%>
		<button class="btn_txt more-actions list-more-actions"><%= i18n.moreActions.text %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
<%
	}
%>
	</div>
<%
	if(mbox.MBOX_TYPE != 4) {
		var onClass = {
			noSplit : '',
			horizontalSplit : '',
			verticalSplit : '',
		};
		switch (user.USERS_MAIL_VIEW_MODE) {
		case '0':
			onClass.noSplit = 'on';
			break;
		case '1':
			onClass.horizontalSplit = 'on';
			break;
		case '2':
			onClass.verticalSplit = 'on';
			break;
		default:
			onClass.noSplit = 'on';
		}
%>
	<div class="mc-rightTool">
<%
		if (user.USERS_MAIL_VIEW_MODE != '0') {
%>
		<a href="#" class="mc-print" title="<%= i18n.print %>">
			<em><%= i18n.print %></em>
		</a>
<%
		}
%>
		<a href="#" class="mc-refresh" title="<%= i18n.refresh %>" onclick="location.reload(); return false;">
			<em><%= i18n.refresh %></em>
		</a>
		<span class="mc-layoutSelect">
			<a href="#" class="mc-setCommon <%= onClass.noSplit %>" title="<%= i18n.previewPaneNone %>" id="ls_normal" ><em><%= i18n.noSplit %></em></a>
			<a href="#" class="mc-setVertical <%= onClass.verticalSplit %>" title="<%= i18n.previewPaneOnRight %>" id="ls_vertical"><em><%= i18n.verticalSplit %></em></a>
			<a href="#" class="mc-setHorizontal <%= onClass.horizontalSplit %>" title="<%= i18n.previewPaneOnBottom %>" id="ls_horizon"><em><%= i18n.horizontalSplit %></em></a>
		</span>
	</div>
<%
	} // end if (mbox.MBOX_TYPE != 4)
%>

</script>
<script type="text/template" id="mail-toolbar-template">
	<div class="mc-buttonSet">
		<span class="mc-groupBtn">
<%
	if (mbox.SHARED_MBOX_ID == 0) {
%>
			<button type="button" class="lft reply-mail"><%= i18n.reply %></button>
			<button type="button" class="mdl reply-mail-to-all"><%= i18n.replyToAll %></button>
			<button type="button" class="rgt forward-mail"><%= i18n.forward %></button>
<%
	} else {
%>
		<span class="mc-groupBtn">
			<button type="button" class="lft forward-for-me"><%= i18n.forwardForMe %></button><button type="button" class="rgt forward-mail"><%= i18n.forward %></button>
		</span>
<%
	}
%>
		</span>
<%
	if (mbox.SHARED_MBOX_ID == 0) {
		if (mbox.MBOX_TYPE != 3 && mbox.MBOX_TYPE != 5 && user.USERS_DELBOX != 'N') {
%>
		<button type="button" class="b delete-mail"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buDel"><%= i18n.Delete %></button>
<%
		}
%>
		<button type="button" class="b permanently-delete-mail"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buDel"><%= i18n.permanentlyDelete %></button>
<%
		var mboxModel = mboxCollection.findModel('MBOX_IDX', mail.MBOX_IDX);
		if (mbox.MBOX_TYPE == 2 || (mboxModel && mboxModel.get('MBOX_TYPE') == 2)) {
%>
		<button type="button" class="rgt recomposeMailBtn"><%= i18n.resend %></button>
<%
		}
%>
		<button type="button" class="btn_markAsRead"><%= mail.M_ISREAD == 'Y' ? i18n.markAsUnread : i18n.markAsRead %></button>
		<button type="button" class="btn_reportSpam b"><%= i18n.reportSpam %></button>
		<span class="mc-groupBtn">
			<button class="move-to-mbox lft"><%= i18n.moveTo.text %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
			<button class="select-label"><%= i18n.selectLabel.text %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
		</span>
<%
	} // end if (mbox.SHARED_MBOX_ID == 0)
%>
		<button class="btn_txt more-actions mail-more-actions"><%= i18n.moreActions.text %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
<%
	if (!popup) {
%>
		<span class="bar list-bar">l</span>
		<button type="button" class="btn_txt goList"><%= i18n.list %></button>
		<span class="barS list-bar">l</span>
<%
	}
%>
		<button type="button" class="btn_txt goPrev"><%= i18n.previous %></button>
		<span class="barS">l</span>
		<button type="button" class="btn_txt goNext"><%= i18n.next %></button>
	</div>
	<div class="mc-rightTool">
		<a href="#" class="mc-print" title="<%= i18n.print %>"><em><%= i18n.print %></em></a>
	</div>
</script>
<script type="text/template" id="compose-toolbar-template">
	<div class="mc-buttonSet">
		<button type="button" class="b send-mail"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buSend"><%= i18n.send %></button>
<% if (config.secureMail.enabled) { %>
		<button type="button" class="b send-secure"><%= i18n.sendSecure %></button>
<% } %>
		<button type="button" class="preview-mail"><%= i18n.preview %></button>
		<button type="button" class="save-mail"><%= i18n.saveDraft %></button>
	</div>
	<div class="mc-rightTool">
		<span id="draft-time" style="line-height:30px; padding-right:5px;"></span>
<%
	if (!popup) {
%>
		<button onclick="window.open('popup/#compose','','scrollbars=yes,width=1000,height=800'); return false;">
			<img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buNewWin"><%= i18n.newWindow %>
		</button>
<%
	}
%>
		<button>
			<img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buWriteOpt"><%= i18n.newWindow %>
		</button>
	</div>
</script>
<script type="text/template" id="sent-toolbar-template">
	<p class="menu_txt">
		<a href="#" class="inbox"><%= i18n.backToInbox %></a>
		<span class="t_bar">|</span>
		<a href="#" class="compose"><%= i18n.compose %></a>
	</p>
</script>
<script type="text/template" id="delivery-status-toolbar-template">
	<div class="mc-buttonSet toobar-disabled-buttonSet">
		<span class="mc-selectBtn">
			<button class="mc-sbLft btn_selectAll"><%= i18n.selectAll %></button>
			<button class="mc-sbRgt" onclick="$('#ly_select_item').toggle().attr('hidable', false);return false;"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp"></button>
		</span>
		<button type="button" class="b btn_deleteMail"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buDel"><%= i18n.Delete %></button>
		<!-- <span class="mc-groupBtn">
			<button type="button" class="lft"><%= i18n.reply %></button>
			<button type="button" class="mdl"><%= i18n.replyToAll %></button>
			<button type="button" class="rgt"><%= i18n.forward %></button>
		</span> -->
		<button type="button" class="btn_txt" id="sc_guide" onclick="$('#sc_layer').toggle().attr('hidable', false);return false;">
			발송취소 안내 <img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buExp">
		</button>
	</div>
</script>
<script type="text/template" id="report-spam-template">
	<div class="type_a spam_layout">
		<ul>
			<li class="first">
				<h5><%= i18n.typeOfReportMail %></h5>
				<input name="join_line" title="<%= i18n.reportSpam %>" class="txt_radio report-spam-mail" id="spam_call"
					type="radio"checked="checked" value="spam"/>
				<label for="spam_call"><%= i18n.reportSpam %></label>
				<input name="join_line" title="<%= i18n.reportHackingMail %>" class="txt_radio radio_last report-spam-hacking-mail"
					id="hack_call" type="radio" value="hacking"/>
				<label for="hack_call"><%= i18n.reportHackingMail %></label>
				<div class="hack_write" style="display:none">
					<p class="input_area">
						<textarea name="call_con" id="call_con" cols="" rows="" class="report-spam-description"
							placeholder="<%= i18n.placeholderHackingMail %>"></textarea>
					</p>
				</div>
			</li>
			<li>
				<h5><%= i18n.blockedMail %></h5>
				<input name="spam_handle" title="<%= i18n.moveBlockedMailToSpamMailbox %>" class="txt_radio" id="spam_move" type="radio" checked="checked" value="move"/>
				<label for="spam_move"><%= i18n.moveBlockedMailToSpamMailbox %></label>
				<input name="spam_handle" title="<%= i18n.permanentlyDeleteBlockedMail %>" class="txt_radio radio_last" id="spam_del" type="radio" value="del" />
				<label for="spam_del"><%= i18n.permanentlyDeleteBlockedMail %></label>
			</li>
			<li>
				<input name="spam_filter" type="checkbox" checked="checked" id="spam_filter">
				<label for="spam_filter"><%= i18n.addToBlockedAddresses %></label>
			</li>
		</ul>
		<p class="btn_area" id="spem_call_bt">
			<button type="button" class="s_bt report-spam"><%= i18n.report %></button>
			<button type="button" class="s_bt report-spam-cancel"><%= i18n.cancel %></button>
		</p>
	</div>
</script>
<script type="text/template" id="mail-list-template">
	<!-- LIST ITEM -->
	<h4 class="mc-blind">Sort By</h4>
	<ul class="mc-mailListItem">
		<li class="mc-check">
			<input name="" type="checkbox" class="mCheck" value="">
			<label class="mc-blind"><%= i18n.selectAllMails %></label>
		</li>
		<li class="mc-important">
			<a href="#" class="icoImportantOn" title="<%= i18n.sortByStarred %>"></a>
		</li>
		<li class="mc-read">
			<a href="#" class="icoReadNot" title="<%= i18n.sortByUnread %>"></a>
		</li>
		<li class="mc-file">
			<a href="#" class="icoFile" title="<%= i18n.sortByAttachments %>"></a>
		</li>
<%
	var sortField = paginator.sortField;
	var sortOrder = paginator.sortOrder;
	var url = function(field) {
		var params = {
			sortField : field,
			sortOrder : sortField == field && sortOrder == 'DESC' ? 'ASC' : 'DESC',
		};
		return '#' + paginator.getURL(params);
	};
	var className = function(field) {
		if (sortField == field && sortOrder == 'ASC') {
			return 'mc-up';
		}
		return 'mc-down';
	};
	var fontSize = user.LIST_FONT_SIZE + 'pt';
	var fontStyle = 'style="font-size: ' + fontSize + ';"'

	if (mbox.MBOX_TYPE == 2 || mbox.MBOX_TYPE == 4) {
%>
		<li class="mc-from <%= sortField == 'M_TO' ? 'std' : '' %>">
			<a href="<%- url('M_TO') %>" class="<%= className('M_TO') %>" <%= fontStyle %>><%= i18n.to %></a>
		</li>
<%
	} else {
%>
		<li class="mc-from <%= sortField == 'M_SENDER' ? 'std' : '' %>">
			<a href="<%- url('M_SENDER') %>" class="<%= className('M_SENDER') %>" <%= fontStyle %>><%= i18n.from %></a>
		</li>
<%
	}
%>
		<li class="mc-title <%= sortField == 'M_TITLE' ? 'std' : '' %>">
			<a href="<%- url('M_TITLE') %>" class="<%= className('M_TITLE') %>" <%= fontStyle %>><%= i18n.subject %></a>
		</li>
		<li class="mc-date <%= sortField == 'M_TIME' ? 'std' : '' %>">
			<a href="<%- url('M_TIME') %>" class="<%= className('M_TIME') %>" <%= fontStyle %>><%= i18n.date %></a>
		</li>
		<li class="mc-size <%= sortField == 'M_SIZE' ? 'std' : '' %>">
			<a href="<%- url('M_SIZE') %>" class="<%= className('M_SIZE') %>" <%= fontStyle %>><%= i18n.size %></a>
		</li>
	</ul>
	<!-- //LIST ITEM -->

	<!-- LIST -->
	<div class="mc-listWrap">
		<h4 class="mc-blind">List of Mails</h4>
		<ol class="mc-mailList">
			<!-- #mail-item-template -->
		</ol>
	</div>
	<!-- //LIST -->

	<!-- PAGINATE #mail-pagination-template -->
	<div class="mc-paginate">
	</div>
	<!-- //PAGINATE -->

	<div id="previewMailLayer" class="mc-dh_layer" style="display:;left:237px;top:137px;">
	</div>
</script>
<script type="text/template" id="mail-list-group-by-date-template">
<%
	var dateType;
	switch (data.type) {
	case 'today':
		dateType = i18n.groupByDate.today;
		break;
	case 'yesterday':
		dateType = i18n.groupByDate.yesterday;
		break;
	case 'thisWeek':
		dateType = i18n.groupByDate.thisWeek;
		break;
	case 'lastWeek':
		dateType = i18n.groupByDate.lastWeek;
		break;
	case 'twoWeeksAgo':
		dateType = i18n.groupByDate.twoWeeksAgo;
		break;
	case 'threeWeeksAgo':
		dateType = i18n.groupByDate.threeWeeksAgo;
		break;
	case 'lastMonth':
		dateType = i18n.groupByDate.lastMonth;
		break;
	case 'delayDelivery':
		dateType = i18n.groupByDate.delayDelivery;
		break;
	case 'old':
	default:
		dateType = i18n.groupByDate.old;
		break;
	}
	var mTime = $.format.parseDate(data.mailModel.get('M_TIME')).date;
	var dayInWeek = $.format.date(mTime, 'ddd');
	mTime = $.format.date(mTime, 'yyyy.MM.dd'); 
%>
	<!-- INFOR SENDER -->
	<!-- ic_fold 열려 있을때+ ic_unfold 닫혀 있을때 -->
		<span class="day_view"><em class="ic_fold"><%= i18n.groupByDate.fold %>/<%= i18n.groupByDate.unfold %></em><strong><%= dateType %></strong>
		<span class="date"><%= dayInWeek %> <strong>- <%= mTime %></strong> </span></span>
	<!-- //INFOR SENDER -->
</script>
<script type="text/template" id="mail-empty-item-template">
	<li class="tc b_none">
		<strong><%= i18n.noMessages %></strong>
	</li>
</script>

<script type="text/template" id="mail-item-template">
<%
	var isToday = function(date) {
		if (!date) {
			return false;
		}
		var now = new Date();
		var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
		if (today.getTime() == date.getTime()) {
			return true;
		}
		return false;
	};

	var formatDate = function(M_TIME) {
		var date, parsedDate = $.format.parseDate(M_TIME);
		date = parsedDate && parsedDate.date;
		if (isToday(date)) {
			date = $.format.date(M_TIME, 'HH:mm:ss');
		} else {
			date = $.format.date(M_TIME, 'yy-MM-dd HH:mm:ss');
		}
		return date;
	};

	var parameters = paginator.getParameters();
	// Special-Use Mailboxes: 'all', 'important', 'attached', 'delivery-status'
	if (typeof mbox.MBOX_IDX == "string") {
		parameters += '&specialUseMailbox=' + mbox.MBOX_IDX;
	}

	var fontSize = user.LIST_FONT_SIZE + 'pt';
	var fontStyle = 'style="font-size: ' + fontSize + ';"'
%>
	<ul class="mc-mInfo">
		<li class="mc-check">
			<input name="M_IDX" type="checkbox" class="mCheck" value="<%= mail.M_IDX %>">
			<label class="mc-blind"><%= i18n.selectMail %></label>
		</li>
		<li class="mc-important">
			<% if (mail.M_PRIORITY && mail.M_PRIORITY == 1) { %>
				<a href="#" class="icoImportantOn" title="<%= i18n.starredMail %>"></a>
			<% } else { %>
				<a href="#" class="icoImportantOff" title="<%= i18n.unstarredMail %>"></a>
			<% } %>
		</li>
		<li class="mc-read">
			<% if (mbox && mbox.SHARED_MBOX_ID > 0) { %>
				<span title="<%= i18n.readMail %>" class="icoRead yes"></span>
			<% } else if (mail.M_ISREAD === 'F') { %>
				<span title="<%= i18n.forwardedMail %>" class="icoRead fw"></span>
			<% } else if (mail.M_ISREAD === 'R') { %>
				<span title="<%= i18n.repliedMail %>" class="icoRead re"></span>
			<% } else if (mail.M_ISREAD === 'P') { %>
				<span title="<%= i18n.importedMail %>" class="icoRead noext1"></span>
			<% } else if (mail.M_ISREAD === 'O') { %>
				<span title="<%= i18n.importedMail %>" class="icoRead yesext1"></span>
			<% } else if (mail.M_ISREAD === 'Y' || mail.M_ISREAD === 'A') { %>
				<span title="<%= i18n.readMail %>" class="icoRead yes"></span>
			<% } else { %>
				<span title="<%= i18n.unreadMail %>" class="icoRead no"></span>
			<% } %>
		</li>
		<li class="mc-file">
			<% if (mail.M_ATTACHE === 'attache' || mail.M_ATTACHE == 'Y') { %>
				<span title="<%= i18n.attachmentsInMail %>" class="icoFile"></span>
			<% } else { %>
				<span title="" class=""></span>
			<% } %>
		</li>
		<li class="mc-date" x-ms-format-detection="none" <%= fontStyle %>>
			<%= formatDate(mail.M_TIME) %>
			<% if (mail.delayDateTime) { %>
				<p class="reser_mark"><span class="reser_txt"><%= i18n.scheduled %></span><span class="ic_timer"><span class="blind">시계</span></span></p>
			<% } %>
		</li>
		<li class="mc-size" <%= fontStyle %>>
			<%= numeral(mail.M_SIZE).format('0 b') %>
		</li>
	</ul>
<%
	var composeTo = mail.M_SENDER || '';
	if (mbox.MBOX_TYPE == 2 || mbox.MBOX_TYPE == 4) {
		composeTo = mail.M_TO;
	}
%>
	<div class="mc-mTitle">
		<div class="mc-name">
			<% if (mbox.MBOX_TYPE == 2 || mbox.MBOX_TYPE == 4) { %>
				<span class="mc-blind"><%= i18n.to %></span>
				<a href="#compose?to=<%= encodeURIComponent(composeTo) %>" title="<%- mail.M_TO %>" <%= fontStyle %>>
					<%- mail.M_TO %>
				</a>
			<%
				} else {
				var countryName = '';
				var countryCode = '';
				if (mail.geoIps.length > 0) {
					for (var i = 0; i < mail.geoIps.length; i++) {
						countryName = mail.geoIps[i].countryName;
						countryCode = mail.geoIps[i].countryCode;
						if (countryName && countryName.trim().length > 0)
							break;
					}
					countryName = countryName && countryName.trim().length > 0 ? countryName : i18n.geoIp.noInformation;
				}
 			%>
				<span class="mc-blind"><%= i18n.from %></span>
			<%
				if (user.SHOW_FROM_COUNTRY) {
			%>
				<em class="naflag <%= countryCode %>" title="<%= countryName %>"></em>
			<%
				}
			%>
				<a href="#compose?to=<%= encodeURIComponent(composeTo) %>" title="<%- mail.M_SENDER %>" <%= fontStyle %>>
					<%- mail.M_SENDERNM ? mail.M_SENDERNM : mail.M_SENDER %>
				</a>
			<% } %>
		</div>
		<div class="mc-subject">
			<% 
				if(mail.M_INJURIOUSE && mail.M_INJURIOUSE == 'Y') {
			%>
					<em class="ico_caution" title="<%= i18n.maliciousEmailIcoTitle %>"></em>
			<% 
				}
			%>
<%
	if (mail.MALICIOUS_ID) {
%>
			<span title="<%= i18n.blockReading %>" class="icoBlock"></span>
<%
	}
%>
			<span class="mail-labels">
					<!-- changeMailLabels() -->
			</span>
<%
	var mboxName;
	if (mbox.MBOX_TYPE == 6) {
		switch (mbox.MBOX_IDX) {
		case 'all':
		case 'unseen':
		case 'important':
		case 'attached':
			var mboxModel = mboxCollection.findModel('MBOX_IDX', mail.MBOX_IDX);
			switch (mboxModel.get('MBOX_TYPE')) {
			case 1 :
				mboxName = i18n.mbox.inbox;
				break;
			case 2 :
				mboxName = i18n.mbox.sent;
				break;
			case 3 :
				mboxName = i18n.mbox.trash;
				break;
			case 4 :
				mboxName = i18n.mbox.drafts;
				break;
			case 5 :
				mboxName = i18n.mbox.junk;
				break;
			case 6 :
				mboxName = mboxModel.get('MBOX_NAME');
				break;
			}
			mboxName = '[' + mboxName + ']';
			break;
		}
	}

	if (mbox.MBOX_TYPE == 4) {
%>
			<a href="#compose?id=<%- mail.M_IDX %>" <%= fontStyle %>>
<%
	} else {
		var url = '#mboxes/' + mbox.MBOX_IDX; 
		if (paginator.labelId) {
			parameters += '&labelId=' + paginator.labelId;
			url = '#labels/' + paginator.labelId;
		}
		url += '/mails/' + mail.M_IDX + parameters;
%>
			<a href="<%- url %>" <%= fontStyle %>>
<%
	}
	if (mboxName) {
%>
				<span class="list_title" <%= fontStyle %>><%- mboxName %></span>
<%
	}
%>
				<span class="mail_title">
					<span class="mc-blind" <%= fontStyle %>><%= i18n.subject %></span>
					<%- mail.M_TITLE ? mail.M_TITLE : i18n.noSubject %>
				</span>
			</a>
<%
	if (mbox.MBOX_TYPE != 4) {
%>
			<a href="#" title="<%= i18n.previewMail %>" class="icoPreviewMail">
				<span class="mc-blind"><%= i18n.preview %></span>
			</a>
			<a href="<%- url %>" title="<%= i18n.viewInNewWindow %>" class="icoNewWindow">
				<span class="mc-blind"><%= i18n.viewInNewWindow %></span>
			</a>
<%
	}
%>
		</div>
	</div>
</script>

<script type="text/template" id="mail-context-menu-template">
	<ul>
		<li class="compose-mail"><a href="#"><%= i18n.compose %></a></li>
		<li class="search-from"><a href="#"><%= i18n.contextMenuActions.searchFrom %></a></li>
		<li class="search-to"><a href="#"><%= i18n.contextMenuActions.searchTo %></a></li>
		<li class="division">&nbsp;</li>
		<li class="search-from-to"><a href="#"><%= i18n.contextMenuActions.searchFromTo %></a></li>
		<li class="show-as-converation"><a href="#"><%= i18n.contextMenuActions.showAsConveration %></a></li>
		<li class="division">&nbsp;</li>
		<li class="add-sender-important"><a href="#"><%= i18n.contextMenuActions.addSenderImportant %></a></li>
		<li class="add-to-contact"><a href="#"><%= i18n.contextMenuActions.addContact %></a></li>
		<li class="division">&nbsp;</li>
		<li class="block-from"><a href="#"><%= i18n.contextMenuActions.blockFrom %></a></li>
		<li class="delete-from-to"><a href="#"><%= i18n.contextMenuActions.deleteFromTo %></a></li>
	</ul>
</script>

<script type="text/template" id="mail-simple-preview-template">
	<div class="type_b ps1">
		<!-- 미리보기 내용 -->
		<div class="pText">
			<%- mail.M_CONTENT %>
		</div>
		<!-- //미리보기 내용 -->
		<!-- 첨부파일이 있을때 -->
		<ul class="pFile">
<%
	if (mail.M_ATTACHE == 'attache' || mail.M_ATTACHE == 'Y' ) {
		var attachList = [];
		if (mail.M_ATTACH_NAME)
			attachList = mail.M_ATTACH_NAME.split(';');
		_.each(attachList, function(attachment, index){
%>
			<li>
				<a href="#" class="file"><%= attachment %></a>
				<span class="menu"><a href="mails/<%= mail.M_IDX %>/attachments/<%= index %>"><%= i18n.save %></a></span>
			</li>
<%
		});
	}
%>
		</ul>
		<div class="addButton nb">
<%
	if (paginator.labelId) {
		var mboxModel = mboxCollection.findModel('MBOX_IDX', mail.MBOX_IDX);
		mbox = mboxModel.toJSON();
	}
	if (mbox.SHARED_MBOX_ID == 0) {
%>
			<button type="button" class="button_s" id="deleteBtn"><%= i18n.Delete %></button>
			<button type="button" class="button_s" id="reportBtn"><%= i18n.reportSpam %></button>
<%
	}
%>
			<button type="button" class="button_s" id="closeBtn"><%= i18n.close %></button>
		</div>
	</div>
</script>
<script type="text/template" id="mail-pagination-template">
<%
	var info = paginator.info();
	var url = function(page) {
		return '#' + paginator.getURL({page:page});
	};
%>

<% if (info.firstPage != info.currentPage) { %>
	<a title="<%= i18n.firstPage %>" class="pre_end" href="<%- url(info.firstPage) %>">
<% } else { %>
	<a title="<%= i18n.firstPage %>" class="pre_end_n" href="<%- url(info.firstPage) %>">
<% } %>
		<span class="mc-blind"><%= i18n.firstPage %></span>
	</a>

<% if (info.prevRangeOffset) { %>
	<a title="<%= i18n.previousPage %>" class="pre" href="<%- url(info.prevRangeOffset) %>">
<% } else { %>
	<a title="<%= i18n.previousPage %>" class="pre_n" href="<%- url(info.currentPage) %>">
<% } %>
		<span class="mc-blind"><%= i18n.previousPage %></span>
	</a>

	<span class="mc-paging_num">
<% _.each(info.pageSet, function(page) { %>
	<% if (info.currentPage == page) { %>
		<strong><%= page %></strong>
	<% } else { %>
		<a href="<%- url(page) %>"><%= page %></a>
	<% } %>
<% }); %>
	</span>

<% if (info.nextRangeOffset) { %>
	<a title="<%= i18n.nextPage %>" class="next" href="<%- url(info.nextRangeOffset) %>">
<% } else { %>
	<a title="<%= i18n.nextPage %>" class="next_n" href="<%- url(info.currentPage) %>">
<% } %>
		<span class="mc-blind"><%= i18n.nextPage %></span>
	</a>

<% if (info.lastPage != info.currentPage) { %>
	<a title="<%= i18n.lastPage %>" class="next_end" href="<%- url(info.lastPage) %>">
<% } else { %>
	<a title="<%= i18n.lastPage %>" class="next_end_n" href="<%- url(info.lastPage) %>">
<% } %>
		<span class="mc-blind"><%= i18n.lastPage %></span>
	</a>
</script>
<script type="text/template" id="select-categorized-mails-template">
	<ul class="selector">
		<li id="checkAllBtn"><a href="#"><%= i18n.selectAll %></a></li>
		<li id="readMailBtn"><a href="#"><%= i18n.selectRead %></a></li>
		<li id="unReadMail"><a href="#"><%= i18n.selectUnread %></a></li>
		<li id="markMailBtn"><a href="#"><%= i18n.selectStarred %></a></li>
		<li id="unMarkMail"><a href="#"><%= i18n.selectUnstarred %></a></li>
		<li id="unCheckAllBtn"><a href="#"><%= i18n.selectNone %></a></li>
	</ul>
</script>
<script type="text/template" id="move-to-mbox-template">
	<span class="mc-blind"><%= i18n.moveTo.selectMbox %></span>
	<!-- 이동할 메일함 LIST #move-to-mbox-item-template -->
	<ul id="moveBox_list" class="moveBox_list">
	</ul>
	<!-- //이동할 메일함 LIST-->
	<!-- 새 메일함 추가 -->
	<div class="mailBoxMove">
		<label class="mc-blind"><%= i18n.moveTo.inputMboxName %></label>
		<input type="text" placeholder="<%= i18n.moveTo.placeholder %>">
		<button type="button" class="button_s"><%= i18n.moveTo.newMbox %></button>
	</div>
	<!-- //새 메일함 추가 -->
	<!-- BTN AREA -->
	<div class="btn_area">
		<button id="execMoveMailBtn" type="button" class="button_s"><%= i18n.moveTo.move %></button>
		<button id="showMoveMailContBtn" type="button" class="button_s" onclick="$('#moveMailLayer').hide()"><%= i18n.moveTo.filter %></button>
	</div>
	<!-- //BTN AREA -->
</script>
<script type="text/template" id="move-to-mbox-item-template">
<%
	var mboxName = mbox.MBOX_NAME;
	switch (mbox.MBOX_TYPE) {
	case 1:
		mboxName = i18n.mbox.inbox;
		break;
	case 2:
		mboxName = i18n.mbox.sent;
		break;
	case 3:
		mboxName = i18n.mbox.trash;
		break;
	case 4:
		mboxName = i18n.mbox.drafts;
		break;
	case 5:
		mboxName = i18n.mbox.junk;
		break;
	case 6:
	default:
		mboxName = mbox.MBOX_NAME;
	}
%>
	<a href="#">
		<input type="checkbox" value="<%- mbox.MBOX_IDX %>"/>
		<label class="mbox-name"><%- mboxName %></label>
	</a>
</script>
<script type="text/template" id="select-labels-template">
	<span class="mc-blind"><%= i18n.selectLabel.text %></span>
	<ul class="moveBox_list label-list">
		<!-- 선택할 라벨 LIST #select-label-item-template -->
	</ul>
	<!-- 새 메일함 추가 -->
	<div class="mailBoxMove">
		<label class="mc-blind"><%= i18n.selectLabel.inputLabelName %></label>
		<input type="text" name="label-name" placeholder="<%= i18n.selectLabel.placeholder %>">
		<button type="button" class="button_s new-label"><%= i18n.selectLabel.newLabel %></button>
	</div>
	<!-- //새 메일함 추가 -->
	<!-- BTN AREA -->
	<div class="btn_area">
		<button type="button" class="button_s"><%= i18n.selectLabel.save %></button>
	</div>
	<!-- //BTN AREA -->
</script>
<script type="text/template" id="select-label-item-template">
	<a href="#">
		<input type="checkbox" value="<%- label.id %>"/>
		<label class="label-name"><%- label.name %></label>
	</a>
</script>
<script type="text/template" id="filter-mails-template">
<%
	var mboxName;
	switch (mbox.MBOX_TYPE) {
	case 1 :
		mboxName = i18n.mbox.inbox;
		break;
	case 2 :
		mboxName = i18n.mbox.sent;
		break;
	case 3 :
		mboxName = i18n.mbox.trash;
		break;
	case 4 :
		mboxName = i18n.mbox.drafts;
		break;
	case 5 :
		mboxName = i18n.mbox.junk;
		break;
	case 6 :
		mboxName = mbox.MBOX_NAME;
		break;
	}
%>
	<div class="hTitle"><%= i18n.moveTo.continueToFilter %></div>
	<div class="tList">
		<p class="cc"><%= i18n.moveTo.leadingContinueToFilter %><strong id="contMoveTxt"><%- mboxName %></strong><%= i18n.moveTo.trailingContinueToFilter %></p>
		<p class="cleanup_check">
			<input name="" type="checkbox" value="" id="check_cleanup_option">
			<label for="check_cleanup_option"><%= i18n.moveTo.filterFormerMails %></label>
		</p>
	</div>
	<div class="addButton nb">
		<button id="execMoveMailContBtn" type="button" class="b"><%= i18n.confirm %></button>
		<button type="button" onClick="ly_move_mail_continue.style.display='none'"><%= i18n.cancel %></button>
	</div>
</script>
<script type="text/template" id="more-actions-template">
	<ul class="selector">
<% if (!popup) { %>
		<li><a href="#" class="add-to-contacts"><%= i18n.moreActions.addToContacts %></a></li>
		<li><a href="#" class="search-for-this-sender"><%= i18n.moreActions.searchForThisSender %></a></li>
		<li class="border"><a href="#" class="show-as-converation"><%= i18n.moreActions.showAsConveration %></a></li>
<% } %>
		<li><a href="#" class="download-to-pc"><%= i18n.moreActions.downloadToPC %></a></li>
<% if (mbox.SHARED_MBOX_ID == 0) { %>
		<li><a href="#" class="view-header"><%= i18n.moreActions.showHeader %></a></li>
		<li><a href="#" class="view-original"><%= i18n.moreActions.showOriginal %></a></li>
<% } %>
	</ul>
</script>
<script type="text/template" id="mail-source-template">
	<div class="layer_content original">
		<div class="hTitle">
<%
	var title = (mime.viewMode == 0 ? i18n.viewMailMessage.showOrginalText : i18n.viewMailMessage.showHeader);
	var modeButton = (mime.viewMode == 0 ? i18n.viewMailMessage.showHeader : i18n.viewMailMessage.showOrginalText);
	var modeValue = (mime.viewMode == 0 ? 1 : 0);
%>
			<span id="titlemime"><%= title %></span>
			<a class="closelayer" title="<%= i18n.close%>" onClick="viewmime.style.display='none'"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%= i18n.close%>" class="lClose"></a>
		</div>
		<div class="origin" id="viewMimeContents">
			<textarea name="" cols="" rows="" class="originBox" readonly><%- mime.mailMessage %></textarea>
		</div>
		<div class="addButton nb">
			<span><button type="button" class="button view-mime-viewMode" value="<%= modeValue %>"><%= modeButton %></button></span>
			<span><button type="button" onClick="viewmime.style.display='none'" class="button"><%= i18n.cancel%></button></span>
		</div>
	</div>
</script>
<script type="text/template" id="add-contact-item-template">
	<td class="imp">
		<a href="#"><span class="spr importantOff contact-important" alt="<%= i18n.addContacts.important %>"></span></a>
	</td>
	<td>
		<div class="cell_wrap ovr contact-name-wrapper">
			<span class="contact-name"><%- contact.ADDRESS_NAME %></span>
			<a class="btn_edit edit-contact-name" onclick='' href="#"><img alt="<%= i18n.addContacts.edit %>" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" /></a>
		</div>
		<div class="cell_wrap input add-contact-name" style="display:none"><input type="text" style="width:80px" /></div>
	</td>
	<td><div class="cell_wrap"><%- contact.ADDRESS_EMAIL %></div></td>
	<td>
		<div class="cell_wrap ovr contact-group-name-wrapper" >
			<span class="contact-group-name"><%= i18n.addContacts.defaultGroup %></span>
			<a class="btn_edit edit-group-name" href="#"><img alt="<%= i18n.addContacts.edit %>" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" ></a></div>
		<div class="cell_wrap input add-contact-group-name" style="display:none"><input type="text" style="width:80px" /></div>
	</td>
</script>
<script type="text/template" id="add-contact-template">
	<div class="type_c">
		<div class="layer_content add_address">
			<div class="hTitle">
				<%= i18n.addContacts.title %>
				<a href="#" class="close-add-contact-view"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%=i18n.close%>" class="lClose"></a>
			</div>
			<div id="ly_address_msg_success" class="info1"><%= i18n.addContacts.successPhrase %></div>
			<!-- ADDRESS TABLE 리스트가 6개부터 스크롤 id="ly_address_list"에 class="has_scrl" 추가 -->
			<div id="ly_address_list" >
				<!-- LIST ITEM -->
				<table class="tbl_address">
					<colgroup>
						<col class="imp">
						<col class="name">
						<col class="email">
						<col class="group">
					</colgroup>
					<thead>
					<tr>
						<th><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%= i18n.addContacts.important %>" class="importantOn"></th>
						<th><%= i18n.addContacts.name %></th>
						<th><%= i18n.addContacts.mailAddr %></th>
						<th><%= i18n.addContacts.group %></th>
					</tr>
					</thead>
				</table>
				<!-- //LIST ITEM -->
				<!-- LIST -->
				<div class="address_scrl_area">
					<table class="tbl_address">
						<colgroup>
							<col class="imp">
							<col class="name">
							<col class="email">
							<col class="group">
						</colgroup>
						<tbody id="ly_address_table">
							<!-- #add-contact-item-template -->
						</tbody>
					</table>
				</div>
				<!--// LIST -->
			</div>
			<!-- //ADDRESS TABLE -->
			<div class="addButton nb">
				<span><button type="button" class="b close-add-contact-view"><%= i18n.confirm %></button></span>
			</div>
		</div>
	</div>
</script>
<script type="text/template" id="mail-view-template">
	<!-- 보안메일 열람정보 #secure-mail-info-template -->
	<div class="se_info"></div>
	<!-- 보안메일 열람내역 #secure-mail-readings-template -->
	<div class="ad_layer sp" style="display: none;"></div>
<% if (mail.M_FORWARDED) { %>
	<!-- 전달한 메일정보 표시 -->
	<table class="mc-relativeView">
		<tr>
			<td><a href="#" class="to"><%= i18n.forwardedMailPrefix %><%= $.format.date(mail.M_FORWARDED, 'yy-MM-dd (E) HH:mm') %><%= i18n.forwardedMailSuffix %></a></td>
		</tr>
	</table>
	<!-- //전달한 메일정보 표시 -->
<% } %>
<% if (mail.M_REPLYED) { %>
	<!-- 답장한 메일정보 표시 -->
	<table class="mc-relativeView">
		<tr>
			<td><a href="#" class="to"><%= i18n.repliedMailPrefix %><%= $.format.date(mail.M_REPLYED, 'yy-MM-dd (E) HH:mm') %><%= i18n.repliedMailSuffix %></a></td>
		</tr>
	</table>
	<!-- //답장한 메일정보 표시 -->
<% } %>
	<!-- VIEW HEAD -->
	<div class="mc-viewTit">
		<h4>
<%
	var importantClass;
	if (mail.M_PRIORITY && mail.M_PRIORITY == 1) {
		importantClass = 'icoImportantOn';
	} else {
		importantClass = 'icoImportantOff';
	}
%>
			<a href="#" class="<%= importantClass %>" id="vtCont" title="<%= mail.M_PRIORITY == 1 ? i18n.importantMail : i18n.normalMail %>"></a>
			<%- mail.M_TITLE || i18n.noSubject %>
<%
	if (!popup) {
		var mboxId = mail.MBOX_IDX;
		if (mbox && mbox.SHARED_MBOX_ID > 0) {
			mboxId = mbox.MBOX_IDX;
		}
%>
			<a href="#" title="<%= i18n.inNewWindow %>" class="newWin" onclick="window.open('popup/#mboxes/<%= mboxId %>/<%= urlRoot %>/<%= mail.M_IDX %>','','scrollbars=yes,width=900,height=680'); return false;"><%= i18n.inNewWindow %></a>
<%
	}
%>
		<span class="mail-labels">
			<!-- changeMailLabels -->
		</span>
		</h4>
<% if (mail.delayDateTime) { %>
 		<p class="reser_mark"><span class="reser_txt"><%= i18n.scheduled %></span><span class="ic_timer"><span class="blind">시계</span></span></p> 
<% } %>
		<p class="send_date">
		<%= mail.M_TIME ? $.format.date(mail.M_TIME, 'yy-MM-dd (E) HH:mm') : '' %></p>
		<dl>
			<dt class="first_child from">
				<button type="button" class="viewMoreOn" id="icoVm" onclick="$(this).parent().next().nextAll().toggle();$(this).toggleClass(function() { return $(this).is('.viewMoreOn') ? 'viewMoreOff' : 'viewMoreOn'; });"></button>
				<%= i18n.from %>
			</dt>
			<dd class="from">:
				<a href="#" class="<%= mail.importantSender ? 'icoImportantOn' : 'icoImportantOff' %> sender-important" title="<%= i18n.importantAddress %>"></a>
				<a href="#compose?to=<%= encodeURIComponent(mail.M_SENDER) %>"><%- mail.M_SENDER %></a>

				<span class="mLink">

<%
	if (popup) { 
%>
					<a href="#" class="refuse"><%= i18n.blockAddress %></a>
<%	} else { %>
					<a href="#" class="addAdrs"><%= i18n.addToContacts %></a> | <a href="#" class="refuse"><%= i18n.blockAddress %></a>
<%
	}
%>
				</span>
<%
	var ip = i18n.geoIp.noInformation;
	var countryName = '';
	var countryCode = '';
	if (mail.geoIps.length > 0) {
		for (var i = 0; i < mail.geoIps.length; i++) {
			ip = mail.geoIps[i].ip;
			countryName = mail.geoIps[i].countryName;
			countryCode = mail.geoIps[i].countryCode;
			if (countryName && countryName.trim().length > 0)
				break;
		}
		countryName = countryName && countryName.trim().length > 0 ? countryName : i18n.geoIp.noInformation;
	}
%>
				<span class="info_ip">
					<strong>IP : <%= ip %></strong><em class="naflag <%= countryCode %>" title="<%= countryName %>"></em>
<%
	if (mail.geoIps.length > 1) {
%>
					<a href="#" class="more-geo-ip"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" title="추가보기" class="ic_plus"></a>
<%
	}
%>
				</span>
			</dd>
 			<dt id="viewMore" class="to"><%= i18n.to %></dt>
			<dd id="viewMore2" class="to">:
<%
	var rcptTo = [];
	try {
		var addrs = InternetAddress.parseHeader(mail.M_TO, false);
		for (var i = 0; i < addrs.length; i++) {
			if (addrs[i].getPersonal())
				rcptTo[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
			else
				rcptTo[i] = addrs[i].getAddress();
		}
	} catch (error) {
		rcptTo[0] = mail.M_TO;
	}
	for (var i = 0; i < rcptTo.length; i++) {
%>
				<a href="#compose?to=<%= encodeURIComponent(rcptTo[i]) %>" title="<%- rcptTo[i] %>"><%- rcptTo[i] %></a><%= (rcptTo.length > 1 && i < rcptTo.length - 1) ? ',' : '' %>
<%
	} // end for
%>
			</dd>
<%
	if (mail.M_CC) {
		var rcptCc = [];
		try {
			var addrs = InternetAddress.parseHeader(mail.M_CC, false);
			for (var i = 0; i < addrs.length; i++) {
				if (addrs[i].getPersonal())
					rcptCc[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
				else
					rcptCc[i] = addrs[i].getAddress();
			}
		} catch (error) {
			rcptCc[0] = mail.M_CC;
		}
%>
			<dt id="viewMore" class="cc"><%= i18n.cc %></dt>
			<dd id="viewMore2" class="cc">:
<%		for (var i = 0; i < rcptCc.length; i++) { %>
				<a href="#compose?to=<%= encodeURIComponent(rcptCc[i]) %>" title="<%- rcptCc[i] %>"><%- rcptCc[i] %></a><%= (rcptCc.length > 1 && i < rcptCc.length - 1) ? ',' : '' %>
<%		} // end for %>
			</dd>
<%
	} // end if (mail.M_CC)

	if (mail.M_BCC && mbox.MBOX_TYPE === 2) {
		var rcptBcc = [];
		try {
			var addrs = InternetAddress.parseHeader(mail.M_BCC, false);
			for (var i = 0; i < addrs.length; i++) {
				if (addrs[i].getPersonal())
					rcptBcc[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
				else
					rcptBcc[i] = addrs[i].getAddress();
			}
		} catch (error) {
			rcptBcc[0] = mail.M_BCC;
		}
%>
			<dt id="viewMore"><%= i18n.bcc %></dt>
			<dd id="viewMore2">:
<%		for (var i = 0; i < rcptBcc.length; i++) { %>
				<a href="#compose?to=<%= encodeURIComponent(rcptBcc[i]) %>" title="<%- rcptBcc[i] %>"><%- rcptBcc[i] %></a><%= (rcptBcc.length > 1 && i < rcptBcc.length - 1) ? ',' : '' %>
<%		} // end for %>
			</dd>
<%
	} // end if (mail.M_BCC)
%>
		</dl>
	</div>
<%
	if (mbox.MBOX_TYPE === 5 || user.BLOCK_EXTERNAL_CONTENT) {
		var parameters = paginator.getParameters();
		var phraseMsg = i18n.blockExternalContentPhrase;
		var msg = i18n.allowExternalContent;
		if (paginator.params && paginator.params.blockExternalContent == 'false') {
			phraseMsg = i18n.allowExternalContentPhrase;
			msg = i18n.blockExternalContent;
		} else {
			parameters += '&blockExternalContent=false';
		}
		var url = '#mboxes/' + mbox.MBOX_IDX + '/mails/' + mail.M_IDX + parameters;
%>
		<div class="msg_caution">
			<div class="noImgs <%= mbox.MBOX_TYPE != 5 ? 'settings' : '' %>" style="display:">
			<em class="ico_caution"><%= i18n.maliciousAttachmentsWarning %></em>
			<%= phraseMsg %>
			<a href="<%- url %>"><%= msg %></a>
<%
			if (mbox.MBOX_TYPE != 5) {
%>
				|
				<a href="#" class="viewing-settings"><%= i18n.changeViewingSettings %></a>
<%
			}
%>
			</div>
		</div>
<%
	}
%>
	<!-- //VIEW HEAD -->
<%
	if (mail.M_INJURIOUSE && mail.M_INJURIOUSE == 'Y') {
%>
	<div class="msg_caution">
		<div class="noImgs">
			<em class="ico_caution"><%= i18n.maliciousAttachmentsWarning %></em>
			<%= i18n.maliciousForgeryWarningPhrase %>
			<a href="#" class="more"><%= i18n.showMore %></a>
		</div>
	</div>
<%
	}
%>
<%
if (mail.attachments && mail.attachments.length > 0) {
	var numOfAttachments = mail.attachments.length;
	var sizeOfAttachments = 0;
	_.each(mail.attachments, function(attachment) {
		sizeOfAttachments += attachment.size;
	});
	var allDownloadLink = urlRoot + '/' + mail.M_IDX + '/attachments/all';
	if (mail.subMailIndex)
		allDownloadLink = urlRoot + '/' + mail.M_IDX + '/attachments/all/' + mail.subMailIndex;
%>
	<!-- 일반 첨부파일 영역 -->
	<div class="mc-attFile_area">
		<h5>
			<%= i18n.attachments %>
			<span class="num">
				<em><%= i18n.numOfAttachmentsPrefix %><%= numOfAttachments %><%= i18n.numOfAttachmentsSuffix %></em>
				(<%= numeral(sizeOfAttachments).format('0b') %>)
			</span>
			<a href="<%- allDownloadLink %>"><%= i18n.downloadAllAttachments %></a>
		</h5>
		<p class="virus">
			<!-- <%= i18n.attachmentVirusScanning %><span class="bar">|</span> -->
			<!-- [D] class=close 접기/ class=open 펼치기 -->
			<button type="button" class="close" onclick="$(this).closest('.mc-attFile_area').find('div.file_list').toggle(); $(this).empty().is('.close') ? $(this).text('<%- i18n.expand %>')[0].className = 'open' : $(this).text('<%- i18n.collapse %>')[0].className = 'close'; $(this).append($(document.createElement('img')).attr('src', '<%= popup ? '../img/b.gif' : 'img/b.gif' %>'));"><%= i18n.collapse %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></button>
		</p>
	<% if (mail.M_INJURIOUSE && mail.M_INJURIOUSE == 'Y') { %>
	<div class="msg_caution" style="margin:15px 0px">
		<div class="noImgs">
			<em class="ico_caution"><%= i18n.maliciousAttachmentsWarning %></em>
			<%= i18n.maliciousAttachmentsWarningPhrase %>
		</div>
	</div>
	<% } %>
		<!-- 첨부파일 리스트 -->
		<div class="file_list">
			<ul>
	<%
		for (var i = 0; i < mail.attachments.length; i++) {
			var downloadLink = urlRoot + '/' + mail.M_IDX + '/attachments/' + mail.attachments[i].num;
			if (mail.subMailIndex)
				downloadLink = urlRoot + '/' + mail.M_IDX + '/attachments/' + mail.subMailIndex + '.' + mail.attachments[i].num;
			if ( mail.jtnef ) {
				downloadLink = urlRoot + '/' + mail.M_IDX + '/jtnef/attachments/'+ mail.jtnefindex + '.' + mail.attachments[i].num;
			}
	%>
				<li>
					<span class="el_ct">
	<%
					if (mail.attachments[i].type == 'message/rfc822') {
						var subMailNum = mail.attachments[i].num;
						if (mail.subMailIndex)
							subMailNum = mail.subMailIndex + '.' + subMailNum;
						if (popup) {
	%>
							<a href="#mboxes/<%= mbox.MBOX_IDX %>/mails/<%= mail.M_IDX %>/sub-mails/<%= subMailNum %>"><%- mail.attachments[i].name %></a>&nbsp;
	<%
						} else {
	%>
							<a href="#" onclick="window.open('popup/#mboxes/<%= mbox.MBOX_IDX %>/mails/<%= mail.M_IDX %>/sub-mails/<%= subMailNum %>','','scrollbars=yes,width=900,height=680'); return false;"><%- mail.attachments[i].name %></a>&nbsp;
	<%
						}
					} else {
	%>
						<a href="<%- downloadLink %>"><%- mail.attachments[i].name %></a>&nbsp;
	<%
					}
	%>
						<span class="st"><%= numeral(mail.attachments[i].size).format('0b') %></span>
						<% if ( "winmail.dat" == mail.attachments[i].name ) {
							var jtnefViewLink = 'jtnef/' + mail.M_IDX + '/' + mail.attachments[i].num;%>
							<a class="mc-tnef" href="<%- jtnefViewLink%>">열기</a>
						<% } %>
					</span>
					<a href="<%- downloadLink %>" class="btn_savepc" title="<%= i18n.downloadAttachment %>"><span class="mc-blind"><%= i18n.downloadAttachment %></span></a>
	<%
				if (!mail.subMailIndex)
	%>
					<a href="#" class="btn_del" data-mail-id="<%- mail.M_IDX %>" data-attachment-index="<%- mail.attachments[i].num %>"><span class="mc-blind"><%= i18n.deleteAttachment %></span></a>
				</li>
	<% } %>
			</ul>
		</div>
		<!-- //첨부파일 리스트 -->
	</div>
	<!-- //일반 첨부파일 영역 -->
<%
} // end if (mail.attachments && mail.attachments.length > 0)
%>
	<!-- READ FRAME -->
	<div class="mc-readFrame">
		<div style="width:100%; max-width:980px;">
			<!-- 내용 -->
			<div style="font-family:Gulim;font-size:10pt" class="mc-viewFrame">
				<!-- 기본내용 뿌려짐 -->
				<%= mail.M_CONTENT %>
				<p>&nbsp;</p>
				<!-- // 기본내용 뿌려짐 -->
<%
	if (!mail.mails)
		mail.mails = [];
	for (var subMailNum = 0; subMailNum < mail.mails.length; subMailNum++) {
		var subMail = mail.mails[subMailNum];
%>
				<!-- 전달된 편지 Forwarded Message -->
				<p style="padding:0;font-family:Gulim,AppleGothic,sans-serif;font-size:10pt;">
					<span style="font-weight:bold">----- Forwarded Message -----</span><br>
					<b>From:</b> <%- subMail.M_SENDER %><br>
					<b>To:</b> <%- subMail.M_TO %><br>
				<% if (subMail.M_CC) { %>
					<b>Cc:</b> <%- subMail.M_CC %><br>
				<% } %>
					<b>Sent:</b> <%= $.format.date(mail.M_TIME, 'yyyy-MM-dd (E) HH:mm') %><br>
					<b>Subject:</b> <%- subMail.M_TITLE %><br><br>
				</p>
<%
		if (subMail.attachments && subMail.attachments.length > 0) {
			var numOfAttachments = subMail.attachments.length;
			var sizeOfAttachments = 0;
			_.each(subMail.attachments, function(attachment) {
				sizeOfAttachments += attachment.size;
			});
%>
				<!-- 전달된 편지 첨부파일 영역 -->
				<div class="mc-attFile_area _clearfix">
					<h5>
						<%= i18n.attachments %>
						<span class="num">
							<em><%= i18n.numOfAttachmentsPrefix %><%= numOfAttachments %><%= i18n.numOfAttachmentsSuffix %></em>
							(<%= numeral(sizeOfAttachments).format('0b') %>)
						</span>
						<a href="<%= urlRoot %>/<%- mail.M_IDX %>/attachments/all/<%= subMailNum %>"><%= i18n.downloadAllAttachments %></a>
					</h5>
					<p class="virus">
						<!-- <%= i18n.attachmentVirusScanning %><span class="bar">|</span> -->
						<!-- [D] class=close 접기/ class=open 펼치기 -->
						<button type="button" class="close" onclick="$(this).parent().next('div.file_list').toggle(); $(this).empty().is('.close') ? $(this).text('<%- i18n.expand %>')[0].className = 'open' : $(this).text('<%- i18n.collapse %>')[0].className = 'close'; $(this).append($(document.createElement('img')).attr('src', '<%= popup ? '../img/b.gif' : 'img/b.gif' %>'));"><%= i18n.collapse %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></button>
					</p>
			<% if (subMail.M_INJURIOUSE && subMail.M_INJURIOUSE == 'Y') { %>
					<div class="noImgs" style="display:">
						<span class="ico_caution"><%= i18n.maliciousAttachmentsWarning %></span>
						<%= i18n.maliciousAttachmentsWarningPhrase %>
					</div>
			<% } %>
					<!-- 전달된 편지 첨부파일 리스트 -->
					<div class="file_list" id="attFileList">
						<ul>
			<% for (var idx = 0; idx < subMail.attachments.length; idx++) { %>
							<li>
								<span class="el_ct">
									<a href="<%= urlRoot %>/<%- mail.M_IDX %>/attachments/<%- subMailNum %>.<%- subMail.attachments[idx].num %>"><%- subMail.attachments[idx].name %></a>&nbsp;
									<span class="st"><%= numeral(subMail.attachments[idx].size).format('0b') %></span>
								</span>
								<a href="<%= urlRoot %>/<%- mail.M_IDX %>/attachments/<%- subMailNum %>.<%- subMail.attachments[idx].num %>" class="btn_savepc"><span class="mc-blind"><%= i18n.downloadAttachment %></span></a>
								<a href="#" class="btn_del" data-mail-id="<%- mail.M_IDX %>" data-attachment-index="<%- subMailNum %>.<%- subMail.attachments[idx].num %>"><span class="mc-blind"><%= i18n.deleteAttachment %></span></a>
							</li>
			<% } %>
						</ul>
					</div>
					<!-- //전달된 편지 첨부파일 리스트 -->
				</div>
				<!-- //전달된 편지 첨부파일 영역 -->
<%
		} // end if (subMail.attachments && subMail.attachments.length > 0)
%>
				<div style="width:100%; max-width:980px;">
					<div style="font-family:Gulim;font-size:10pt">
						<%= subMail.M_CONTENT %>
						<p>&nbsp;</p>
					</div>
				</div>
				<!-- //전달된 편지 Forwarded Message -->
<%
	} // for (var subMailNum = 0; subMailNum < mail.mails.length; subMailNum++)
%>
			</div>
		</div>
	</div>
	<!-- //READ FRAME-->
<%
var numOfAttachedImages = 0;
_.each(mail.attachments, function(attachment) {
	if (attachment.type.indexOf('image/') != -1) {
		numOfAttachedImages += 1;
	}
});
for (var i = 0; i < mail.mails.length; i++) {
	var subMail = mail.mails[i];
	_.each(subMail.attachments, function(attachment) {
		if (attachment.type.indexOf('image/') != -1) {
			numOfAttachedImages += 1;
		}
	});
}

var iterateAttachedImages = function() {
	var mailNum = -1, attachmentNum = 0;
	return function() {
		if (mailNum == -1) {
			for (var i = attachmentNum; i < mail.attachments.length; i++) {
				var attachment = mail.attachments[i];
				attachmentNum = i + 1;
				if (attachment.type.indexOf('image/') != -1) {
					return {
						index : attachment.num,
						name : attachment.name,
					};
				}
			}
			mailNum = 0;
			attachmentNum = 0;
		}
		for (var i = mailNum; i < mail.mails.length; i++) {
			var subMail = mail.mails[i];
			for (var idx = attachmentNum; idx < subMail.attachments.length; idx++) {
				var attachment = subMail.attachments[idx];
				attachmentNum = idx + 1;
				if (attachment.type.indexOf('image/') != -1) {
					var index = mailNum + '.' + attachment.num;
					return {
						index : index,
						name : attachment.name,
					};
				}
			}
			mailNum = mailNum + 1;
			attachmentNum = 0;
		}
		return null;
	};
};

if (numOfAttachedImages > 0 && !mail.subMailIndex && !mail.jtnef) {
%>
	<!-- IMAGES PREVIEW AREA -->
	<div class="mc-imgPrev_area">
		<h5>
			<%= i18n.attachedImagesPreview %> <span>(<em><%= numOfAttachedImages %></em><%= i18n.attachedImagesSuffix %>)</span>
		</h5>
		<table class="mc-list_attImg">
			<colgroup>
				<col/>
				<col width="50"/>
				<col/>
				<col width="50"/>
				<col/>
			</colgroup>
			<tbody>
<%
	var nextAttachedImage = iterateAttachedImages();
	var remainder = 0;
	for (var i = 0; i < numOfAttachedImages; i++) {
		var attachedImage = nextAttachedImage();
		if (!attachedImage) {
			break;
		}
		remainder = i % 3;
		if (remainder == 0) {
%>
				<tr>
					<td>
						<div class="img_area">
							<div class="vert_align">
								<table>
									<tr>
										<td>
											<a href="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>" target="_blank"><img style="max-height:200px;max-width:200px;" alt="첨부 파일 이미지 미리보기" src="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>"></a>
										</td>
									</tr>
								</table>
							</div>
							<div class="img_tit">
								<a href="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/<%= attachedImage.index %>"><%= attachedImage.name %></a>
							</div>
						</div>
					</td>
					<td></td>
<%
		} else if (remainder == 1) {
%>
					<td>
						<div class="img_area">
							<div class="vert_align">
								<table>
									<tr>
										<td>
											<a href="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>" target="_blank"><img style="max-height:200px;max-width:200px;" alt="첨부 파일 이미지 미리보기" src="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>"></a>
										</td>
									</tr>
								</table>
							</div>
							<div class="img_tit">
								<a href="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/<%= attachedImage.index %>"><%= attachedImage.name %></a>
							</div>
						</div>
					</td>
					<td></td>
<%
		} else if (remainder == 2) {
%>
					<td>
						<div class="img_area">
							<div class="vert_align">
								<table>
									<tr>
										<td>
											<a href="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>" target="_blank"><img style="max-height:200px;max-width:200px;" alt="첨부 파일 이미지 미리보기" src="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>"></a>
										</td>
									</tr>
								</table>
							</div>
							<div class="img_tit">
								<a href="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/<%= attachedImage.index %>"><%= attachedImage.name %></a>
							</div>
						</div>
					</td>
				</tr>
<%
		}
	} // end for (var i = 0; i < numOfAttachedImages; i++)

	if (remainder < 2) {
%>
				</tr>
<%
	} // end if (remainder < 2)
%>
			</tbody>
		</table>
	</div>
	<!-- //IMAGES PREVIEW AREA -->
<%
} // end if (numOfAttachedImages > 0)
%>
	<!-- GO TO TOP -->
	<div class="mc-toTop">
		<a href="#"><%= i18n.backToTop %></a>
	</div>
	<!-- //GO TO TOP -->
</script>
<script type="text/template" id="empty-mail-view-template">
	<strong><%= i18n.emptyMailView.header %></strong>
	<ul>
		<li><%= i18n.emptyMailView.viewingSettings %> <a class="empty-mail-settings-split" href="#"><%= i18n.emptyMailView.settings %></a></li>
		<li><%= i18n.emptyMailView.deleteLaterSettings %> <a class="empty-mail-settings-after-deleting" href="#"><%= i18n.emptyMailView.settings %></a></li>
	</ul>
</script>
<script type="text/template" id="thread-mails-template">
<!-- 주고받은 메일 -->
<div class="mc-relMails">
	<div class="mc-relBox">
		<span class="tit"><%= i18n.conversations %></span>
		<strong>2</strong>
		<a href="#"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="help" alt="<%= i18n.help %>"></a>
		<!-- 주고받은 메일 리스트 -->
		<div class="mc-relativeList">
			<ul class="mc-mailList mc-readUnder">
				<li>
					<div class="mc-mTitle">
						<div class="mc-name">
							<a href="#">garnet27</a>
						</div>
						<div class="mc-subject">
							<a href="#"><span class="mc-folderName">[naravision]</span>나라비전 세미나 시간표입니다.</a>
							<a href="#" title="<%= i18n.viewInNewWindow %>" class="newWin"></a>
						</div>
					</div>
					<ul class="mc-mInfo">
						<li class="mc-read"><span class="icoRead"></span></li>
						<li class="mc-file"><span class="icoFile"></span></li>
						<li class="mc-date" x-ms-format-detection="none"><%= mail.M_TIME ? $.format.date(mail.M_TIME, 'yy-MM-dd HH:mm') : '' %></li>
					</ul>
				</li>
			</ul>
		</div>
		<!-- //주고받은 메일 리스트 -->
	</div>
</div>
<!-- //주고받은 메일 -->
</script>
<script type="text/template" id="prev-next-mails-template">
<div id="prevNextList">
	<ul class="mc-mailList mc-readUnder">
<%
	if (mail.prevMail) {
		var prevMail = mail.prevMail;
%>
		<li>
			<div class="mc-mTitle">
				<div class="mc-name">
					<a href="#compose?to=<%= encodeURIComponent(prevMail.M_SENDER) %>" title="<%- prevMail.M_SENDER %>">
						<%- prevMail.M_SENDERNM ? prevMail.M_SENDERNM : prevMail.M_SENDER %>
					</a>
				</div>
				<div class="mc-subject">
<%
	if (prevMail.MALICIOUS_ID) {
%>
					<span title="<%= i18n.blockReading %>" class="icoBlock"></span>
<%
	}
%>
					<a href="<%= prevMailHash %>" data-mail-id="<%= prevMail.M_IDX %>"><%- prevMail.M_TITLE %></a>
					<a href="#" data-mail-id="<%= prevMail.M_IDX %>" onclick="window.open('<%= popup ? '../' : '' %>popup/<%= prevMailHash %>','','scrollbars=yes,width=900,height=680'); return false;" title="<%= i18n.viewInNewWindow %>" class="newWin"></a>
				</div>
			</div>
			<ul class="mc-mInfo">
				<li><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="mPrev"></li>
				<li class="mc-read">
				<% if (prevMail.M_ISREAD === 'F') { %>
					<span title="<%= i18n.forwardedMail %>" class="icoRead fw"></span>
				<% } else if (prevMail.M_ISREAD === 'R') { %>
					<span title="<%= i18n.repliedMail %>" class="icoRead re"></span>
				<% } else if (prevMail.M_ISREAD === 'P') { %>
					<span title="<%= i18n.importedMail %>" class="icoRead noext1"></span>
				<% } else if (prevMail.M_ISREAD === 'O') { %>
					<span title="<%= i18n.importedMail %>" class="icoRead yesext1"></span>
				<% } else if (prevMail.M_ISREAD === 'Y' || prevMail.M_ISREAD === 'A') { %>
					<span title="<%= i18n.readMail %>" class="icoRead yes"></span>
				<% } else { %>
					<span title="<%= i18n.unreadMail %>" class="icoRead no"></span>
				<% } %>
				</li>
				<li class="mc-file">
				<% if (prevMail.M_ATTACHE === 'attache' || prevMail.M_ATTACHE == 'Y') { %>
					<span title="<%= i18n.attachmentsInMail %>" class="icoFile"></span>
				<% } else { %>
					<span title="" class=""></span>
				<% } %>
				</li>
				<li class="mc-date" x-ms-format-detection="none">
					<%= $.format.date(prevMail.M_TIME, 'yy-MM-dd HH:mm') %>
				</li>
			</ul>
		</li>
<%
	}
	if (mail.nextMail) {
		var nextMail = mail.nextMail;
%>
		<li>
			<div class="mc-mTitle">
				<div class="mc-name">
					<a href="#compose?to=<%= encodeURIComponent(nextMail.M_SENDER) %>" title="<%- nextMail.M_SENDER %>">
						<%- nextMail.M_SENDERNM ? nextMail.M_SENDERNM : nextMail.M_SENDER %>
					</a>
				</div>
				<div class="mc-subject">
<%
	if (nextMail.MALICIOUS_ID) {
%>
					<span title="<%= i18n.blockReading %>" class="icoBlock"></span>
<%
	}
%>
					<a href="<%= nextMailHash %>" data-mail-id="<%= nextMail.M_IDX %>"><%- nextMail.M_TITLE %></a>
					<a href="#" data-mail-id="<%= nextMail.M_IDX %>" onclick="window.open('<%= popup ? '../' : '' %>popup/<%= nextMailHash %>','','scrollbars=yes,width=900,height=680'); return false;" title="<%= i18n.viewInNewWindow %>" class="newWin"></a>
				</div>
			</div>
			<ul class="mc-mInfo">
				<li><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="mNext"></li>
				<li class="mc-read">
				<% if (nextMail.M_ISREAD === 'F') { %>
					<span title="<%= i18n.forwardedMail %>" class="icoRead fw"></span>
				<% } else if (nextMail.M_ISREAD === 'R') { %>
					<span title="<%= i18n.repliedMail %>" class="icoRead re"></span>
				<% } else if (nextMail.M_ISREAD === 'P') { %>
					<span title="<%= i18n.importedMail %>" class="icoRead noext1"></span>
				<% } else if (nextMail.M_ISREAD === 'O') { %>
					<span title="<%= i18n.importedMail %>" class="icoRead yesext1"></span>
				<% } else if (nextMail.M_ISREAD === 'Y' || nextMail.M_ISREAD === 'A') { %>
					<span title="<%= i18n.readMail %>" class="icoRead yes"></span>
				<% } else { %>
					<span title="<%= i18n.unreadMail %>" class="icoRead no"></span>
				<% } %>
				</li>
				<li class="mc-file">
				<% if (nextMail.M_ATTACHE === 'attache' || nextMail.M_ATTACHE == 'Y') { %>
					<span title="<%= i18n.attachmentsInMail %>" class="icoFile"></span>
				<% } else { %>
					<span title="" class=""></span>
				<% } %>
				</li>
				<li class="mc-date" x-ms-format-detection="none">
					<%= $.format.date(nextMail.M_TIME, 'yy-MM-dd HH:mm') %>
				</li>
			</ul>
		</li>
<%
	}
%>
	</ul>
</div>
</script>
<script type="text/template" id="blob-attachments-template">
<%
	var dateAfterDays = function(days) {
		var now = Date.now ? Date.now() : new Date().getTime();
		var after = now + days * 24 * 60 * 60 * 1000;
		var date = $.format.date(new Date(after), 'yy/MM/dd');
		return date;
	};
%>
	<table width="100%" border="0" cellpadding="0" style="table-layout:fixed">
		<tr>
			<td>
				<img src="img/static/ico_att_clip.gif" width="7" height="10" alt="" />
				<strong><%= i18n.blobAttachments %></strong>&nbsp;
				<span style="color: #38b601;">
					<%= i18n.numOfAttachmentsPrefix %>
					<%= items.length %>
					<%= i18n.numOfAttachmentsSuffix %>
				</span> (<xsl:value-of select="@total-size" />)
			</td>
			<td align="right" style="color:#666;letter-spacing:-1px;font-size:11px">
				<%= i18n.downloadBlobAttachments.leadingPhrase %>
				<span style="color:#ff3300;letter-spacing:0px">
					<xsl:value-of select="@validity-days" /><%= i18n.downloadBlobAttachments.validityDays %>
				</span>
				<%= i18n.downloadBlobAttachments.middlingPhrase %>
				<span style="color:#ff3300;letter-spacing:0px">
					<xsl:value-of select="@downloads" /><%= i18n.downloadBlobAttachments.downloadTimes %>
				</span>
				<%= i18n.downloadBlobAttachments.trailingPhrase %>
			</td>
		</tr>
		<tr>
			<td style="height:5px;font-size:0px"></td>
		</tr>
	</table>
	<table width="100%" border="0" cellpadding="0" style="table-layout:fixed">
		<tr>
			<td>
				<table width="100%" border="0" cellpadding="0" style="border:1px solid #ededee;table-layout: fixed;">
<%
	for (var i = 0; i < $items.length; i++) {
		var name = $items.eq(i).data('attachment-name');
		var size = $items.eq(i).data('attachment-size');
%>
					<tr>
						<td width="20" align="right" valign="middle">
							<a href="#" onclick="return false;">
								<img src="img/static/btn_savepc.gif" width="17" height="17" style="vertical-align: top;" alt="<%= i18n.saveToPC %>" border="0"/>
							</a>
						</td>
						<!--
						<td width="20" align="right" valign="middle">
							<a href="#" onclick="return false;">
								<img src="img/static/btn_savendr.gif" width="17" height="17" style="vertical-align: top;" alt="<%= i18n.saveToWebhard %>" border="0"/>
							</a>
						</td>
						-->
						<td style="width:auto;line-height:17px;padding:3px 7px">
							<a href="#" onclick="return false;" style="width:100%;color:#333;overflow:hidden;font-size:12px;text-decoration:none;display:block;white-space:nowrap;text-overflow:ellipsis;">
								<%= name %>
								<span style="color:#999;font-family:Tahoma;font-size:11px">
									<%= numeral(file.size).format('0[.]00b') %>
								</span>
							</a>
						</td>
					</tr>
				</table>
			</td>
		</tr>
<%
	} // end for
%>
		<tr>
			<td style="height:26px;letter-spacing:-1px;font-size:11px;">
				<%= i18n.downloadBlobAttachments.downloadPeriod %>
				<span style="color: #ff3300;letter-spacing:0px;">
					<%= dateAfterDays(0) %> ~ <%= dateAfterDays(7) %>
				</span>
			</td>
		</tr>
	</table>
	<p style="margin:7px 0 20px;padding:0;height:1px; background-color:#ececec;display:block"></p>
</script>
<script type="text/template" id="compose-mail-template">
	<form name="mail_write_form">
		<fieldset>
			<legend><%= i18n.compose %></legend>
			<div class="mc-divWrite">
				<!-- MAIL WRITE ITEM -->
				<table class="mc-mailWriteItem" summary="<%= i18n.compose %>">
					<colgroup>
						<col class="item">
						<col class="opt">
					</colgroup>
					<tbody>
<%
	var composeForMe = /^#compose-for-me/.test(location.hash) ? true : false;
	var forwardForMe = /^#forward-for-me/.test(location.hash) ? true : false;
	var individual = user.INDIVIDUAL_SEND == 1 ? 'checked="checked"' : '';
	if (!composeForMe && !forwardForMe) {
%>
						<tr class="sender-settings" style="display:none;">
							<th>
								<span class="mc-raw_label wd_at"><a href="#"><%= i18n.sender %></a></span>
							</th> 
							<td> 
								<div class="mc-sender">  
									<div class="mc-sguide">
										<input class="mInput" name="M_SENDERNM" style="width: 99%;" type="text" value="<%- user.DISPLAY_NAME || user.USERS_NAME %>">
									</div> 
									<select name="M_SENDER"> 
									</select> 
								</div>
							</td> 
						</tr>
						<tr>
							<th>
								<span class="mc-raw_label">
									<a href="#" class="select-contacts"><%= i18n.to %></a>
								</span>
								<span class="mc-private">
									<input type="checkbox" name="individual-mails" id="send-individually" class="mCheck" <%= individual %>>
									<label for="send-individually"><%= i18n.individually %></label>
								</span>
								<!--
								<input type="checkbox" id="composeForMe" class="mCheck"><label for="composeForMe">내게쓰기</label>
								-->
							</th>
							<td>
								<div id="mailTo" class="mc-mInput_wrap" style="overflow: hidden;">
<% if(user.sso && user.USERS_SCHOOLING == 'E'){ %>
									<div class="btn_majoraddr">
										<a href="#" class="utx_btn org"><span class="utx_inrbtn"><%= i18n.orgs %></span></a>
									</div>
<% } %>
									<div class="btn_majoraddr">
										<a href="#" class="utx_btn address"><span class="utx_inrbtn"><%= i18n.contacts %></span></a>
									</div>
									<!-- [D] 내게쓰기 활성화될때 클래스에 mInput_disable 추가, 주소입력난이 선택된 경우 mInput_over 추가 -->
									<div class="mc-mInput_holder mInput_over" id="toDiv">
										<input type="text" name="M_TO">
										<!-- [D] 중요주소/최근주소 레이어가 열리는 경우 on 클래스 추가 -->
										<div class="btn_recentaddr">
											<a href="#" class="" data-rcpt-type="to" tltle="<%= i18n.recentAndImportantContacts %>"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%= i18n.recentAndImportantContacts %>"></a>
										</div>
									</div>
								</div>
							</td>
						</tr>
						<tr>
							<th>
								<span class="mc-raw_label"><a href="#"><%= i18n.cc %></a></span>
								<a href="#" class="bcc-recipients-toggle" title="<%= i18n.showBccRecipients %>">
									<img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="sClose" alt="<%= i18n.showBccRecipients %>">
								</a>
							</th>
							<td>
								<div id="mailCc" class="mc-mInput_wrap">
<% if(user.sso && user.USERS_SCHOOLING == 'E'){ %>
									<div class="btn_majoraddr">
										<a href="#" class="utx_btn org"><span class="utx_inrbtn"><%= i18n.orgs %></span></a>
									</div>
<% } %>
									<div class="btn_majoraddr">
										<a href="#" class="utx_btn address"><span class="utx_inrbtn"><%= i18n.contacts %></span></a>
									</div>
									<div class="mc-mInput_holder" id="ccDiv">
										<input type="text" name="M_CC">
										<div class="btn_recentaddr">
											<a href="#" class="" data-rcpt-type="cc" tltle="<%= i18n.recentAndImportantContacts %>"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%= i18n.recentAndImportantContacts %>"></a>
										</div>
									</div>
									<textarea name="cc" id="cc" style="display: none;" autocomplete="off"></textarea>
								</div>
							</td>
						</tr>
						<tr class="bcc-recipients-field" style="display:none;">
							<th>
								<span class="mc-raw_label"><a href="#"><%= i18n.bcc %></a></span>
							</th>
							<td>
								<div id="mailBcc" class="mc-mInput_wrap">
<% if(user.sso && user.USERS_SCHOOLING == 'E'){ %>
									<div class="btn_majoraddr">
										<a href="#" class="utx_btn org"><span class="utx_inrbtn"><%= i18n.orgs %></span></a>
									</div>
<% } %>
									<div class="btn_majoraddr">
										<a href="#" class="utx_btn address"><span class="utx_inrbtn"><%= i18n.contacts %></span></a>
									</div>
									<div class="mc-mInput_holder" id="bccDiv">
										<input type="text" name="M_BCC">
										<div class="btn_recentaddr">
											<a href="#" class="" data-rcpt-type="bcc" tltle="<%= i18n.recentAndImportantContacts %>"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%= i18n.recentAndImportantContacts %>"></a>
										</div>
									</div>
									<textarea name="bcc" id="bcc" style="display:none;" autocomplete="off"></textarea>
								</div>
							</td>
						</tr>
						<tr class="none">
							<th class="mc-txtTit"><%= i18n.senderName %></th>
							<td>
								<div class="mc-mInput_holder">
									<input name="" type="text" class="mSendName" style="width:99%">
									<div class="btn_recentaddr">
										<a href="#" title="<%= i18n.senderName %>"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" alt="<%= i18n.recentAndImportantContacts %>"></a>
									</div>
								</div>
							</td>
						</tr>
<%
	} // end if (!composeForMe)
%>
						<tr>
							<th class="mc-txtTit">
								<label class="tit_cell" for="subject"><%= i18n.subject %></label>
								<span class="mc-imp_heart">
									<input name="M_PRIORITY" type="checkbox" id="mail-priority" class="mCheck">
									<label for="priority"><%= i18n.important %></label>
									<img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="icon">
								</span>
							</th>
							<td>
								<div class="mc-title_wrap">
									<!-- 약속잡기
									<div class="engage_btn">
										<a class="utx_btn" href="#" onClick="addCalInfoDiv.style.display='block'">
											<span class="utx_inrbtn"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="utx_icon">약속잡기</span>
										</a>
									</div>
									//약송 잡기 -->
									<div class="mc-sguide">
										<input name="M_TITLE" type="text" id="subject" class="mInput" style="width:99%">
									</div>
								</div>
								<!-- 등록된 약속 -->
								<div class="mc-engage_cont" style="display:none">
									<p class="mc-engage_summary">
										<span class="appointment">2013/04/29(월) 14:50 ~ 2013/04/29(월) 15:50 . test</span>
										<span class="bar">|</span>
										<a class="delete" href="#">약속삭제</a>
									</p>
								</div>
								<!-- //등록된약속 -->
								<!-- [D] 약속시간 등록하기 -->
								<div class="mc-engage_cont" style="display:none">
									<h5><label>약속시간</label></h5>
									<p>
										<input type="text" class="ipt" value="2013.04.29">
										<select name="">
											<option>18시</option>
										</select>
										<select name="">
											<option>00분</option>
										</select>
										-
										<input type="text" class="ipt" value="2013.04.29">
										<select name="">
											<option>18시</option>
										</select>
										<select name="">
											<option>00분</option>
										</select>
										<button class="btn_help" onMouseOver="calendarInfoLayer.style.display='block'" onMouseOut="calendarInfoLayer.style.display='none'"><span class="mc-blind">약속시간 기준에 대한 도움말</span></button>
									</p>
									<div class="tooltipLayer" id="calendarInfoLayer" style="left:320px; top:24px;width:193px;display:none">
										<div class="ttCock"></div>
	 									<div class="ttCont">
											<p>약속시간은 <strong class="nbd">환경설정>기본 환경 설정>읽기설정</strong> 의 메일함 기준 시간에서<br>설정한 시간대로 표시됩니다.</p>
										</div>
									</div>
									<h5><label>약속장소</label></h5>
									<p>
										<input name="" type="text" class="ipt location">
										<a href="#" class="utx_btn_b" onClick="calPreview.style.display='block'"><span class="utx_inrbtn"><%= i18n.confirm %></span></a>
									</p>
									<p class="desc">
										* 약속시간 및 약속장소를 입력 후 <strong>확인</strong> 버튼을 클릭해서 약속잡기를 <strong>설정</strong>해 주세요.
									</p>
									<button class="btn_close"><span class="mc-blind">약속설정 닫기</span></button>
								</div>
								<!-- //약속잡기 -->
							</td>
						</tr>
<%
					if (user.ATTACHMENTS_POSITION == 0) {
%>
						<tr>
							<th class="mc-txtTit">
								<%= i18n.attachFiles %><a title="<%= i18n.showOrHideAttachments %>" href="#" class="toggle-attachments"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="sClose"></a>
							</th>
							<!-- 첨부파일 업로더 시작 (#attachments-template) -->
							<td id="attachments-cell">
							</td>
							<!-- 첨부파일 업로더 끝 -->
						</tr>
<%
					}
%>
					</tbody>
				</table>
				<!-- //MAIL WRITE ITEM -->

				<!-- 주소록 자동완성 [최근 사용한 주소/중요 연락처] -->
				<div class="mc-dh_layer" id="autoComplete" style="left: 149px; top: 32px; display:none;">
					<div class="type_a autoBook" style="display: block;">
						<!-- [D] 메일주소 행 높이 = 23px, 디자인에 10개 적용되어 230px 여백 고려하여 234px -->
						<ul class="autoAddr dropdown-contacts-list" style="height: 234px; display: none;">
							<!-- #dropdown-contacts-template -->
						</ul>
						<div class="quickMenu">
							<!-- [D] 선택된 경우 selected 클래스 추가 -->
							<a href="#" class="selected">
								<img class="ico_recent" alt="" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>">
								<%= i18n.recentContacts %>
							</a>
							<span class="bar">|</span>
							<a href="#">
								<img class="ico_important" alt="" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>">
								<%= i18n.importantContacts %>
							</a>
							<div class="page" style="display: none;">
								<strong><span id="atcp_suggest_layer_page_num">1</span></strong>
								<span class="slash">/</span>
								<span id="">1</span>
								<!-- [D] a태그 사이에 공백 들어가면 안됨 / disabled는 a태그 span태그로 바꿈-->
								<span class="btn_prev" href="#">
									<img alt="<%= i18n.previous %>" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>">
								</span>
								<a class="btn_next" href="#">
									<img alt="<%= i18n.next %>" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>">
								</a>
							</div>
						</div>
					</div>
				</div>
				<!-- //주소록 자동완성 [중요주소/최근주소]-->

				<!-- 에디터 컨테이너 시작 -->
				<div class="mc-editorFrame">
				</div>
				<!-- 에디터 컨테이너 끝 -->

<%
			if (user.ATTACHMENTS_POSITION == 1) {
%>
				<table class="mc-mailWriteItem" summary="<%= i18n.compose %>">
					<colgroup>
						<col class="item">
						<col class="opt">
					</colgroup>
					<tbody>
						<tr>
							<th class="mc-txtTit">
								<%= i18n.attachFiles %><a title="<%= i18n.showOrHideAttachments %>" href="#" class="toggle-attachments"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="sClose"></a>
							</th>
							<!-- 첨부파일 업로더 시작 (#attachments-template) -->
							<td id="attachments-cell">
							</td>
							<!-- 첨부파일 업로더 끝 -->
						</tr>
					</tbody>
				</table>
<%
			}
%>

				<div class="section_sendopt">
					<span class="cal rsvTime">
						<a href="#" class="tit"><%= i18n.delayDelivery.heading %></a>
						<span class="bar">|</span>
						<%= i18n.delayDelivery.comment %>
					</span>
				</div>
			</div>
		</fieldset>
	</form>
</script>
<script type="text/template" id="blockquoted-mail-template">
<p><br></p>
<p><br></p>
<p>
<blockquote style="padding-left: 5px; border-left-color: black; border-left-width: 2px; border-left-style: solid;">
	---------- <b><%= i18n.originalMessage %></b> ----------<br>
	<b><%= i18n.from %></b>: <%- mail.M_SENDER %><br>
	<b><%= i18n.to %></b>: <%- mail.M_TO %><br>
<% if (mail.M_CC) { %>
	<b><%= i18n.cc %></b>: <%- mail.M_CC %><br>
<% } %>
	<b><%= i18n.date %></b>: <%= $.format.date(mail.M_TIME, 'yyyy-MM-dd (E) HH:mm:ss') %><br>
	<b><%= i18n.subject %></b>: <%- mail.M_TITLE %><br>
	<p><br></p>
	<%= mail.M_CONTENT %>
<%
	if (!mail.mails)
		mail.mails = [];
	for (var i = 0; i < mail.mails.length; i++) {
		var nestedMail = mail.mails[i];
%>
	<blockquote style="padding-left: 5px; border-left-color: black; border-left-width: 2px; border-left-style: solid;">
		----- <b><%= i18n.forwardedMessage %></b> -----<br>
		<b><%= i18n.from %></b>: <%- nestedMail.M_SENDER %><br>
		<b><%= i18n.to %></b>: <%- nestedMail.M_TO %><br>
<% if (nestedMail.M_CC) { %>
		<b><%= i18n.cc %></b>: <%- nestedMail.M_CC %><br>
<% } %>
		<b><%= i18n.date %></b>: <%= $.format.date(nestedMail.M_TIME, 'yyyy-MM-dd (E) HH:mm:ss') %><br>
		<b><%= i18n.subject %></b>: <%- nestedMail.M_TITLE %><br>
		<p><br></p>
		<%= nestedMail.M_CONTENT %>
	</blockquote>
<%
	} // end for (var i = 0; i < mail.mails.length; i++) {...}
%>
</blockquote>
</p>
</script>
<script type="text/template" id="dropdown-contacts-template">
	<!-- [D] 마우스오버/선택된 경우 selected클래스 추가 -->
<%
	var contacts, item, id;
	if (renderFor == 'recents') {
		contacts = recentContacts;
	} else if (renderFor == 'importants') {
		contacts = importantContacts;
	} else {
		contacts = [];
	}
	for (i = 0; i < contacts.length; i++) {
		item = contacts[i];
		if (renderFor == 'recents') {
			id = item.RECENT_ADDRESS_IDX;
		} else if (renderFor == 'importants') {
			id = item.ADDRESS_IDX;
		}
%>
	<li class="">
		<div>
	<% if (item.ADDRESS_NAME) { %>
			<a><span class="name"><%- item.ADDRESS_NAME %></span> <span class="email"><%- item.ADDRESS_EMAIL %></span></a>
	<% } else { %>
			<a><span class="email"><%- item.ADDRESS_EMAIL %></span></a>
	<% } %>
			<input type="hidden" sn="" value="<%- item.ADDRESS_NAME %> <%- item.ADDRESS_EMAIL %>" />
		</div>
		<a title="<%= i18n.Delete %>" class="btn_del" href="#" data-contacts-name="<%= renderFor %>" data-contacts-id="<%= id %>"><img title="<%= i18n.Delete %>" class="deleteBtn" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" /></a>
	</li>
<%
	} // end for
%>
</script>
<script type="text/template" id="delay-delivery-template">
	<!-- 예약발송 -->
	<ul class="tab_reserve">
		<!-- [D] 선택된 a 태그에 selected 클래스 추가 -->
		<li><a id="delay-delivery-custom" href="#" class="selected"><%= i18n.delayDelivery.custom %></a></li>
		<li><a id="delay-delivery-d-day" href="#"><%= i18n.delayDelivery.dDay %></a></li>
	</ul>
	<!-- 직접 입력 -->
	<div id="delay-delivery-custom-panel">
		<dl class="input_area">
			<dt><%= i18n.timeZone %></dt>
			<dd class="timeZoneWrapper">
				<select name="timeZone" style="width: 265px;">
					<option value="-12:00"><%= i18n.GMT['-12:00'] %></option>
					<option value="-11:00"><%= i18n.GMT['-11:00'] %></option>
					<option value="-10:00"><%= i18n.GMT['-10:00'] %></option>
					<option value="-09:30"><%= i18n.GMT['-09:30'] %></option>
					<option value="-09:00"><%= i18n.GMT['-09:00'] %></option>
					<option value="-08:30"><%= i18n.GMT['-08:30'] %></option>
					<option value="-08:00"><%= i18n.GMT['-08:00'] %></option>
					<option value="-07:00"><%= i18n.GMT['-07:00'] %></option>
					<option value="-06:00"><%= i18n.GMT['-06:00'] %></option>
					<option value="-05:00"><%= i18n.GMT['-05:00'] %></option>
					<option value="-04:30"><%= i18n.GMT['-04:30'] %></option>
					<option value="-04:00"><%= i18n.GMT['-04:00'] %></option>
					<option value="-03:30"><%= i18n.GMT['-03:30'] %></option>
					<option value="-03:00"><%= i18n.GMT['-03:00'] %></option>
					<option value="-02:00"><%= i18n.GMT['-02:00'] %></option>
					<option value="-01:00"><%= i18n.GMT['-01:00'] %></option>
					<option value="+00:00"><%= i18n.GMT['+00:00'] %></option>
					<option value="+01:00"><%= i18n.GMT['+01:00'] %></option>
					<option value="+02:00"><%= i18n.GMT['+02:00'] %></option>
					<option value="+03:00"><%= i18n.GMT['+03:00'] %></option>
					<option value="+03:30"><%= i18n.GMT['+03:30'] %></option>
					<option value="+04:00"><%= i18n.GMT['+04:00'] %></option>
					<option value="+04:30"><%= i18n.GMT['+04:30'] %></option>
					<option value="+05:00"><%= i18n.GMT['+05:00'] %></option>
					<option value="+05:30"><%= i18n.GMT['+05:30'] %></option>
					<option value="+05:45"><%= i18n.GMT['+05:45'] %></option>
					<option value="+06:00"><%= i18n.GMT['+06:00'] %></option>
					<option value="+06:30"><%= i18n.GMT['+06:30'] %></option>
					<option value="+07:00"><%= i18n.GMT['+07:00'] %></option>
					<option value="+08:00"><%= i18n.GMT['+08:00'] %></option>
					<option value="+09:00"><%= i18n.GMT['+09:00'] %></option>
					<option value="+09:30"><%= i18n.GMT['+09:30'] %></option>
					<option value="+10:00"><%= i18n.GMT['+10:00'] %></option>
					<option value="+10:30"><%= i18n.GMT['+10:30'] %></option>
					<option value="+11:00"><%= i18n.GMT['+11:00'] %></option>
					<option value="+11:30"><%= i18n.GMT['+11:30'] %></option>
					<option value="+12:00"><%= i18n.GMT['+12:00'] %></option>
				</select>
			</dd>
			<dt>예약시간</dt>
			<dd>
				<input name="date" title="<%= i18n.date %>" class="input_text" style="width: 106px;" value="<%= data.date %>">
				<select	name="hour" title="<%= i18n.hour %>" style="width: 54px;">
<%
	for (var hour = 0; hour < 24; hour++) {
		var HH = hour < 10 ? '0' + hour : '' + hour;
		var selected = (data.hour == HH) ? ' selected' : ''; 
%>
					<option value="<%= HH %>" <%= selected %>><%= HH %></option>
<%
	} // end for
%>
				</select>
				<select name="minute" title="<%= i18n.minute %>" style="width: 54px;">
					<option value="00" <%= data.minute == '00' ? 'selected' : '' %>>00</option>
					<option value="30" <%= data.minute == '30' ? 'selected' : '' %>>30</option>
				</select>
			</dd>
		</dl>
		<div class="notice">
			<p><%= i18n.delayDelivery.phrase %></p>
			<ul>
				<li>
					<%= i18n.delayDelivery.phraseForDateAndTime %>
				</li>
				<li>
					<%= i18n.delayDelivery.phraseForBlobAttachments %>
				</li>
			</ul>
		</div>
	</div>
	<!-- //직접입력 -->
	<!-- D-day로 예약 -->
	<div id="delay-delivery-d-day-panel" style="display:none">
		<dl class="input_area">
			<dt><%= i18n.timeZone %></dt>
			<dd class="timeZoneWrapper">
				<select name="timeZone" style="width: 265px;">
					<option value="-12:00"><%= i18n.GMT['-12:00'] %></option>
					<option value="-11:00"><%= i18n.GMT['-11:00'] %></option>
					<option value="-10:00"><%= i18n.GMT['-10:00'] %></option>
					<option value="-09:30"><%= i18n.GMT['-09:30'] %></option>
					<option value="-09:00"><%= i18n.GMT['-09:00'] %></option>
					<option value="-08:30"><%= i18n.GMT['-08:30'] %></option>
					<option value="-08:00"><%= i18n.GMT['-08:00'] %></option>
					<option value="-07:00"><%= i18n.GMT['-07:00'] %></option>
					<option value="-06:00"><%= i18n.GMT['-06:00'] %></option>
					<option value="-05:00"><%= i18n.GMT['-05:00'] %></option>
					<option value="-04:30"><%= i18n.GMT['-04:30'] %></option>
					<option value="-04:00"><%= i18n.GMT['-04:00'] %></option>
					<option value="-03:30"><%= i18n.GMT['-03:30'] %></option>
					<option value="-03:00"><%= i18n.GMT['-03:00'] %></option>
					<option value="-02:00"><%= i18n.GMT['-02:00'] %></option>
					<option value="-01:00"><%= i18n.GMT['-01:00'] %></option>
					<option value="+00:00"><%= i18n.GMT['+00:00'] %></option>
					<option value="+01:00"><%= i18n.GMT['+01:00'] %></option>
					<option value="+02:00"><%= i18n.GMT['+02:00'] %></option>
					<option value="+03:00"><%= i18n.GMT['+03:00'] %></option>
					<option value="+03:30"><%= i18n.GMT['+03:30'] %></option>
					<option value="+04:00"><%= i18n.GMT['+04:00'] %></option>
					<option value="+04:30"><%= i18n.GMT['+04:30'] %></option>
					<option value="+05:00"><%= i18n.GMT['+05:00'] %></option>
					<option value="+05:30"><%= i18n.GMT['+05:30'] %></option>
					<option value="+05:45"><%= i18n.GMT['+05:45'] %></option>
					<option value="+06:00"><%= i18n.GMT['+06:00'] %></option>
					<option value="+06:30"><%= i18n.GMT['+06:30'] %></option>
					<option value="+07:00"><%= i18n.GMT['+07:00'] %></option>
					<option value="+08:00"><%= i18n.GMT['+08:00'] %></option>
					<option value="+09:00"><%= i18n.GMT['+09:00'] %></option>
					<option value="+09:30"><%= i18n.GMT['+09:30'] %></option>
					<option value="+10:00"><%= i18n.GMT['+10:00'] %></option>
					<option value="+10:30"><%= i18n.GMT['+10:30'] %></option>
					<option value="+11:00"><%= i18n.GMT['+11:00'] %></option>
					<option value="+11:30"><%= i18n.GMT['+11:30'] %></option>
					<option value="+12:00"><%= i18n.GMT['+12:00'] %></option>
				</select>
			</dd>
			<dt class="mc-blind">D-Day</dt>
			<dd class="d_day">
				<label for="dday_date_input"><%= i18n.dDay.startDate %></label>
				<span class="f_wrap">
					<input title="<%= i18n.date %>" name="date" value="<%= data.date %>" type="text" class="input_text" style="width: 106px;">
					<select title="<%= i18n.hour %>" name="hour" style="width: 54px;">
<%
	for (var hour = 0; hour < 24; hour++) {
		var HH = hour < 10 ? '0' + hour : '' + hour;
		var selected = (data.hour == HH) ? ' selected' : ''; 
%>
						<option value="<%= HH %>" <%= selected %>><%= HH %></option>
<%
	} // end for
%>
					</select>
					<select title="<%= i18n.minute %>" name="minute" style="width: 54px;">
						<option value="00" <%= data.minute == '00' ? 'selected' : '' %>>00</option>
						<option value="30" <%= data.minute == '30' ? 'selected' : '' %>>30</option>
					</select>
				</span>
				<label for="dday_input"><%= i18n.dDay.daysFromStartDatePrefix %></label>
				<span class="f_wrap"><input title="날짜" name="d-day" value="<%= data.dDay %>" class="input_text" style="width: 32px; -ms-ime-mode: disabled;" type="text" maxlength="4"> <%= i18n.days %> <%= i18n.dDay.daysFromStartDateSuffix %></span>
			</dd>
<%
	var parsedDate = $.format.parseDate('20' + data.date + 'T00:00');
	var date = parsedDate.date;
	date.setDate(date.getDate() + data.dDay);
	date.setHours(parseInt(data.hour, 10));
	date.setMinutes(parseInt(data.minute, 10));
%>
			<dt>
				<strong>D-Day : </strong>
			</dt>
			<dd id="d-day-date-time">
				<strong><%= $.format.date(date, i18n.dDay.dateTime) %></strong>
			</dd>
		</dl>
		<div class="notice">
			<p><%= i18n.delayDelivery.phrase %></p>
			<ul>
				<li>
					<%= i18n.delayDelivery.phraseForDateAndTime %>
				</li>
				<li>
					<%= i18n.delayDelivery.phraseForBlobAttachments %>
				</li>
			</ul>
		</div>
	</div>
	<!-- //D-day로 예약 -->
	<div class="btn_area" style="margin: 0;">
		<span><button type="button" class="b"><%= i18n.confirm %></button></span>
		<span><button type="button" class=""><%= i18n.cancel %></button></span>
	</div>
</script>
<script type="text/template" id="compose-options-template">
	<fieldset>
		<legend><%= i18n.composeSettings %></legend>
		<p class="layertlt2"><%= i18n.characterEncoding.label %></p>
		<p class="layerSub4">
			<select name="character-encoding" class="p12">
				<option value="UTF-8"><%= i18n.characterEncoding.unicode %></option>
				<option value="EUC-KR"><%= i18n.characterEncoding.korean %></option>
				<option value="ISO-2022-JP"><%= i18n.characterEncoding.japanese %></option>
				<option value="GB2312"><%= i18n.characterEncoding.simplifiedChinese %></option>
				<option value="Big5"><%= i18n.characterEncoding.traditionalChinese %></option>
			</select>
		</p>
<%
	var interval = {};
	interval[user.AUTOSAVE_INTERVAL] = 'selected';
%>
		<p class="layertlt2"><%= i18n.autoSaveInterval %></p>
		<p class="layerSub4">
			<select name="AUTOSAVE_INTERVAL" class="p12">
				<option value="0" <%= interval[0] %>><%= i18n.autoSaveNone %></option>
				<option value="30" <%= interval[30] %>>30<%= i18n.seconds %></option>
				<option value="60" <%= interval[60] %>>1<%= i18n.minute %></option>
				<option value="180" <%= interval[180] %>>3<%= i18n.minutes %></option>
				<option value="300" <%= interval[300] %>>5<%= i18n.minutes %></option>
			</select>
		</p>
<%
	var preview = {};
	preview[user.PREVIEW_BEFORE_SENDING] = 'selected';
%>
		<p class="layertlt2"><%= i18n.previewBeforeSending %></p>
		<p class="layerSub4">
			<select name="PREVIEW_BEFORE_SENDING" class="p12">
				<option value="all" <%= preview['all'] %>><%= i18n.previewBeforeSendingOptions.all %></option>
				<option value="important" <%= preview['important'] %>><%= i18n.previewBeforeSendingOptions.important %></option>
				<option value="none" <%= preview['none'] %>><%= i18n.previewBeforeSendingOptions.none %></option>
			</select>
		</p>
<%
	var saveInSent = user.USERS_SENDBOX == 'Y' ? 'checked="checked"' : '';	
%>
		<p class="save_mailbox">
			<input name="USERS_SENDBOX" type="checkbox" value="Y" id="save-in-sent" <%= saveInSent %>>
			<label for="save-in-sent"><%= i18n.saveInSent %></label>
		</p>
		<div class="addButton nb nb0">
			<button type="button" class="b"><%= i18n.confirm %></button>
			<button type="button"><%= i18n.cancel %></button>
		</div>
	</fieldset>
</script>
<script type="text/template" id="blob-options-template">
	<div class="adl_header clearfix">
		<h4><%= i18n.blobAttachmentsSettings.heading %></h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.close %></span></span>
		</div>
	</div>
	<div class="adl_contents">
		<div class="box_tbl">
			<table class="set_tbl">
				<colgroup>
					<col class="sw3">
					<col class="sw2">
				</colgroup>
				<tbody>
					<tr class="f">
						<th scope="row"><%= i18n.blobAttachmentsSettings.usage %></th>
						<td>
							<%= i18n.blobAttachmentsSettings.leadingUsage %>
							<%= numeral(diskUser.DISK_QUOTA).format('0 b') %>
							<%= i18n.blobAttachmentsSettings.middlingUsage %>
							<%= numeral(diskUser.DISK_USAGE).format('0 b') %>
							<%= i18n.blobAttachmentsSettings.trailingUsage %>
						</td>
					</tr>
					<tr>
						<th scope="row">
							<label for="file_date"><%= i18n.blobAttachmentsSettings.validityDays %></label>
						</th>
						<td>
							<input name="file_date" class="profile_input2" type="text" value="<%= diskUser.BIGMAIL_VALIDITY_DAYS %>" />
							<%= i18n.blobAttachmentsSettings.days %>
						<% if (diskUser.BIGMAIL_MAX_VALIDITY_DAYS == 0) { %>
							<%= i18n.blobAttachmentsSettings.unlimited %>
						<% } else { %>
							<%= i18n.blobAttachmentsSettings.leadingMaxValidityDays %>
							<%= diskUser.BIGMAIL_MAX_VALIDITY_DAYS %>
							<%= i18n.blobAttachmentsSettings.trailingMaxValidityDays %>
						<% } %>
						</td>
					</tr>
					<tr>
						<th>
							<label for="down_num"><%= i18n.blobAttachmentsSettings.downloadTimes %></label>
						</th>
						<td>
							<input name="down_num" class="profile_input2" type="text" value="<%= diskUser.BIGMAIL_DOWNLOAD_LIMIT %>" />
							<%= i18n.blobAttachmentsSettings.times %>
						<% if (diskUser.BIGMAIL_MAX_DOWNLOAD_LIMIT == 0) { %>
							<%= i18n.blobAttachmentsSettings.unlimited %>
						<% } else { %>
							<%= i18n.blobAttachmentsSettings.leadingMaxDownloadTimes %>
							<%= diskUser.BIGMAIL_MAX_DOWNLOAD_LIMIT %>
							<%= i18n.blobAttachmentsSettings.trailingMaxDownloadTimes %>
						<% } %>
						</td>
					</tr>
					<tr>
						<th>
							<label for="passwd-required"><%= i18n.blobAttachmentsSettings.setPassword %></label>
						</th>
						<td>
							<input name="passwd-required" type="radio" value="true" id="blob-pw-required"
								<%= diskUser.BIGMAIL_PASSWORD_REQUIRED ? 'checked' : '' %> >
							<label for="blob-pw-required"><%= i18n.blobAttachmentsSettings.passwordRequired %></label>
							<input name="passwd-required" type="radio" value="false" id="blob-pw-not-required"
								<%= diskUser.BIGMAIL_PASSWORD_REQUIRED ? '' : 'checked' %> >
							<label for="blob-pw-not-required"><%= i18n.blobAttachmentsSettings.passwordNotRequired %></label>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button type="button" class="b" title="<%= i18n.save %>"><%= i18n.save %></button>
			<button type="button" title="<%= i18n.close %>"><%= i18n.close %></button>
		</div>
	</div>
</script>
<script type="text/template" id="print-options-template">
	<div class="type_a spam_layout" style="width:160px">
		<ul>
			<li class="first">
				<h5><%= i18n.printOptions %></h5>
				<input name="from" type="checkbox" checked="checked" id="print-from">
				<label for="print-from"><%= i18n.from %></label><br/>
				<input name="to" type="checkbox" checked="checked" id="print-to">
				<label for="print-to"><%= i18n.to %></label><br/>
				<input name="cc" type="checkbox" checked="checked" id="print-cc">
				<label for="print-cc"><%= i18n.cc %></label><br/>
				<input name="subject" type="checkbox" checked="checked" id="print-subject">
				<label for="print-subject"><%= i18n.subject %></label><br/>
				<input name="attachments" type="checkbox" checked="checked" id="print-attachments">
				<label for="print-attachments"><%= i18n.attachments %></label><br/>
				<input name="contents" type="checkbox" checked="checked" id="print-contents">
				<label for="print-contents"><%= i18n.contents %></label>
			</li>
		</ul>
		<p class="btn_area" id="spem_call_bt">
			<button type="button" class="s_bt print"><%= i18n.print %></button>
			<button type="button" class="s_bt cancel"><%= i18n.cancel %></button>
		</p>
	</div>
</script>
<script type="text/template" id="sent-mail-template">
<%
	var mailSentSuccessfully = i18n.mailSentSuccessfully;
	if (mailModel && mailModel.get('delayDateTime'))
		mailSentSuccessfully = i18n.scheduledSendingMail;
%>
	<div class="txt_con_wrap">
		<div class="co_style">
			<h4><%= mailSentSuccessfully %></h4>
<%
	if (mailModel && mailModel.get('delayDateTime')) {
		var date = new Date(mailModel.get('delayDateTime').substring(0, 10) + 'T'
							 + mailModel.get('delayDateTime').substring(11) + mailModel.get('delayTimeZone'));
		var pattern = 'yyyy-MM-dd (E) a h' + i18n.hour;
		if (date.getMinutes() != 0)
			pattern = 'yyyy-MM-dd (E) a h' + i18n.hour + 'mm' + i18n.minutes;
		date = $.format.date(date, pattern);
%>
			<p>
				<%= date %><%= i18n.sentMailAfterPharse %><br />
				<%= i18n.confirmDeliveryStatusPharse %><br />
				<a href="#" class="deliverystatus">
					<span class="hlt"><%= i18n.backToDeliveryStatus %></span>
					<img class="arrow" alt="<%= i18n.rightwardsArrow %>" src="<%= popup ? '../img/arrow_dot.gif' : 'img/arrow_dot.gif' %>" />
				</a>
			</p>
<%
	}
%>
		</div>
	</div>
<%
	if (contacts && !_.isEmpty(contacts)) {
%>
	<div class="not_address">
		<div class="not_box">
			<p>
				<%= i18n.leadingRecipientsOfSentMail %><strong><span class="hlt"><%- contacts.length %></span></strong><%= i18n.trailingRecipientsOfSentMail %> <%= i18n.leadingRecipientsNotInContacts %><strong><span class="hlt"><%- contacts.length %></span></strong><%= i18n.trailingRecipientsNotInContacts %><br />
				<%= i18n.enterRecipientsNameToAddToContacts %>
			</p>
			<ul>
<%
		for (var i = 0; i < contacts.length; i++) {
			var contact = contacts[i];
%>
				<li data-address="<%- contact.ADDRESS_EMAIL %>">
					<span class="write_name">
						<a href="#" class="hlt_star important"><span class="ic_hlt_star"><span class="mc-blind"><%= i18n.important %></span></span></a>
						<input type="text" name="write_name_txt" placeholder="<%= i18n.enterName %>" class="write_input contact-name" value="<%- contact.ADDRESS_NAME %>" />
					</span>
					<span class="view_mail contact-mail">
						<%- contact.ADDRESS_EMAIL %>
					</span>
				</li>
<%
		}
%>
			</ul>
		</div>
		<button type="button" class="add-contacts"><%= i18n.addToContacts %></button>
	</div>
<%
	} else {
%>
	<div class="no_con_wrap">
		<p><%= i18n.viewRecipientsInContacts %></p>
		<p><a href="#" class="contacts"><%= i18n.viewContacts %></a><img src="<%= popup ? '../img/r_arrow.png' : 'img/r_arrow.png' %>" alt="<%= i18n.rightwardsArrow %>" class="arrow" /></p>
	</div>
<%
	}
%>
	<div class="not_address rc_grp">
		<div class="not_box">
			<p>
				<em class="ico_info"></em> <strong><%= i18n.frequentRecipientGroup %></strong><br>
				<%= i18n.descriptionRecipientGroup %>
			</p>
		</div>
		<button type="button" class="recipient-group-register"><%= i18n.registerRecipientGroup %></button>
	</div>
</script>
<script type="text/template" id="attachments-template">
	<div class="fForm" class="attachments-header">
		<a href="#" class="utx_btn_b attachments-attach"><span class="utx_inrbtn"><%= i18n.attach %></span></a>
		<span><a class="delete attachments-remove" href="#"><%= i18n.Delete %></a><span class="bar">|</span></span>
		<!-- Uploader Change Link -->
		<span><a class="fNormal attachments-convert"><%= i18n.convertToFileAttachment %></a></span>
		<!-- Attachment FileSize Info Area -->
		<span>
			<p class="indicator">
				<span class="tit"><%= i18n.fileAttachmentsUsagePrefix %></span>
				<span class="attachments-files-size">0KB</span>/<span class="attachments-files-max-size">10MB</span>
				<em>|</em>
				<span class="tit"><%= i18n.blobAttachmentsUsagePrefix %></span>
				<span class="attachments-blobs-size">0KB</span>/<span class="attachments-blobs-available">1GB</span>
				<span><strong class="attachments-blobs-quota">1GB</strong></span>
			</p>
		</span>
	</div>
	<!-- HTML5 Uploader -->
	<div class="mc-uploader5 attachments-dropzone" style="display:none;">
		<div class="upld_header attachments-list-header">
			<span class="file_select">
				<input type="checkbox"><label class="mc-blind"><%= i18n.attachment.selectAll %></label>
			</span>
			<span class="file_name"><%= i18n.attachment.filename %></span>
			<span class="status"><%= i18n.attachment.status %></span>
			<span class="file_size"><%= i18n.attachment.size %></span>
			<span class="attach_type"><%= i18n.attachment.type %></span>
			<span class="down_period"><%= i18n.attachment.downloads %></span>
		</div>
		<div class="upld_flist attachments-list-content">
			<!-- [D] 파일 첨부시 display:none -->
			<p class="drag_here attachments-droppable" style="display:block">
				<span class="icon_attach"></span>
				<% if ('draggable' in document.createElement('div')) { %>
					<%= i18n.dragAndDropFilesHere %>
				<% } else { %>
					<%= i18n.dragAndDropFilesUnavailable %>
				<% } %>
			</p>
			<ul class="attachments-list" style="display:none">
			<!-- 파일 아이콘 클래스 네임
				fic_bak ==> etc
				fic_alz / fic_zi / fic_rar / fic_gz / fic_7z
				fic_ico / fic_icon
				fic_ndoc / fic_doc / fic_docx
				fic_exe
				fic_fla / fic_swf
				fic_gul / fic_rtf / fic_one / fic_pub
				fic_htm / fic_html
				fic_hwp
				fic_bmp / fic_tif / fic_tiff / fic_png / fic_jpg / fic_jpeg / fic_psd / fic_gif
				fic_mid / fic_rafic_wav / fic_wma / fic_mp3
				fic_mpeg / fic_ftv / fic_k3g / fic_wmv / fic_mp4 / fic_mov
				fic_pdf
				fic_ppt / fic_pptx
				fic_txt / fic_xls / fic_xlsx / fic_xlsm / fic_xlsb
			-->
			</ul>
		</div>
	</div>
	<!-- // HTML5 Uploader -->
	<div class="attachInfoNoti attachments-footer" style="display:none;">
		<a href="#"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="btn_write_opt"></a>
		<%= i18n.downloadBlobAttachments.leadingPhrase %>
		<strong><span class="num blob-expirationdays"><%= diskUser.BIGMAIL_VALIDITY_DAYS %><%= i18n.downloadBlobAttachments.validityDays %></span></strong>
		<%= i18n.downloadBlobAttachments.middlingPhrase %>
		<strong><span class="num blob-downloadlimit"><%= diskUser.BIGMAIL_DOWNLOAD_LIMIT %><%= i18n.downloadBlobAttachments.downloadTimes %></span></strong>
		<%= i18n.downloadBlobAttachments.trailingPhrase %>
	</div>
</script>
<script type="text/template" id="attachments-item-template">
<%
	var extentionToClassName = {
		"alz" : 'fic_alz', "zip" : 'fic_zip', "rar" : 'fic_rar', "7z" : 'fic_7z', "tar" : 'fic_tar',
		"ico" : 'fic_ico', "icon" : 'fic_icon',
		"doc" : 'fic_doc', "docx" : 'fic_docx', "ndoc" : 'fic_ndoc',
		"exe" : 'fic_exe',
		"fla" : 'fic_fla', "swf" : 'fic_swf',
		"gul" : 'fic_gul', "rft" : 'fic_rtf', "one" : 'fic_one', "pub" : 'fic_pub',
		"htm" : 'fic_htm', "html" : 'fic_html',
		"hwp" : 'fic_hwp',
		"bmp" : 'fic_bmp', "tif" : 'fic_tif', "tiff" : 'fic_tiff',
		"png" : 'fic_png', "jpg" : 'fic_jpg', "jpeg" : 'fic_jpeg',
		"gif" : 'fic_gif', "psd" : 'fic_psd',
		"mid" : 'fic_mid', "wav" : 'fic_rafic_wav', "wma" : 'fic_wma',
		"mp3" : 'fic_mp3',
		"mp4" : 'fic_mp4', "mpeg" : 'fic_mpeg', "ftv" : 'fic_ftv', "k3g" : 'fic_k3g',
		"wmv" : 'fic_wmv', "mov" : 'fic_mov',
		"pdf" : 'fic_pdf',
		"ppt" : 'fic_ppt', "pptx" : 'fic_pptx',
		"xls" : 'fic_xls', "xlsx" : 'fic_xlsx', "xlsm" : 'fic_xlsm', "xlsb" : 'fic_xlsb',
		"txt" : 'fic_txt',
	};
	function fileNameToClassName(fileName) {
		if (!fileName || typeof fileName !== "string")
			return "fic_bak";
		var dotIndex = fileName.lastIndexOf('.');
		if (dotIndex === -1)
			return "fic_bak";
		var ext = fileName.substring(dotIndex + 1).toLowerCase();
		var className = extentionToClassName[ext];
		if (!className)
			return "fic_bak";
		return className;
	}
%>
	<span class="file_select">
		<input type="checkbox">
	</span>
	<span class="file_name">
		<label for="">
			<span class="fic <%= fileNameToClassName(file.name) %>"></span>
			<%- file.name %>
		</label>
	</span>
	<span class="status"></span>
	<span class="file_size"><%= numeral(file.size).format('0[.]00b') %></span>
	<span class="attach_type">
		<span><%= i18n.attachment.file %></span>
		<button class="chg_type"><%= i18n.attachment.convert %></button>
	</span>
	<span class="down_period"><%= i18n.attachment.unlimited %></span>
</script>
<script type="text/template" id="attachments-upload-template">
<%
	var extentionToClassName = {
		"alz" : 'fic_alz', "zip" : 'fic_zip', "rar" : 'fic_rar', "7z" : 'fic_7z', "tar" : 'fic_tar',
		"ico" : 'fic_ico', "icon" : 'fic_icon',
		"doc" : 'fic_doc', "docx" : 'fic_docx', "ndoc" : 'fic_ndoc',
		"exe" : 'fic_exe',
		"fla" : 'fic_fla', "swf" : 'fic_swf',
		"gul" : 'fic_gul', "rft" : 'fic_rtf', "one" : 'fic_one', "pub" : 'fic_pub',
		"htm" : 'fic_htm', "html" : 'fic_html',
		"hwp" : 'fic_hwp',
		"bmp" : 'fic_bmp', "tif" : 'fic_tif', "tiff" : 'fic_tiff',
		"png" : 'fic_png', "jpg" : 'fic_jpg', "jpeg" : 'fic_jpeg',
		"gif" : 'fic_gif', "psd" : 'fic_psd',
		"mid" : 'fic_mid', "wav" : 'fic_rafic_wav', "wma" : 'fic_wma',
		"mp3" : 'fic_mp3',
		"mp4" : 'fic_mp4', "mpeg" : 'fic_mpeg', "ftv" : 'fic_ftv', "k3g" : 'fic_k3g',
		"wmv" : 'fic_wmv', "mov" : 'fic_mov',
		"pdf" : 'fic_pdf',
		"ppt" : 'fic_ppt', "pptx" : 'fic_pptx',
		"xls" : 'fic_xls', "xlsx" : 'fic_xlsx', "xlsm" : 'fic_xlsm', "xlsb" : 'fic_xlsb',
		"txt" : 'fic_txt',
	};
	function fileNameToClassName(fileName) {
		if (!fileName || typeof fileName !== "string")
			return "fic_bak";
		var dotIndex = fileName.lastIndexOf('.');
		if (dotIndex === -1)
			return "fic_bak";
		var ext = fileName.substring(dotIndex + 1).toLowerCase();
		var className = extentionToClassName[ext];
		if (!className)
			return "fic_bak";
		return className;
	}

	var total = 0, loaded = 0;
	_.each(items, function(item) {
		total += item.file.size;
		loaded += $(item.item).data('attachment-loaded');
	});
	var percent = Math.round(loaded / total * 100) + '%';
	total = numeral(loaded).format('0[.]0b');
	loaded = numeral(loaded).format('0[.]0b');
%>
	<div class="type_c">
		<div class="layer_content upld">
			<div class="hTitle ie6t">
				<span><%= i18n.attachment.upload %></span>
				<img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" title="<%= i18n.close %>" class="lClose" alt="<%= i18n.close %>" />
			</div>
			<div class="upld_box">
				<div class="upload_status">
					<p class="progress_bar">
						<span class="tit"><%= i18n.attachment.transferOverall %></span>
						<span class="total"><%= percent %></span>
						<span class="p_bar">
							<span class="p_bar_value" style="width: <%= percent %>;"></span>
						</span>
					</p>
					<div class="status">
						<table width="100%" border="1">
							<caption><span class="blind"><%= i18n.attachment.transferStatus %></span></caption>
							<colgroup>
								<col width="*">
								<col width="40%">
								<col width="*">
								<col width="40%">
							</colgroup>
							<tbody>
								<tr>
									<th scope="row"><%= i18n.attachment.files %></th>
									<td id="transfer-files"><%= '0/' + items.length %></td>
									<th scope="row"><%= i18n.attachment.speed %></th>
									<td id="transfer-rate">0.0KB/<%= i18n.seconds %></td>
								</tr>
								<tr>
									<th scope="row"><%= i18n.attachment.bytes %></th>
									<td id="transfer-bytes"><%= loaded + '/' + total %></td>
									<th scope="row"><%= i18n.attachment.elapsed %></th>
									<td id="transfer-time">0<%= i18n.minutes %> 0<%= i18n.seconds %> / 0<%= i18n.minutes %> 0<%= i18n.seconds %></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="upld_file">
					<div class="upld_file_head">
						<span class="file_name"><%= i18n.attachment.name %></span>
						<span class="file_progress"><%= i18n.attachment.progress %></span>
						<span class="transfer_status"><%= i18n.attachment.status %></span>
					</div>
					<div class="upld_file_list osx_scrl">
						<ul>
<%
	for (var i = 0; i < items.length; i++) {
		var item = items[i];
		var id = item.id;
		var file = item.file;
		var $item = $(item.item);
		var loaded = $item.data('attachment-loaded');
		var size = $item.data('attachment-size');
		var percent = Math.round(loaded / size * 100) + '%';
		loaded = numeral(loaded).format('0[.]0b');
		size = numeral(size).format('0[.]0b');
		var status = $item.data('attachment-status');
		switch (status) {
		case 'queued': // pending
			status = i18n.attachment.queued;
			break;
		case 'loading': // progress
			status = i18n.attachment.uploading;
			break;
		case 'abort': // pause, halt
			status = i18n.attachment.aborted;
			break;
		case 'done': // completed
			status = i18n.attachment.uploaded;
			break;
		default:
			status = i18n.attachment.queued;
		}
%>
							<li id="file_id_<%= id.replace(/\./, '_') %>">
								<span class="file_name">
									<span class="fic <%= fileNameToClassName(file.name) %>"></span>
									<%- file.name %>
								</span>
								<span class="file_progress">
									<span class="st"><%= loaded %> / <%= size %></span>
									<span class="p_bar">
										<span class="p_bar_value" style="width: <%= percent %>;"></span>
									</span>
									<span class="transfer_status"><%= status %></span>
								</span>
							</li>
<%
	} // end for
%>
						</ul>
					</div>
				</div>
			</div>
			<div class="addButton nb">
				<button type="button"><span class="icon_pause"></span><%= i18n.attachment.pause %></button>
			</div>
		</div>
	</div>
</script>
<script type="text/template" id="daum-editor-template">
	<!-- 사이드바 -->
	<div id="tx_sidebar" class="tx-sidebar" style="display: none;">
		<div class="tx-sidebar-boundary">
			<!-- 사이드바 / 첨부 -->
			<ul class="tx-bar tx-bar-left tx-nav-attach">
				<!-- 이미지 첨부 버튼 시작 --><!--
				@decsription
				<li></li> 단위로 위치를 이동할 수 있다.
				-->
				<li class="tx-list">
					<div unselectable="on" id="tx_image" class="tx-image tx-btn-trans">
						<a href="javascript:;" title="<%= i18n.editor.photo %>" class="tx-text"><%= i18n.editor.photo %></a>
					</div>
				</li>
				<!-- 이미지 첨부 버튼 끝 -->
				<li class="tx-list">
					<div unselectable="on" id="tx_file" class="tx-file tx-btn-trans">
						<a href="javascript:;" title="<%= i18n.editor.file %>" class="tx-text"><%= i18n.editor.file %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" id="tx_media" class="tx-media tx-btn-trans">
						<a href="javascript:;" title="<%= i18n.editor.media %>" class="tx-text"><%= i18n.editor.media %></a>
					</div>
				</li>
				<li class="tx-list tx-list-extra">
					<div unselectable="on" class="tx-btn-nlrbg tx-extra">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.extra %>"><%= i18n.editor.extra %></a>
					</div>
					<ul class="tx-extra-menu tx-menu" style="left:-48px;" unselectable="on">
						<!--
						@decsription
						일부 버튼들을 빼서 레이어로 숨기는 기능을 원할 경우 이 곳으로 이동시킬 수 있다.
						-->
					</ul>
				</li>
			</ul>
			<!-- 사이드바 / 우측영역 -->
			<ul class="tx-bar tx-bar-right">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lrbg tx-fullscreen" id="tx_fullscreen">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.fullscreen %> (Ctrl+M)"><%= i18n.editor.fullscreen %></a>
					</div>
				</li>
			</ul>
			<!--
			<ul class="tx-bar tx-bar-right tx-nav-opt">
				<li class="tx-list">
					<div unselectable="on" class="tx-switchtoggle" id="tx_switchertoggle">
						<a href="javascript:;" title="<%= i18n.editor.switchertoggle %>"><%= i18n.editor.editor %></a>
					</div>
				</li>
			</ul>
			-->
		</div>
	</div>
	<!-- 툴바 - 기본 시작 --><!--
	@decsription
	툴바 버튼의 그룹핑의 변경이 필요할 때는 위치(왼쪽, 가운데, 오른쪽) 에 따라 <li> 아래의 <div>의 클래스명을 변경하면 된다.
	tx-btn-lbg: 왼쪽, tx-btn-bg: 가운데, tx-btn-rbg: 오른쪽, tx-btn-lrbg: 독립적인 그룹
	드롭다운 버튼의 크기를 변경하고자 할 경우에는 넓이에 따라 <li> 아래의 <div>의 클래스명을 변경하면 된다.
	tx-slt-70bg, tx-slt-59bg, tx-slt-42bg, tx-btn-43lrbg, tx-btn-52lrbg, tx-btn-57lrbg, tx-btn-71lrbg
	tx-btn-48lbg, tx-btn-48rbg, tx-btn-30lrbg, tx-btn-46lrbg, tx-btn-67lrbg, tx-btn-49lbg, tx-btn-58bg, tx-btn-46bg, tx-btn-49rbg
	-->
	<div id="tx_toolbar_basic" class="tx-toolbar tx-toolbar-basic">
		<div class="tx-toolbar-boundary">
			<ul class="tx-bar tx-bar-left">
				<li class="tx-list">
					<div id="tx_fontfamily" unselectable="on" class="tx-slt-70bg tx-fontfamily">
						<a href="javascript:;" title="<%= i18n.editor.fontfamily %>"><%= i18n.editor.Gulim %></a>
					</div>
					<div id="tx_fontfamily_menu" class="tx-fontfamily-menu tx-menu" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left">
				<li class="tx-list">
					<div unselectable="on" class="tx-slt-42bg tx-fontsize" id="tx_fontsize">
						<a href="javascript:;" title="<%= i18n.editor.fontsize %>">9pt</a>
					</div>
					<div id="tx_fontsize_menu" class="tx-fontsize-menu tx-menu" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-font">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-bold" id="tx_bold">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.bold %> (Ctrl+B)"><%= i18n.editor.bold %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-underline" id="tx_underline">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.underline %> (Ctrl+U)"><%= i18n.editor.underline %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-italic" id="tx_italic">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.italic %> (Ctrl+I)"><%= i18n.editor.italic %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-strike" id="tx_strike">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.strike %> (Ctrl+D)"><%= i18n.editor.strike %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-slt-tbg tx-forecolor" id="tx_forecolor">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.forecolor %>"><%= i18n.editor.forecolor %></a>
						<a href="javascript:;" class="tx-arrow" title="<%= i18n.editor.selectForecolor %>"><%= i18n.editor.selectForecolor %></a>
					</div>
					<div id="tx_forecolor_menu" class="tx-menu tx-forecolor-menu tx-colorpallete" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-slt-brbg tx-backcolor" id="tx_backcolor">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.backcolor %>"><%= i18n.editor.backcolor %></a>
						<a href="javascript:;" class="tx-arrow" title="<%= i18n.editor.selectBackcolor %>"><%= i18n.editor.selectBackcolor %></a>
					</div>
					<div id="tx_backcolor_menu" class="tx-menu tx-backcolor-menu tx-colorpallete" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-align">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-alignleft" id="tx_alignleft">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.alignleft %> (Ctrl+,)"><%= i18n.editor.alignleft %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-aligncenter" id="tx_aligncenter">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.aligncenter %> (Ctrl+.)"><%= i18n.editor.aligncenter %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-alignright" id="tx_alignright">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.alignright %> (Ctrl+/)"><%= i18n.editor.alignright %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-rbg tx-alignfull" id="tx_alignfull">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.alignfull %>"><%= i18n.editor.alignfull %></a>
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-tab">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-indent" id="tx_indent">
						<a href="javascript:;" title="<%= i18n.editor.indent %> (Tab)" class="tx-icon"><%= i18n.editor.indent %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-rbg tx-outdent" id="tx_outdent">
						<a href="javascript:;" title="<%= i18n.editor.outdent %> (Shift+Tab)" class="tx-icon"><%= i18n.editor.outdent %></a>
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-list">
				<li class="tx-list">
					<div unselectable="on" class="tx-slt-31lbg tx-lineheight" id="tx_lineheight">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.lineheight %>"><%= i18n.editor.lineheight %></a>
						<a href="javascript:;" class="tx-arrow" title="<%= i18n.editor.selectLineheight %>"><%= i18n.editor.selectLineheight %></a>
					</div>
					<div id="tx_lineheight_menu" class="tx-lineheight-menu tx-menu" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-slt-31rbg tx-styledlist" id="tx_styledlist">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.styledlist %>"><%= i18n.editor.styledlist %></a>
						<a href="javascript:;" class="tx-arrow" title="<%= i18n.editor.selectStyledlist %>"><%= i18n.editor.selectStyledlist %></a>
					</div>
					<div id="tx_styledlist_menu" class="tx-styledlist-menu tx-menu" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-etc">
				<!--
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-emoticon" id="tx_emoticon">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.emoticon %>"><%= i18n.editor.emoticon %></a>
					</div>
					<div id="tx_emoticon_menu" class="tx-emoticon-menu tx-menu" unselectable="on">
					</div>
				</li>
				-->
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-emoticon" id="tx_inline-image">
						<a href="javascript:;" class="tx-icon" style="background-position: -157px -10px;" title="<%= i18n.editor.image %>"><%= i18n.editor.image %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-link" id="tx_link">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.link %> (Ctrl+K)"><%= i18n.editor.link %></a>
					</div>
					<div id="tx_link_menu" class="tx-link-menu tx-menu">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-specialchar" id="tx_specialchar">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.specialchar %>"><%= i18n.editor.specialchar %></a>
					</div>
					<div id="tx_specialchar_menu" class="tx-specialchar-menu tx-menu">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-table" id="tx_table">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.table %>"><%= i18n.editor.table %></a>
					</div>
					<div id="tx_table_menu" class="tx-table-menu tx-menu" unselectable="on">
						<div class="tx-menu-inner">
							<div class="tx-menu-preview">
							</div>
							<div class="tx-menu-rowcol">
							</div>
							<div class="tx-menu-deco">
							</div>
							<div class="tx-menu-enter">
							</div>
						</div>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-rbg tx-horizontalrule" id="tx_horizontalrule">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.horizontalrule %>"><%= i18n.editor.horizontalrule %></a>
					</div>
					<div id="tx_horizontalrule_menu" class="tx-horizontalrule-menu tx-menu" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-richtextbox" id="tx_richtextbox">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.richtextbox %>"><%= i18n.editor.richtextbox %></a>
					</div>
					<div id="tx_richtextbox_menu" class="tx-richtextbox-menu tx-menu">
						<div class="tx-menu-header">
							<div class="tx-menu-preview-area">
								<div class="tx-menu-preview">
								</div>
							</div>
							<div class="tx-menu-switch">
								<div class="tx-menu-simple tx-selected">
									<a><span><%= i18n.editor.simpleSelected %></span></a>
								</div>
								<div class="tx-menu-advanced">
									<a><span><%= i18n.editor.menuAdvanced %></span></a>
								</div>
							</div>
						</div>
						<div class="tx-menu-inner">
						</div>
						<div class="tx-menu-footer">
							<img class="tx-menu-confirm" src="<%= basePath %>./images/icon/editor/btn_confirm.gif?rv=1.0.1" alt=""/>
							<img class="tx-menu-cancel" hspace="3" src="<%= basePath %>./images/icon/editor/btn_cancel.gif?rv=1.0.1" alt=""/>
						</div>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-quote" id="tx_quote">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.quote %> (Ctrl+Q)"><%= i18n.editor.quote %></a>
					</div>
					<div id="tx_quote_menu" class="tx-quote-menu tx-menu" unselectable="on">
					</div>
				</li>
				<!--
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-background" id="tx_background">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.background %>"><%= i18n.editor.background %></a>
					</div>
					<div id="tx_background_menu" class="tx-menu tx-background-menu tx-colorpallete" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-rbg tx-dictionary" id="tx_dictionary">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.dictionary %>"><%= i18n.editor.dictionary %></a>
					</div>
				</li>
				-->
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-undo">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-undo" id="tx_undo">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.undo %> (Ctrl+Z)"><%= i18n.editor.undo %></a>
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-rbg tx-redo" id="tx_redo">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.redo %> (Ctrl+Y)"><%= i18n.editor.redo %></a>
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-right">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-nlrbg tx-advanced" id="tx_advanced">
						<a href="javascript:;" class="tx-icon" title="<%= i18n.editor.advanced %>"><%= i18n.editor.advanced %></a>
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-right">
				<li class="tx-list">
					<div id="tx_signature" class="utx_btn_b" style="display: inline;float: left; margin-right: 3px">
						<a class="utx_inrbtn" title="<%= i18n.signature %>" href="javascript:;"><%= i18n.signature %></a>
					</div>
				</li>
				<li class="tx-list">
					<div id="tx_stationery" class="utx_btn_b" style="display: inline;float: left; margin-right: 3px">
						<a class="utx_inrbtn" title="<%= i18n.stationery %>" href="javascript:;"><%= i18n.stationery %></a>
					</div>
				</li>
				<li class="tx-list">
					<div id="tx_document-form" class="utx_btn_b" style="display: inline;float: left; margin-right: 3px">
						<a class="utx_inrbtn" title="<%= i18n.form %>" href="javascript:;"><%= i18n.form %></a>
					</div>
				</li>
			</ul>
			<!-- 사이드바/우측영역에 있던 HTML checkbox를 툴바로 이동시킴 -->
			<ul class="tx-bar tx-bar-right">
				<li class="tx-list" style="padding-top: 0px;">
					<div unselectable="on" class="tx-switchtoggle" id="tx_switchertoggle">
						<a href="javascript:;" title="<%= i18n.editor.switchertoggle %>"><%= i18n.editor.editor %></a>
					</div>
				</li>
			</ul>
		</div>
	</div>
	<!-- 툴바 - 기본 끝 --><!-- 툴바 - 더보기 시작 -->
	<div id="tx_toolbar_advanced" class="tx-toolbar tx-toolbar-advanced">
		<div class="tx-toolbar-boundary">
			<ul class="tx-bar tx-bar-left">
				<li class="tx-list">
					<div class="tx-tableedit-title">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-align">
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-lbg tx-mergecells" id="tx_mergecells">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.mergecells %>"><%= i18n.editor.mergecells %></a>
					</div>
					<div id="tx_mergecells_menu" class="tx-mergecells-menu tx-menu" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-bg tx-insertcells" id="tx_insertcells">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.insertcells %>"><%= i18n.editor.insertcells %></a>
					</div>
					<div id="tx_insertcells_menu" class="tx-insertcells-menu tx-menu" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div unselectable="on" class="tx-btn-rbg tx-deletecells" id="tx_deletecells">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.deletecells %>"><%= i18n.editor.deletecells %></a>
					</div>
					<div id="tx_deletecells_menu" class="tx-deletecells-menu tx-menu" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left tx-group-align">
				<li class="tx-list">
					<div id="tx_cellslinepreview" unselectable="on" class="tx-slt-70lbg tx-cellslinepreview">
						<a href="javascript:;" title="<%= i18n.editor.cellslinepreview %>"></a>
					</div>
					<div id="tx_cellslinepreview_menu" class="tx-cellslinepreview-menu tx-menu" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div id="tx_cellslinecolor" unselectable="on" class="tx-slt-tbg tx-cellslinecolor">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.cellslinecolor %>"><%= i18n.editor.cellslinecolor %></a>
						<div class="tx-colorpallete" unselectable="on">
						</div>
					</div>
					<div id="tx_cellslinecolor_menu" class="tx-cellslinecolor-menu tx-menu tx-colorpallete" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div id="tx_cellslineheight" unselectable="on" class="tx-btn-bg tx-cellslineheight">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.cellslineheight %>"><%= i18n.editor.cellslineheight %></a>
					</div>
					<div id="tx_cellslineheight_menu" class="tx-cellslineheight-menu tx-menu" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div id="tx_cellslinestyle" unselectable="on" class="tx-btn-bg tx-cellslinestyle">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.cellslinestyle %>"><%= i18n.editor.cellslinestyle %></a>
					</div>
					<div id="tx_cellslinestyle_menu" class="tx-cellslinestyle-menu tx-menu" unselectable="on">
					</div>
				</li>
				<li class="tx-list">
					<div id="tx_cellsoutline" unselectable="on" class="tx-btn-rbg tx-cellsoutline">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.cellsoutline %>"><%= i18n.editor.cellsoutline %></a>
					</div>
					<div id="tx_cellsoutline_menu" class="tx-cellsoutline-menu tx-menu" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left">
				<li class="tx-list">
					<div id="tx_tablebackcolor" unselectable="on" class="tx-btn-lrbg tx-tablebackcolor" style="background-color:#9aa5ea;">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.tablebackcolor %>"><%= i18n.editor.tablebackcolor %></a>
					</div>
					<div id="tx_tablebackcolor_menu" class="tx-tablebackcolor-menu tx-menu tx-colorpallete" unselectable="on">
					</div>
				</li>
			</ul>
			<ul class="tx-bar tx-bar-left">
				<li class="tx-list">
					<div id="tx_tabletemplate" unselectable="on" class="tx-btn-lrbg tx-tabletemplate">
						<a href="javascript:;" class="tx-icon2" title="<%= i18n.editor.tabletemplate %>"><%= i18n.editor.tabletemplate %></a>
					</div>
					<div id="tx_tabletemplate_menu" class="tx-tabletemplate-menu tx-menu tx-colorpallete" unselectable="on">
					</div>
				</li>
			</ul>
		</div>
	</div>
	<!-- 툴바 - 더보기 끝 -->
	<!-- 편집영역 시작 -->
	<div id="tx_canvas" class="tx-canvas">
		<div id="tx_loading" class="tx-loading">
			<div>
				<img src="<%= basePath %>images/icon/editor/loading2.png" width="113" height="21" align="absmiddle"/>
			</div>
		</div>
		<div id="tx_canvas_wysiwyg_holder" class="tx-holder" style="display:block;">
			<iframe id="tx_canvas_wysiwyg" name="tx_canvas_wysiwyg" allowtransparency="true" frameborder="0">
			</iframe>
		</div>
		<div class="tx-source-deco">
			<div id="tx_canvas_source_holder" class="tx-holder">
				<textarea id="tx_canvas_source" rows="30" cols="30">
				</textarea>
			</div>
		</div>
		<div id="tx_canvas_text_holder" class="tx-holder">
			<textarea id="tx_canvas_text" rows="30" cols="30">
			</textarea>
		</div>
	</div>
	<!-- 높이조절 Start -->
	<div id="tx_resizer" class="tx-resize-bar">
		<div class="tx-resize-bar-bg">
		</div>
		<img id="tx_resize_holder" src="<%= basePath %>images/icon/editor/skin/01/btn_drag01.gif" width="58" height="12" unselectable="on" alt="" />
	</div>
	<!--
	<div class="tx-side-bi" id="tx_side_bi">
		<div style="text-align: right;">
			<img hspace="4" height="14" width="78" align="absmiddle" src="<%= basePath %>images/icon/editor/editor_bi.png" />
		</div>
	</div>
	-->
	<!-- 편집영역 끝 -->
	<!-- 첨부박스 시작 --><!-- 파일첨부박스 Start -->
	<div id="tx_attach_div" class="tx-attach-div">
		<div id="tx_attach_txt" class="tx-attach-txt">
			<%= i18n.editor.attachments %>
		</div>
		<div id="tx_attach_box" class="tx-attach-box">
			<div class="tx-attach-box-inner">
				<div id="tx_attach_preview" class="tx-attach-preview">
					<p>
					</p>
					<img src="<%= basePath %>images/icon/editor/pn_preview.gif" width="147" height="108" unselectable="on"/>
				</div>
				<div class="tx-attach-main">
					<div id="tx_upload_progress" class="tx-upload-progress">
						<div>
							0%
						</div>
						<p>
							<%= i18n.editor.uploadingFiles %>
						</p>
					</div>
					<ul class="tx-attach-top">
						<li id="tx_attach_delete" class="tx-attach-delete">
							<a><%= i18n.editor.attachDelete %></a>
						</li>
						<li id="tx_attach_size" class="tx-attach-size">
							<%= i18n.editor.file %>: <span id="tx_attach_up_size" class="tx-attach-size-up"></span>/<span id="tx_attach_max_size"></span>
						</li>
						<li id="tx_attach_tools" class="tx-attach-tools">
						</li>
					</ul>
					<ul id="tx_attach_list" class="tx-attach-list">
					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- 첨부박스 끝 -->
</script>
<script type="text/template" id="signature-template">
	<div class="type_a sign_select"> 
		<h5>
			<%= i18n.signature %>
		</h5> 
		<ul class="selector"> 
			<li <%= user.USERS_SIGNATURE == 'N' ? 'class="chk"' : '' %>><a href="#" data-id="0"><%= i18n.clearStationery %></a></li> 
<%
		for (var i = 0; i < signatures.length; i++) {
%>
			<li <%= user.USERS_SIGNATURE == 'Y' && signatures[i].SIGN_DEFAULT ? 'class="chk"' : '' %>>
				<a href="#" data-id="<%- signatures[i].SIGN_IDX %>"><%- signatures[i].SIGN_TITLE %></a>
			</li> 
<%
		}
%>
		</ul> 
	</div> 
</script>
<script type="text/template" id="stationery-template">
	<div class="hTitle">
		<h5><%= i18n.stationery %></h5>
		<button type="button" class="s_bt"><%= i18n.clearStationery %></button>
	</div>
	<div class="tList">
		<ul class="letter_list clearfix mt10">
<%
	for (var i = 0; i < items.length; i++) {
		var url = items[i].url;
		if (popup) {
			url = '../' + url;
		}
%>
			<li><a href="#"><img src="<%= url %>" width="63" height="78" alt=""></a></li>
<%
	} // end for
%>
		</ul>
		<!-- #stationery-pagination-template -->
		<div class="ad_btn_area">
		</div>
	</div>
</script>
<script type="text/template" id="stationery-pagination-template">
<% if (info.currentPage > info.firstPage) { %>
	<a href="#" title="<%= i18n.previousPage %>">
<% } else { %>
	<a href="#" title="<%= i18n.previousPage %>" disabled>
<% } %>
		<span class="ic_main ic_l_prev">
			<span class="mc-blind"><%= i18n.previousPage %></span>
		</span>
	</a>
	<ol>
<%
	_.each(info.pageSet, function(page) {
		if (info.currentPage == page) {
%>
		<li class="on"><a href="#"><%= page %></a></li>
<%
		} else {
%>
		<li><a href="#"><%= page %></a></li>
<%
		}
	});
%>
	</ol>
<% if (info.currentPage < info.totalPages) { %>
	<a href="#" title="<%= i18n.nextPage %>">
<% } else { %>
	<a href="#" title="<%= i18n.nextPage %>" disabled>
<% } %>
		<span class="ic_main ic_l_next">
			<span class="mc-blind"><%= i18n.previous %></span>
		</span>
	</a>
</script>
<script type="text/template" id="form-template">
	<div class="adl_header">
		<div class="tc">
			<h4>
				<span class="title"><%= i18n.form %></span>
				<label for="search-field" class="search_word">
					<span class="mr5"><%= i18n.search.text %></span>
					<select name="search-field" id="word_search">
						<option value="subject" <%= searchField == 'subject' ? 'selected' : '' %>><%= i18n.subject %></option>
						<option value="content" <%= searchField == 'content' ? 'selected' : '' %>><%= i18n.contents %></option>
					</select>
					<input type="text" name="search-term" title="<%= i18n.search.text %>" value="<%- searchTerm %>"/>
					<button class="button_s" id="search-forms"><%= i18n.search.find %></button>
				</label>
			</h4>
		</div>
	</div>
	<div class="adl_contents">
		<div class="box_tbl">
			<table class="set_tbl mail_tbl search">
				<caption>
					<span class="mc-blind"><%= i18n.formList %></span>
				</caption>
				<colgroup>
					<col class="col_1" />
					<col class="col_2" />
				</colgroup>
				<thead>
					<tr>
						<th scope="col"><%= i18n.no %></th>
						<th scope="col" class="b_none"><%= i18n.subject %></th>
					</tr>
				</thead>
				<tbody>
<%
	var number = (currentPage - 1) * perPage + 1;
	for (var i = 0; i < forms.length; i++) {
		var form = forms[i];
%>
					<tr>
						<td class="vm"><%= number++ %></td>
						<td class="tl">
							<a href="#" data-id="<%= form.FORMLETTER_IDX %>"><%= form.FORMLETTER_SUBJECT %></a>
						</td>
					</tr>
<%
	} // end for
%>
				</tbody>
			</table>
		</div>
		<div class="mc-paginate">
		</div>
	</div>
</script>
<script type="text/template" id="form-pagination-template">
<% if (info.firstPage != info.currentPage) { %>
	<a href="#" class="pre_end" title="<%= i18n.firstPage %>">
<% } else { %>
	<a href="#" class="pre_end_n" title="<%= i18n.firstPage %>">
<% } %>
		<span class="mc-blind"><%= i18n.firstPage %></span>
	</a>

<% if (info.currentPage > info.firstPage) { %>
	<a href="#" class="pre" title="<%= i18n.previousPage %>">
<% } else { %>
	<a href="#" class="pre_n" title="<%= i18n.previousPage %>">
<% } %>
		<span class="mc-blind"><%= i18n.previousPage %></span>
	</a>

	<span class="mc-paging_num">
<% _.each(info.pageSet, function(page) { %>
	<% if (info.currentPage == page) { %>
		<strong><%= page %></strong>
	<% } else { %>
		<a href="#"><%= page %></a>
	<% } %>
<% }); %>
	</span>

<% if (info.currentPage < info.totalPages) { %>
	<a href="#" class="next" title="<%= i18n.nextPage %>">
<% } else { %>
	<a href="#" class="next_n" title="<%= i18n.nextPage %>">
<% } %>
		<span class="mc-blind"><%= i18n.nextPage %></span>
	</a>

<% if (info.lastPage != info.currentPage) { %>
	<a href="#" class="next_end" title="<%= i18n.lastPage %>">
<% } else { %>
	<a href="#" class="next_end_n" title="<%= i18n.lastPage %>">
<% } %>
		<span class="mc-blind"><%= i18n.lastPage %></span>
	</a>
</script>
<script type="text/template" id="delivery-status-info-template">
	<h4 class="hTitle"><%= i18n.recallMailGuide %></h4>
	<ul class="sTipTxt">
		<li><%= i18n.recallMailGuideItem1 %></li>
		<li><%= i18n.recallMailGuideItem2 %></li>
		<li><%= i18n.recallMailGuideItem3 %>.</li>
	</ul>
	<ul class="sTipTxt5">
		<li><%= i18n.recallMailGuideItem4 %></li>
		<li><%= i18n.recallMailGuideItem5 %></li>
	</ul>
	<div class="addButton">
		<button type="button"><%= i18n.confirm %></button>
	</div>
</script>
<script type="text/template" id="delivery-status-list-template">
	<!-- LIST ITEM -->
	<h4 class="mc-blind"><%= i18n.deliveryStatusSortField %></h4>
	<ul class="mc-mailListItem send_ok">
		<li class="mc-check">
			<input class="mCheck" type="checkbox">
			<label class="mc-blind"><%= i18n.selectAllDeliveryStatus %></label>
		</li>
		<li class="mc-from">
			<span><%= i18n.to %></span>
		</li>
		<li class="mc-title">
			<span><%= i18n.subject %></span>
		</li>
		<li class="mc-date">
			<span><%= i18n.sentDate %></span>
		</li>
		<li class="mc-size">
			<span><%= i18n.receivedDate %></span>
		</li>
		<li class="mc-cancle">
			<span><%= i18n.recallMail %></span>
		</li>
	</ul>
	<!-- //LIST ITEM -->

	<!-- LIST -->
	<div class="mc-listWrap send_ok">
		<h4 class="mc-blind">수신확인 목록</h4>
		<ol class="mc-mailList send_ok">
			<!-- #delivery-status-item-template -->
		</ol>
	</div>
	<!-- //LIST -->

	<!-- PAGINATE #mail-pagination-template -->
	<div class="mc-paginate">
	</div>
	<!-- //PAGINATE -->
</script>
<script type="text/template" id="delivery-status-item-template">
<%
	var isToday = function(date) {
		if (!date) {
			return false;
		}
		var now = new Date();
		var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
		if (today.getTime() == date.getTime()) {
			return true;
		}
		return false;
	};

	var formatDate = function(M_TIME) {
		var date, parsedDate;
		try {
			parsedDate = $.format.parseDate(M_TIME);
		} catch (e) {
			return '';
		}
		date = parsedDate && parsedDate.date;
		if (isToday(date)) {
			date = $.format.date(M_TIME, 'HH:mm:ss');
		} else {
			date = $.format.date(M_TIME, 'yy-MM-dd HH:mm:ss');
		}
		return date;
	};
%>
	<ul class="mc-mInfo">
<%
	if (deliveryStatus.MAIL_RECONF_CNT != 0) { 
%>
		<li class="mc-check">
			<input name="" type="checkbox" class="mCheck" value="<%- deliveryStatus.MAIL_RECONF_IDX %>">
			<label class="mc-blind">메일 선택</label>
		</li>
<%
	}
%>
		<li class="mc-sencon">
		<%- $.format.date(deliveryStatus.MAIL_RECONF_SDATE,'yy-MM-dd') %>
<% 
	if (deliveryStatus.MAIL_RECONF_STATE == 2) {
%>
			<span class="reser_txt"><%= i18n.scheduled %></span>
<%
	}
%>
		</li>
		<li class="mc-recon">
<%
	if (deliveryStatus.MAIL_RECONF_CNT == 1 || deliveryStatus.MAIL_RECONF_CNT == 0) {
		if (deliveryStatus.MAIL_RECONF_STATE == 0) {
%>
			<span class="ic_not_read"><span class="blind">메일</span></span><%= i18n.unRead %>
<% 
		} else if (deliveryStatus.MAIL_RECONF_STATE == 1) {
%>
			<%- formatDate(deliveryStatus.MAIL_RECONF_RDATE) %>
<% 
		} else if (deliveryStatus.MAIL_RECONF_STATE == 2) {
%> 
			<span class="ic_timer"><span class="blind">시계</span></span><%= i18n.delivery.before %>
<%
		} else if (deliveryStatus.MAIL_RECONF_STATE == 3) {
%>
			<span class="ic_fail_mail"><span class="blind">메일</span></span><%= i18n.delivery.failed %>
<% 
		} else if (deliveryStatus.MAIL_RECONF_STATE == 4 && deliveryStatus.MAIL_RECONF_TO.indexOf(user.DOMAIN) != -1) {
%>
			<span class="ic_send_fail"><span class="blind">메일</span></span><%= i18n.recallMail %>
<% 
		} else if (deliveryStatus.MAIL_RECONF_STATE == 5) {
%>
			<span class="ic_arrow_c"><span class="blind">메일</span></span><%= i18n.delivery.cancelDelayDelivery %>
<% 	
		}
	}
%>
		</li>
		<li class="mc-cancle">
<%
	var includeSubModel = paginator.find(function(model) {
		var hasOwnSubList = (model.get('subDeliveryStatusList') != null && model.get('subDeliveryStatusList').length > 1);
		var isGroup = (model.get('MAIL_RECONF_GROUP') == deliveryStatus.MAIL_RECONF_GROUP);
		return hasOwnSubList && isGroup;
	});

	var readCount = 0;
	if (includeSubModel) {
		var subList = includeSubModel.get('subDeliveryStatusList');
		for (var i = 0; i < subList.length; i++) {
			if (subList[i].MAIL_RECONF_STATE == 0 && subList[i].MAIL_RECONF_TO.indexOf(user.DOMAIN) != -1) {
				readCount++;
			}
		}
	}
%>
<%
	if ((deliveryStatus.MAIL_RECONF_STATE == 0 && deliveryStatus.MAIL_RECONF_CNT < 2)
			&& deliveryStatus.MAIL_RECONF_TO.indexOf(user.DOMAIN) != -1) {
%>
			<a href="#" class="cancelDeliveryStatus">
				<span class="ic_del"><span class="blind"><%= i18n.recallMail %></span></span><%= i18n.recallMail %>
			</a>
<%
	} else if (deliveryStatus.MAIL_RECONF_STATE == 2 && deliveryStatus.MAIL_RECONF_CNT > 0) {
%>
			<a href="#" class="editReservationMail"><%= i18n.modify %></a>&nbsp;
			<a href="#" class="cancelReservationMail"><%= i18n.cancel %></a>
<%
	} else if (deliveryStatus.MAIL_RECONF_CNT > 1 && readCount > 0) {
%>
			<a href="#" class="cancelDeliveryStatus" data-is-sub-list="true">
				<span class="ic_del"><span class="blind"><%= i18n.recallMail %></span></span><%= i18n.recallMail %>
			</a>
<%
	}
%>
		</li>
	</ul>
	<div class="mc-mTitle">
		<div class="mc-name">
			<span class="mc-blind">보낸이</span>
<%
	if (deliveryStatus.MAIL_RECONF_CNT < 2) {
%>
			<a href="#compose?to=<%= encodeURIComponent(deliveryStatus.MAIL_RECONF_TO) %>"><%- deliveryStatus.MAIL_RECONF_TO %></a>
<%
	} else {
%>
			<a href="#" class="toggleDeliverySubView" group="<%- deliveryStatus.MAIL_RECONF_GROUP %>" idx="<%- deliveryStatus.MAIL_RECONF_IDX %>">
				<span class="ic_send_off"><span class="blind">펼치기</span></span><%- deliveryStatus.MAIL_RECONF_CNT %><%= i18n.delivery.recipients %>
			</a>
<%
	}
%>
		</div>
		<div class="mc-subject">
			<a href="#mboxes/<%- deliveryStatus.MBOX_IDX %>/mails/<%- deliveryStatus.M_IDX %>?delivery-status=0" class="delivery-status-mail">
				<span class="mail_title">
					<span class="mc-blind"><%= i18n.subject %></span>
					<%- deliveryStatus.MAIL_RECONF_SUBJECT %>
				</span>
			</a>
			<a href="#" title="<%= i18n.viewInNewWindow %>" class="icoNewWindow" onclick="window.open('popup/#mboxes/<%= deliveryStatus.MBOX_IDX %>/mails/<%- deliveryStatus.M_IDX %>','','scrollbars=yes,width=900,height=680'); return false;">
				<span class="mc-blind"><%= i18n.viewInNewWindow %></span>
			</a>
		</div>
	</div>
</script>
<script type="text/template" id="send-secure-mail-template">
<%
	var getRecipients = function(addresslist) {
		var rcpts = [];
		try {
			var addrs = InternetAddress.parseHeader(addresslist, false);
			for (var i = 0; i < addrs.length; i++) {
				if (addrs[i].getPersonal())
					rcpts.push('<strong>' + addrs[i].getPersonal() + '</strong> &lt;' + addrs[i].getAddress() + '&gt;');
				else
					rcpts.push(addrs[i].getAddress());
			}
		} catch (error) {
		}
		return rcpts;
	};
	var recipients = [];
	recipients = recipients.concat(getRecipients(data.to));
	recipients = recipients.concat(getRecipients(data.cc));
	recipients = recipients.concat(getRecipients(data.bcc));
%>
	<div class="adl_header adl_hd_ico clearfix">
		<h4>
			<%= i18n.secureMail.sendSecureMail %>
			<p class="blue">
				<%= i18n.secureMail.recipients %>: <%= recipients.join(', ') %>
			</p>
		</h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.secureMail.close %></span></span>
		</div>
	</div>
	<div class="adl_contents">
		<div class="tbl_wrap">
			<table class="set_tbl set_input">
				<tbody>
					<tr>
						<td class="">
							<label for="secureMailPassword" class="blind"><%= i18n.secureMail.password %></label>
							<input type="password" name="password" id="secureMailPassword" placeholder="<%= i18n.secureMail.password %>">
						</td>
					</tr>
					<tr>
						<td class="">
							<label for="secureMailConfirmPassword" class="blind"><%= i18n.secureMail.confirmPassword %></label>
							<input type="password" name="confirmPassword" id="secureMailConfirmPassword" placeholder="<%= i18n.secureMail.confirmPassword %>">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<div class="tbl_wrap">
			<table class="set_tbl set_input">
				<tbody>
					<tr>
						<td>
							<label for="secureMailPasswordHint" class="blind"><%- i18n.secureMail.passwordHint %></label>
							<input type="text" name="passwordHint" id="secureMailPasswordHint" placeholder="<%- i18n.secureMail.passwordHint %>">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<p class="info_txt">&bull; <%- i18n.secureMail.passwordHintGuide %></p>
		<div class="tbl_wrap">
			<table class="set_tbl set_input">
				<tbody>
					<tr>
						<td>
							<label for="secureMailContact" class="blind"><%- i18n.secureMail.contact %></label>
							<input type="text" name="contact" id="secureMailContact" placeholder="<%- i18n.secureMail.contact %>">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<p class="info_txt">&bull; <%- i18n.secureMail.contactGuide %></p>
		<div class="detail_set">
			<dl class="clearfix">
				<dt><%- i18n.secureMail.readingPeriod %></dt>
				<dd>
					<select name="period" id="secureMailReadingPeriod">
						<option value="custom"><%- i18n.secureMail.custom %></option>
						<option value="unlimited"><%- i18n.secureMail.unlimited %></option>
					</select>
				</dd>
				<dd>
					<label for="secureMailReadingStartDate" class="blind"><%= i18n.secureMail.readingStartDate %></label>
					<input type="text" name="startDate" id="secureMailReadingStartDate">
					<span class="hyphen">-</span>
				</dd>
				<dd class="last">
					<label for="secureMailReadingEndDate" class="blind"><%= i18n.secureMail.readingEndDate %></label>
					<input type="text" name="endDate" id="secureMailReadingEndDate">
				</dd>
			</dl>
			<dl class="clearfix">
				<dt><%- i18n.secureMail.readingLimit %></dt>
				<dd>
					<select name="readingLimitSelect" id="secureMailReadingLimit">
						<option value="custom"><%- i18n.secureMail.custom %></option>
						<option value="unlimited"><%- i18n.secureMail.unlimited %></option>
					</select>
				</dd>
				<dd>
					<label for="secureMailReadingLimit" class="blind"><%= i18n.secureMail.readingTimes %></label>
					<input type="text" name="readingLimit" id="secureMailReadingLimit"><%= i18n.secureMail.readingTimesSuffix %>
				</dd>
			</dl>
		</div>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button type="button" title="<%= i18n.secureMail.send %>" class="b"><%= i18n.secureMail.send %></button>
			<button type="button" title="<%= i18n.secureMail.cancel %>" class="layer_cancle"><%= i18n.secureMail.cancel %></button>
		</div>
	</div>
</script>
<script type="text/template" id="secure-mail-info-template">
<%
	var startDate = items[0].startDate;
	var endDate = items[0].endDate;
	try {
		var parsedDate = $.format.parseDate(startDate).date;
		if (parsedDate.getFullYear() == 1970 && parsedDate.getMonth() == 0 && parsedDate.getDate() == 1) {
			startDate = '';
			endDate = i18n.secureMail.indefinite;
		} else {
			startDate = $.format.date(startDate, 'yyyy. MM. dd (E)');
			endDate = $.format.date(endDate, 'yyyy. MM. dd (E)');
		}
	} catch (error) {
		// ignore
	}
	var readingLimit = items[0].readingLimit;
	if (readingLimit === 0)
		readingLimit = i18n.secureMail.unlimited;
	else
		readingLimit = readingLimit + i18n.secureMail.timesSuffix;
	var readingTimes = (function() {
		var times = 0;
		for (var i = 0; i < items.length; i++) {
			times += items[i].readingTimes;
		}
		return times;
	})();
%>
	<colgroup>
		<col width="150px">
		<col width="90px">
		<col width="*">
		<col width="80px">
	</colgroup>
	<tr>
		<th scope="row" rowspan="2"><%= i18n.secureMail.information %></th>
		<td><%= i18n.secureMail.period %></td>
		<td class="se_date">
			<strong><%= startDate %> ~ <%= endDate %></strong>
		</td>
		<td rowspan="2" class="tar">
			<button class="b button_b"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buCancel_b"><%= i18n.secureMail.recall %></button>
		</td>
	</tr>
	<tr>
		<td><%= i18n.secureMail.times %></td>
		<td>
			<strong><span class="blue"><%= readingTimes %></span><%= i18n.secureMail.timesSuffix %> / <%= readingLimit %></strong>
			<button class="button_s ml5"><%= i18n.secureMail.readings %> <img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buMore"></button>
		</td>
	</tr>
</script>
<script type="text/template" id="secure-mail-readings-template">
	<div class="adl_header clearfix">
		<h4><%= i18n.secureMail.detailsOfReadings %></h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.secureMail.close %></span></span>
		</div>
	</div>
	<div class="adl_contents">
		<div>
			<table class="pop_tbl">
				<colgroup>
					<col width="10%">
					<col width="*">
					<col width="25%">
					<col width="20%">
				</colgroup>
				<thead>
					<tr>
						<th scope="col"><%= i18n.secureMail.no %></th>
						<th scope="col"><%= i18n.secureMail.readers %></th>
						<th scope="col"><%= i18n.secureMail.dateTime %></th>
						<th scope="col"><%= i18n.secureMail.ip %></th>
					</tr>
				</thead>
				<tbody>
<% for (var i = 0; i < items.length; i++) { %>
					<tr>
						<td><%= (i + 1) %></td>
						<td class="tal"><%- items[i].recipient %></td>
						<td><%- $.format.date(items[i].readTime, 'yyyy.MM.dd HH:mm:ss') %></td>
						<td><%- items[0].ip %></td>
					</tr>
<% } %>
				</tbody>
			</table>
		</div>
	</div>
</script>
<script type="text/template" id="blob-password-template">
	<div class="adl_header adl_hd_ico clearfix">
		<h4>
			<%= i18n.blobAttachmentPassword.setPassword %>
			<p class="blue">
				<%= i18n.blobAttachmentPassword.enterPassword %>
			</p>
		</h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.close %></span></span>
		</div>
	</div>
	<div class="adl_contents">
		<div class="tbl_wrap">
			<table class="set_tbl set_input">
				<tbody>
					<tr>
						<td>
							<label class="blind" for="blobPassword"><%= i18n.blobAttachmentPassword.password %></label>
							<input name="password" id="blobPassword" type="password" placeholder="<%= i18n.blobAttachmentPassword.password %>">
						</td>
					</tr>
					<tr>
						<td>
							<label class="blind" for="blobConfirmPassword"><%= i18n.blobAttachmentPassword.confirmPassword %></label>
							<input name="confirmPassword" id="blobConfirmPassword" type="password" placeholder="<%= i18n.blobAttachmentPassword.confirmPassword %>">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button title="<%= i18n.blobAttachmentPassword.savePassword %>" class="b"><%= i18n.blobAttachmentPassword.save %></button>
			<button title="<%= i18n.blobAttachmentPassword.cancel %>" class="layer_cancle"><%= i18n.blobAttachmentPassword.cancel %></button>
		</div>
	</div>
</script>
<script type="text/template" id="search-mbox-register-template">
<%
	var terms = {};
	if (searchMbox.terms) {
		var searchTerms = searchMbox.terms.split('&');
		for (var i = 0; i < searchTerms.length; i++) {
			var key = searchTerms[i].substring(searchTerms[i].indexOf('.') + 1, searchTerms[i].indexOf('='));
			var value = searchTerms[i].substring(searchTerms[i].indexOf('=') + 1);
			terms[key] = decodeURIComponent(value);
		}
	}
%>
	<div class="adl_header clearfix">
		<h4><%= i18n.searchMbox.create %></h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.close %></span></span>
		</div>
		<br><br>
		<span class="ment"><%= i18n.searchMbox.pharse %></span>
	</div>
	<div class="adl_contents">
		<div class="adl_bd schb_tit">
			<h5><%= i18n.searchMbox.name %></h5>
			<p>
				<input name="" value="<%- searchMbox.name %>" class="search-mbox-name" type="text" style="width: 120px">
			</p>
		</div>
		<div class="adl_bd">
			<h5><%= i18n.searchMbox.selectMbox %></h5>
			<dl class="adl_bx">
				<dt><%= i18n.search.mbox %></dt>
				<dd>
					<select name="" class="search-mbox-select" style="width: 131px">
					</select>
				</dd>
			</dl>
			<dl class="adl_bx">
				<dt><%= i18n.search.excludeTrashAndSpam.label %></dt>
				<dd>
					<input name="excludeTrashAndSpam" type="radio" value="false" id="trash_in"
						<%= !terms.excludeTrashAndSpam || terms.excludeTrashAndSpam == 'false' ? 'checked' : '' %> >
					<label for="trash_in"><%= i18n.search.excludeTrashAndSpam.no %></label>
					<input name="excludeTrashAndSpam" type="radio" value="true" id="trash_out"
						<%= terms.excludeTrashAndSpam == 'true'? 'checked' : '' %> >
					<label for="trash_out"><%= i18n.search.excludeTrashAndSpam.yes %></label>
				</dd>
			</dl>
		</div>
		<div class="adl_bd schb_word">
			<h5><%= i18n.searchMbox.searchWord %></h5>
			<dl class="adl_bx">
				<dt><%= i18n.search.from %></dt>
				<dd>
					<input name="" value="<%- terms.from %>" type="text" class="search-mbox-from" style="width: 121px">
					<!-- <input name="" type="checkbox" value="" id="or1">
					<label for="or1"><strong>OR</strong></label> -->
				</dd>
			</dl>
			<dl class="adl_bx">
				<dt><%= i18n.search.to %></dt>
				<dd>
					<select name="" class="search-mbox-to-options" style="width: 131px">
						<option value="to+cc" <%= terms.to && terms.cc ? 'selected' : '' %> ><%= i18n.search.to %>+<%= i18n.search.cc %></option>
						<option value="to" <%= terms.to && !terms.cc ? 'selected' : '' %>  ><%= i18n.search.to %></option>
					</select>
					<input name="" value="<%- terms.to %>" type="text" class="search-mbox-to" style="width: 107px">
					<!-- <input name="" type="checkbox" value="" id="or1">
					<label for="or1"><strong>OR</strong></label> -->
				</dd>
			</dl>
			<dl class="adl_bx">
				<dt><%= i18n.search.contents %></dt>
				<dd>
					<select name="" class="search-mbox-contents-options" style="width: 131px">
						<option value="subject+body" <%= terms.subject && terms.body ? 'selected' : '' %> ><%= i18n.search.subject %>+<%= i18n.search.body %></option>
						<option value="subject" <%= terms.subject && !terms.body ? 'selected' : '' %> ><%= i18n.search.subject %></option>
						<option value="body" <%= !terms.subject && terms.body ? 'selected' : '' %> ><%= i18n.search.body %></option>
						<option value="attachments" <%= terms.attachments ? 'selected' : '' %> ><%= i18n.search.attachments %></option>
						<option value="all" <%= terms.subject && terms.body && terms.attachments ? 'selected' : '' %>><%= i18n.search.all %></option>
					</select>
					<input name="" value="<%- terms.subject || terms.body || terms.attachments %>" type="text" class="search-mbox-contents" style="width: 107px">
				</dd>
			</dl>
		</div>
		<div class="adl_bd schb_date">
			<h5><%= i18n.searchMbox.advancedTerms %></h5>
			<dl class="adl_bx">
				<dt><%= i18n.search.attachments %></dt>
				<dd>
					<input name="attachedStatus" type="radio" value="any" id="any"
						<%= !terms.attached ? 'checked' : '' %> >
					<label for="any"><%= i18n.searchMbox.any %></label>&nbsp;
					<input name="attachedStatus" type="radio" value="have" id="have"
						<%= terms.attached == 'have' ? 'checked' : '' %> >
					<label for="have"><%= i18n.searchMbox.have %></label>&nbsp;
					<input name="attachedStatus" type="radio" value="none" id="none"
						<%= terms.attached == 'none' ? 'checked' : '' %> >
					<label for="none"><%= i18n.searchMbox.none %></label>
				</dd>
			</dl>
			<dl class="adl_bx">
				<dt><%= i18n.searchMbox.size %></dt>
				<dd>
					<input name="" type="text" value="<%= terms.size ? (terms.size / 1024 / 1024) : '' %>" class="search-mbox-size" style="width: 25px"> MB&nbsp
					<input name="sizeRange" type="radio" value="over" id="over"
						<%= !terms.sizeRange || terms.sizeRange == 'over' ? 'checked' : '' %> >
					<label for="over"><%= i18n.searchMbox.over %></label>&nbsp;
					<input name="sizeRange" type="radio" value="under" id="under"
						<%= terms.sizeRange == 'under' ? 'checked' : '' %> >
					<label for="under"><%= i18n.searchMbox.under %></label>
				</dd>
			</dl>
			<dl class="adl_bx">
				<dt><%= i18n.search.period %></dt>
				<dd>
					<select name="" class="search-period-select">
						<option value="ALL"><%= i18n.search.all %><%= i18n.search.period %></option>
						<option value="1W" <%= terms.period == '1W' ? 'selected' : '' %>><%= i18n.searchMbox.withinWeek %></option>
						<option value="10D" <%= terms.period == '10D' ? 'selected' : '' %>><%= i18n.searchMbox.within10Days %></option>
						<option value="15D" <%= terms.period == '15D' ? 'selected' : '' %>><%= i18n.searchMbox.within15Days %></option>
						<option value="1M" <%= terms.period == '1M' ? 'selected' : '' %>><%= i18n.searchMbox.withinMonth %></option>
						<option value="3M" <%= terms.period == '3M' ? 'selected' : '' %>><%= i18n.searchMbox.within3Months %></option>
						<option value="6M" <%= terms.period == '6M' ? 'selected' : '' %>><%= i18n.searchMbox.within6Months %></option>
						<option value="1Y" <%= terms.period == '1Y' ? 'selected' : '' %>><%= i18n.searchMbox.withinYear %></option>
						<option value="CUSTOM" <%= terms.startDate || terms.endDate ? 'selected' : '' %>><%= i18n.search.custom %></option>
					</select>
					<input name="" type="text" value="<%= terms.startDate %>" class="ipt_text search-start-date" style="width: 75px;"
						<%= !terms.startDate ? 'disabled' : '' %> >
					<span class="hyphen">-</span>
					<input name="" type="text" value="<%= terms.endDate %>" class="ipt_text search-end-date" style="width: 75px;"
						<%= !terms.endDate ? 'disabled' : '' %> >
					<p class="h4_txt2 mtb5"><%= i18n.searchMbox.periodDescription %></p>
				</dd>
			</dl>
		</div>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button type="button" class="layer_save" title="<%= i18n.save %>"><%= i18n.save %></button>
			<button type="button" class="layer_cancle" title="<%= i18n.cancel %>"><%= i18n.cancel %></button>
		</div>
	</div>
</script>
<script type="text/template" id="mail-geoip-trace-templete">
	<div class="adl_header clearfix">
		<h4><%= i18n.geoIp.ipList %></h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.close %></span></span>
		</div>
	</div>
	<div class="adl_contents">
		<table class="basic_tbl hrz">
			<colgroup>
				<col width="20%">
				<col width="auto">
				<col width="34%">
			</colgroup>
			<tr>
				<th><%= i18n.geoIp.hop %></th>
				<th>IP</th>
				<th><%= i18n.geoIp.countryName %></th>
			</tr>
<%
	for (var i = 0; i < mail.geoIps.length; i++) {
		var countryName = mail.geoIps[i].countryName;
		countryName = countryName && countryName.trim().length > 0 ? countryName : i18n.geoIp.noInformation;
%>
			<tr>
				<td><%= mail.geoIps[i].hop + 1 %></td>
				<td><%= mail.geoIps[i].ip %></td>
				<td><%= countryName %></td>
			</tr>
<%
	}
%>
		</table>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button type="button" title="<%= i18n.close %>"><%= i18n.close %></button>
		</div>
	</div>
</script>
<script type="text/template" id="label-add-template">
	<div class="adl_header clearfix">
		<h4><%= label.id ? i18n.label.modify : i18n.label.add %></h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind"><%= i18n.close %></span></span>
		</div>
	</div>
	<div class="adl_contents">
		<div class="tag_nm">
			<label><%= i18n.label.name %></label>
			<input name="labelName" type="text" class="label-name" value="<%- label.name %>">
		</div>
		<ul class="color_list">
<%	
		var colors = i18n.label.colors;
		for (var i = 0; i < colors.length; i++) {
			var selected = '';
			if (colors[i] == label.color)
				selected = 'selected';

%>
			<li class="label-color <%= selected %>">
				<input name="labelColor" type="radio" value="<%= colors[i] %>" class="input_rdo" 
					id="color_<%= colors[i] %>" <%= colors[i] == label.color ? 'checked="checked"' : '' %> >
				<label class="cl_box cc_<%= colors[i] %>" for="color_<%= colors[i] %>"><span class="blind"></span></label>
			</li>
<%
		}
%>

		</ul>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button type="button" class="layer_save" title="<%= i18n.save %>"><%= i18n.save %></button>
			<button type="button" class="layer_cancel" title="<%= i18n.cancel %>"><%= i18n.cancel %></button>
		</div>
	</div>
</script>
<script type="text/template" id="mail-overlay-template">
<%
	var url = 'img/loading_span_bg.png';
	var src = 'img/ico_ld_cm.gif';
	if (popup) {
		url = '../img/loading_span_bg.png';
		src = '../img/ico_ld_cm.gif';
	}
%>
	<div id="mail-overlay" style="background: transparent; left: 0px; top: 0px; width: 100%; height: 100%; position: absolute; z-index: 2015; opacity: 0.5;">
		<div class="mail-loading-layer" style="text-align: center; position: absolute; z-index: 2016;">
			<span style='background: url("<%= url %>") no-repeat left top; padding-left: 2px; display: inline-block;'>
				<span style='background: url("<%= url %>") no-repeat right -49px; padding-right: 2px; display: inline-block;'>
					<span style='background: url("<%= url %>") repeat-x left -98px; padding: 0px 18px 0px 9px; color: white; line-height: 39px; display: inline-block;'>
						<img style="margin-right: 10px; vertical-align: middle;" src="<%= src %>">
						<%= i18n.overlay.leadingLoading %>
						<strong><%= i18n.overlay.mail %></strong>
						<%= i18n.overlay.trailingLoading %>
					</span>
				</span>
			</span>
		</div>
		<div class="mail-processing-layer" style="text-align: center; position: absolute; z-index: 2016;">
			<span style='background: url("<%= url %>") no-repeat left top; padding-left: 2px; display: inline-block;'>
				<span style='background: url("<%= url %>") no-repeat right -49px; padding-right: 2px; display: inline-block;'>
					<span style='background: url("<%= url %>") repeat-x left -98px; padding: 0px 18px 0px 9px; color: white; line-height: 39px; display: inline-block;'>
						<img style="margin-right: 10px; vertical-align: middle;" src="<%= src %>">
						<%= i18n.overlay.leadingProcessing %>
						<strong><%= i18n.overlay.mail %></strong>
						<%= i18n.overlay.trailingProcessing %>
					</span>
				</span>
			</span>
		</div>
		<div class="attachment-uploading-layer" style="text-align: center; position: absolute; z-index: 2016;">
			<span style='background: url("<%= url %>") no-repeat left top; padding-left: 2px; display: inline-block;'>
				<span style='background: url("<%= url %>") no-repeat right -49px; padding-right: 2px; display: inline-block;'>
					<span style='background: url("<%= url %>") repeat-x left -98px; padding: 0px 18px 0px 9px; color: white; line-height: 39px; display: inline-block;'>
						<img style="margin-right: 10px; vertical-align: middle;" src="<%= src %>">
						<%= i18n.overlay.leadingUploadingAttachment %>
						<strong><%= i18n.overlay.mail %></strong>
						<%= i18n.overlay.trailingUploadingAttachment %>
					</span>
				</span>
			</span>
		</div>
	</div>
</script>
<script type="text/template" id="mail-write-preview-template">
	<div class="ad_layer" id="mail_freeview_layer" style="z-index: 3999; width: 880px;">
		<div class="adl_header clearfix">
			<h4><%= i18n.preview %></h4>
			<div class="close_bt">
				<span class="ic_main ic_cancle"><span class="blind"><%= i18n.close %></span></span>
			</div>
		</div>
		<div class="adl_contents">
			<div class="tbl_wrap">
				<div class="inner">
					<h5><%- mailModel.get('M_TITLE') ? mailModel.get('M_TITLE') : i18n.noSubject %></h5>
					<ul>
						<li>
<%
							var personal = mailModel.get('M_SENDERNM') || user.get('DISPLAY_NAME') || user.get('USERS_NAME');
							var address = mailModel.get('M_SENDER') || user.get('USERS_IDX');
							var from = personal + ' <' + address + '>';
%>
							<span class="free_header"><%= i18n.from %></span> : <span class="txt_list"><%- from %></span>
						</li>
						<li>
							<span class="free_header"><%= i18n.to %></span> : <span class="txt_list"><%- mailModel.get('M_TO') %></span>
						</li>
						<li>
							<span class="free_header"><%= i18n.cc %></span> : <span class="txt_list"><%- mailModel.get('M_CC') %></span>
						</li>
						<li>
							<span class="free_header"><%= i18n.bcc %></span> : <span class="txt_list"><%- mailModel.get('M_BCC') %></span>
						</li>
<% if (mailModel.get('individual')) { %>
						<li>
							<span class="free_header" style="color:#5b79ed; font-weight:bold;"><%= i18n.previewIndividual %></span>&nbsp;
						</li>
<% } %>
					</ul>
				</div>
				<div class="file_info">
					<div class="inner">
						<ul>
							<li>
								<span class="free_header"><%= i18n.attachments %></span> : 
							<% if (attachment.length > 0) { %>
								<span id="normalAttachArea">
									<span class="ic_main ic_file"><span class="mc-blind"><%= i18n.fileAttachments %></span></span>
									<%= i18n.attachments %>
									<span class="hlt" id="normailFileCnt"></span>
									<span><%=i18n.numOfAttachmentsSuffix%></span>
									<span id="normalFileSize">(9.86MB)</span>
								</span>
								<span class="bar" id="split-bar">|</span>
								<span id="bigmailAttachArea">
									<span class="ic_main ic_file"><span class="mc-blind"><%= i18n.blobAttachments %></span></span>
									<%= i18n.blobAttachments %>
									<span class="hlt" id="bigmailFileCnt"></span>
									<span><%= i18n.numOfAttachmentsSuffix %></span>
									<span id="bigmailFileSize">(15.86MB)</span>
								</span>
							<% } else { %>
								<span class="hlt"><%=i18n.noAttachmentFound%></span>
							<% } %>
							</li>
						</ul>
					</div>
				</div>
				<div class="cnt_section"><%= mailModel.get('M_CONTENT') %></div>
			</div>
			<div class="freeview_chk">
				<span class="mr5"><%= i18n.previewOptions %></span>
				<input type="radio" name="send_set" id="all_mail" title="<%=i18n.previewAllMails%>" value="all" <%= user.get('PREVIEW_BEFORE_SENDING') == 'all' ? 'checked="checked"' : '' %>/>
				<label for="all_mail"><%= i18n.previewAllMails %></label>
				<input type="radio" name="send_set" id="hlt_mail" title="<%=i18n.previewImportantMails%>" value="important" <%= user.get('PREVIEW_BEFORE_SENDING') == 'important' ? 'checked="checked"' : '' %>/>
				<label for="hlt_mail"><%= i18n.previewImportantMails %></label>
				<input type="radio" name="send_set" id="not_mail" title="<%=i18n.previewNone%>" value="none" <%= user.get('PREVIEW_BEFORE_SENDING')	== 'none' ? 'checked="checked"' : '' %>/>
				<label for="not_mail"><%= i18n.previewNone %></label>
			</div>
		</div>
		<div class="adl_footer">
			<div class="ad_btn_area">
				<button type="button" title="<%- i18n.modify %>" id="closeLayerBtn"><%= i18n.modify %></button>
				<button type="button" title="<%= i18n.sendNow %>" class="b" id="sendMailBtn"><%= i18n.sendNow %></button>
			</div>
		</div>
	</div>
</script>
<script type="text/template" id="approval-policy-template">
	<div class="adl_header adl_hd_ico clearfix">
		<h4><%= i18n.completedByTheSending %></h4>
		<div class="close_bt"><span class="ic_main ic_cancle"><span class="blind">닫기</span></span></div>
	</div>	
	<div class="adl_contents notp">
		<div class="filter_reason">
			<dl>
				<dt><%= i18n.filterReason %></dt>
<%
	filterCollection.forEach(function(filter) {
%>
				<dd><%= i18n.policy[filter.get('code')] %></dd>
<% }); %>
			</dl>
		</div>
		<div class="tbl_wrap">
			<table class="set_tbl">
				<colgroup>
					<col width="25%">
					<col width="*">
					<col width="13%">
					<col width="12%">
				</colgroup>
				<tbody>
					<tr>
<%
	var maxLevel = approverCollection.getFinalLevels();
	for (var i = 1; i <= maxLevel; i++) {
		var primeApprover = approverCollection.getPrimeApporver(i);
%>
						<th scope="row"><%= i %><%= i18n.levels %> <%= i18n.approver %></th>
						<td>
							<p><span class="blue"><strong><%= primeApprover.get('name') %></strong> <%= primeApprover.get('jobtitle') %></span> &lt;<%= primeApprover.get('approver') %>&gt;</p>
							<p><%= primeApprover.get('department') %></p>
						</td>
<%
				if (primeApprover.get('status')) {
%>
						<td class="out">
							<%- primeApprover.get('deputyApproverName') ? i18n.deputyApprover + ' ' + primeApprover.get('deputyApproverName') : i18n.vacation %>
						</td>
<%
				}
%>
						<td><button title="<%= i18n.change %>" class="icoNewWindow changeApproverBtn" type="button" value="<%= i %>"><%= i18n.change %></button></td>
					</tr>
<%
	}
%>
				</tbody>
			</table>
		</div>
	</div>
	<div class="adl_footer">
		<div class="ad_btn_area">
			<button title="<%= i18n.confirm %>" class="b" type="button" id="sendApprovalBtn"><%= i18n.confirm %></button>
			<button title="<%= i18n.recallMail %>" class="b layer_cancle" type="button" id="closeApprovalLayerBtn"><%= i18n.recallMail %></button>
		</div>
	</div>
</script>
<script type="text/template" id="approval-header-template">
<%
var flag;
if (paginator.params && paginator.params.flag) {
	flag = paginator.params.flag;
}
if (!(paginator.params && paginator.params['search'])) {
%>
	<strong class="mc-folderName">
		<%- approvalMboxModel.get('mboxName') == 'sent' ? i18n.approval.sent : i18n.approval.inbox %>
	</strong>
<%
	if (!flag || flag == 'request' || flag == 'pending') {
%>
	<a href="<%= '#' + paginator.getURL({ page : 1, flag : 'request' }) %>" class="mc-newMail"><%= approvalMboxModel.get('requestCount') %></a>
<%
	} else {
%>
	<a href="javascript:;" class="mc-newMail">0</a>
<%
	}
%>
	<span class="mc-bar">/</span>
	<a href="<%= '#' + paginator.getURL({ page : 1, flag : flag }) %>" class="mc-allMail"><%= paginator.totalRecords %></a>
	<a href="#" class="mc-noReadDel"><%= i18n.deleteApproveMail %></a>
<%
} else {
	var search = paginator.params['search'];
	var searchResults = paginator.totalRecords;
	var searchTerms = [];
	switch (typeof search) {
	case 'string':
		searchTerms.push(search);
		break;
	case 'object':
		if (search.subject || search.body || search.attachments) {
			searchTerms.push(search.subject || search.body || search.attachments);
		}
		if (search.from) {
			searchTerms.push(i18n.from + ':' + search.from);
		}
		if (search.to) {
			searchTerms.push(i18n.to + ':' + (search.to || search.cc));
		}
	}
%>
	<strong class="mc-folderName"><%= i18n.search.results %></strong>
	<a href="<%= '#' + paginator.getURL({ page : 1 }) %>" class="mc-newMail"><%= i18n.search.resultsPrefix %><%= searchResults %><%= i18n.search.resultsSuffix %></a>
	<span class="mc-bar">/</span>
	<a class="mc-allMail"><%- searchTerms.join(', ') %></a>
<%
} // end else
%>
</script>
<script type="text/template" id="approval-tab-template">
	<ul>
		<li><a id="all-tab" href="#"><%= i18n.showAll %></a></li>
		<li><a id="request-tab" href="#"><%= i18n.request %></a></li>
		<li><a id="approve-tab" href="#"><%= i18n.approve %></a></li>
		<li><a id="reject-tab" href="#"><%= i18n.reject %></a></li>
	</ul>
</script>
<script type="text/template" id="approval-list-toolbar-template">
	<div class="mc-buttonSet">
		<span class="mc-selectBtn">
			<button class="mc-sbLft btn_selectAll"><%= i18n.selectAll %></button>
			<button class="mc-sbRgt"><img class="buExp" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></button>
		</span>
		<button class="b" id="deleteMailBtn" type="button"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buDel"><%= i18n.Delete %></button>
<% if (mbox.mboxName == 'sent') { %>
		<button class="b" id="recallMailBtn" type="button"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buCancel"><%= i18n.recall %></button>
<% } else { %>
		<button class="b" id="approveMailBtn" type="button"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buOk"><%= i18n.approve %></button>
		<button class="b" id="rejectMailBtn" type="button"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" class="buBack"><%= i18n.reject %></button>
<% } %>
	</div>
<%
	var onClass = {
		noSplit : '',
		horizontalSplit : '',
		verticalSplit : '',
	};
	switch (user.USERS_MAIL_VIEW_MODE) {
	case '0':
		onClass.noSplit = 'on';
		break;
	case '1':
		onClass.horizontalSplit = 'on';
		break;
	case '2':
		onClass.verticalSplit = 'on';
		break;
	default:
		onClass.noSplit = 'on';
	}
%>
	<div class="mc-rightTool">
<% if (user.USERS_MAIL_VIEW_MODE != '0') { %>
		<!--<a title="<%= i18n.print %>" class="mc-print" id="pvPrint" href="#"><em><%= i18n.print %></em></a>-->
<% } %>
		<a title="<%= i18n.refresh %>" class="mc-refresh" href="#" onclick="location.reload(); return false;">
			<em><%= i18n.refresh %></em>
		</a>
		<span class="mc-layoutSelect">
			<a title="<%= i18n.previewPaneNone %>" class="mc-setCommon <%= onClass.noSplit %>" id="ls_normal" href="#"><em><%= i18n.noSplit %></em></a>
			<a title="<%= i18n.previewPaneOnRight %>" class="mc-setVertical <%= onClass.verticalSplit %>" id="ls_horizon" href="#"><em><%= i18n.verticalSplit %></em></a>
			<a title="<%= i18n.previewPaneOnBottom %>" class="mc-setHorizontal <%= onClass.horizontalSplit %>" id="ls_vertical" href="#"><em><%= i18n.horizontalSplit %></em></a>
		</span>
	</div>
</script>
<script type="text/template" id="approval-toolbar-template">
<%
	var status = approval.status;
%>
	<div class="mc-buttonSet">
		<span class="mc-groupBtn">
<% if (mbox.mboxName == 'sent') { %>
			<button class="b approval-recompose" id="" type="button"><%= i18n.resend %></button>
	<% if (status == 'approve' || status == 'reject' || status == 'recall') { %>
			<button class="b approval-sent-delete" type="button"><img class="buDel"><%= i18n.Delete %></button>
	<% } %>
	<% if (status == 'request' || status == 'pending') { %>
			<button class="b approval-recall" id="" type="button"><img class="buCancel"><%= i18n.recall %></button>
	<% } %>
<% } else { %>
	<% if (approval.status == 'approve' || approval.status == 'reject') { %>
			<button class="b approval-inbox-delete" id="" type="button"><img class="buDel"><%= i18n.Delete %></button>
	<% } %>
	<% if (approval.status == 'pending') { %>
			<button class="b approval-approve" id="" type="button"><img class="buOk"><%= i18n.approve %></button>
			<button class="b approval-reject" id="" type="button"><img class="buBack"><%= i18n.reject %></button>
	<% } %>
<% } %>
		</span>
	</div>
	<div class="mc-rightTool">
<% if (!popup) { %>
		<button class="btn_txt goList" type="button"><%= i18n.list %></button>
<% } %>
		<span class="barS">l</span>
		<button class="btn_txt goPrev" type="button"><%= i18n.previous %></button>
		<span class="barS">l</span>
		<button class="btn_txt goNext" type="button"><%= i18n.next %></button>
	</div>
</script>
<script type="text/template" id="approval-item-template">
<%
	var isToday = function(date) {
		if (!date) {
			return false;
		}
		var now = new Date();
		var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
		if (today.getTime() == date.getTime()) {
			return true;
		}
		return false;
	};

	var formatDate = function(time) {
		var date, parsedDate;
		try {
			parsedDate = $.format.parseDate(time);
		} catch (e) {
			return '';
		}
		date = parsedDate && parsedDate.date;
		if (isToday(date)) {
			date = $.format.date(time, 'HH:mm:ss');
		} else {
			date = $.format.date(time, 'yy-MM-dd HH:mm:ss');
		}
		return date;
	};

	var parameters = paginator.getParameters();
	parameters += '&mboxName=' + mbox.mboxName;

	var fontSize = user.LIST_FONT_SIZE + 'pt';
	var fontStyle = 'style="font-size: ' + fontSize + ';"'

	var finalApprovalTime = function(model) {
		if (model.subApprovals && model.subApprovals.length > 0) {
			var subModels = model.subApprovals;
			for (var i = subModels.length - 1; i >= 0; i--) {
				if (subModels[i].status == 'recall') {
					return subModels[i].approvalTime;
				} else if (subModels[i].status == 'reject') {
					return subModels[i].approvalTime;
				} else if (subModels[i].status == 'approve') {
					return subModels[i].approvalTime;
				} else {
					if (i != 0) {
						if (subModels[i - 1].status == 'reject') {
							return subModels[i - 1].approvalTime;
						}
					}
					return subModels[i].approvalTime;
				}
			}
		} else {
			return model.approvalTime;
		}
	};
%>
	<ul class="mc-mInfo">
		<li class="mc-check">
<% if (!approval.isSubApproval) { %>
			<input class="mCheck" type="checkbox" value="<%- approval.id%>"><label class="mc-blind"><%= i18n.checkMail %></label>
<% } %>
		</li>
		<li class="mc-okCondition">
<%
	var status = approval.status;
	if (status == 'recall') {
%>
			<span title="<%= i18n.recall %>" class="icoCancel"></span>
<%	} else if (status == 'approve') { %>
			<span title="<%= i18n.approve %>" class="icoOk"></span>
<%	} else if (status == 'reject' || status == 'auto-reject') { %>
			<span title="<%= i18n.reject %>" class="icoBack"></span>
<%	} else { %>
			<span title="<%= i18n.request %>" class="icoWait"></span>
<%	} %>
		</li>
<% if (approval.attachments > 0) { %>
		<li class="mc-file"><span title="<%= i18n.attachmentsInMail %>" class="icoFile"></span></li>
<% } %>
		<li class="mc-okSend_date"><%- formatDate(approval.requestTime) %></li>
<%
	var approvalTime;
	if (mbox.mboxName == 'sent') {
		approvalTime = finalApprovalTime(approval);
	} else {
		approvalTime = approval.approvalTime;
	}
%>
		<li class="mc-okRec_date"><%- formatDate(approvalTime) %></li>
	</ul>
	<div class="mc-mTitle">
<%
	var composeTo;
	var emailAddress = function(name, address) {
		if(name) {
			return '\"' + name + '\"' + '<' + address + '>';
		} else {
			return address;
		}
	};
	if (mbox.mboxName == 'sent') {
		if (approval.subApprovals.length > 1) {
			composeTo = approval.subApprovals[0].approverName + i18n.other + (approval.subApprovals.length - 1) + i18n.approverOthers;
		} else {
			composeTo = emailAddress(approval.approverName, approval.approver);
		}
	} else {
		composeTo = emailAddress(approval.applicantName, approval.applicant);
	} 
%>
		<div class="mc-name">
			<span class="mc-blind"><%= mbox.mboxName == 'sent' ? i18n.approver : i18n.applicant %></span>
<% if (mbox.mboxName == 'sent' && approval.subApprovals.length > 1) { %>
			<a href="#" class="toggleSubList" mailId="<%- approval.mailId %>">
				<span class="ic_send_off"><span class="blind">펼치기</span></span><%- composeTo %>
			</a>
<% } else { %>
			<a href="#compose?to=<%= encodeURIComponent(composeTo) %>"><%- composeTo %></a>
<% } %>
		</div>
		<div class="mc-subject">
			<a href="#approval/mboxes/<%- mbox.mboxName %>/approvals/<%- approval.id %><%- parameters %>" <%- fontStyle %>>
				<span class="mail_title">
					<span class="mc-blind" <%- fontStyle %>><%= i18n.subject %></span>
					<%- approval.subject ? approval.subject : i18n.noSubject %>
				</span>
			</a>
			<a href="#approval/mboxes/<%- mbox.mboxName %>/approvals/<%- approval.id %><%- parameters %>" title="<%= i18n.viewInNewWindow %>" class="icoNewWindow">
				<span class="mc-blind"><%= i18n.viewInNewWindow %></span>
			</a>
		</div>
	</div>
</script>
<script type="text/template" id="approval-list-template">
<%
	var url = function(sortField) {
		var params = {
			sortField : sortField,
			sortOrder : paginator.sortOrder == 'ASC' ? 'DESC' : 'ASC',
		};
		return '#' + paginator.getURL(params);
	};

	var sortField = paginator.sortField;
	var sortApplicant, sortSubject, sortRequestTime, sortApprovalTime;
	var stdApplicant = '', stdSubject = '', stdRequestTime = '', stdApprovalTime = '';
	switch (sortField) {
	case 'applicant' :
		stdApplicant = 'std';
		sortApplicant = paginator.sortOrder == 'ASC' ? 'mc-up' : 'mc-down';
		break;
	case 'subject' :
		stdSubject = 'std';
		sortSubject = paginator.sortOrder == 'ASC' ? 'mc-up' : 'mc-down';
		break;
	case 'requestTime' :
		stdRequestTime = 'std';
		sortRequestTime = paginator.sortOrder == 'ASC' ? 'mc-up' : 'mc-down';
		break;
	case 'approvalTime' :
		stdApprovalTime = 'std';
		sortApprovalTime = paginator.sortOrder == 'ASC' ? 'mc-up' : 'mc-down';
		break;
	}

	var fontSize = user.LIST_FONT_SIZE + 'pt';
	var fontStyle = 'style="font-size: ' + fontSize + ';"'
%>
	<!-- LIST ITEM -->
	<h4 class="mc-blind">메일 정렬 옵션</h4>
	<ul class="mc-mailListItem ok_rec">
		<li class="mc-check"><input class="mCheck" type="checkbox"><label class="mc-blind"><%= i18n.selectAllMails %></label></li>
		<li class="mc-okCondition">
			<a href="javascript:;" class="" <%= fontStyle %>><%= i18n.approvalStatus %></a>
		</li>
<%if (mbox.mboxName == 'sent') { %>
		<li class="mc-from">
			<a href="javascript:;" class="" <%= fontStyle %>><%= i18n.approver %></a>
		</li>
<% } else { %>
		<li class="mc-from <%- stdApplicant %>">
			<a href="<%- url('applicant') %>" class="<%- sortApplicant || 'mc-down' %>" <%= fontStyle %>><%= i18n.applicant %></a>
		</li>
<% } %>
		<li class="mc-file">
			<a title="<%= i18n.sortByAttachments %>" class="icoFile" href="#"></a>
		</li>
		<li class="mc-title <%- stdSubject %>">
			<a href="<%- url('subject') %>" class="<%- sortSubject || 'mc-down' %>" <%= fontStyle %>><%= i18n.subject %></a>
		</li>
		<li class="mc-okSend_date <%- stdRequestTime %>">
			<a href="<%- url('requestTime') %>" class="<%- sortRequestTime || 'mc-down' %>" <%= fontStyle %>><%= i18n.requestTime %></a>
		</li>
		<li class="mc-okRec_date <%- stdApprovalTime %>">
			<a href="<%- url('approvalTime') %>" class="<%- sortApprovalTime || 'mc-down' %>" <%= fontStyle %>><%= i18n.approveTime %></a>
		</li>
	</ul>
	<!-- //LIST ITEM -->
	<!-- LIST -->
	<div class="mc-listWrap">
		<h4 class="mc-blind"><%= i18n.inboxList %></h4>
		<ol class="mc-mailList oklist">
			<!-- #approval-item-template -->
		</ol>
	</div>
	<!-- //LIST -->
	<!-- PAGINATE #mail-pagination-template -->
	<div class="mc-paginate">
	</div>
	<!-- //PAGINATE -->

	<div id="previewMailLayer" class="mc-dh_layer" style="display:;left:237px;top:137px;">
	</div>
</script>
<script type="text/template" id="approval-view-template">
<%
	var subApprovals = approval.subApprovals;

	var displayUser = function(name, address) {
		var display = '';
		if (name && address) {
			display = '\"' + name + '\"' + '<' + address + '>';
		} else if (address) {
			display = address;
		}
		return display;
	};

	var isToday = function(date) {
		if (!date) {
			return false;
		}
		var now = new Date();
		var today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
		if (today.getTime() == date.getTime()) {
			return true;
		}
		return false;
	};

	var formatDate = function(time) {
		if (!time) {
			return;
		}
		var date, parsedDate = $.format.parseDate(time);
		date = parsedDate && parsedDate.date;
		if (isToday(date)) {
			date = $.format.date(time, 'HH:mm:ss');
		} else {
			date = $.format.date(time, 'yy-MM-dd HH:mm:ss');
		}
		return date;
	};
%>
		<div class="ok_info">
<%
	if (subApprovals && subApprovals.length > 1) { %>
			<table>
				<colgroup>
					<col width="126">
	<% for (var i = 1; i <= subApprovals.length; i++) {	%>
					<col width="65">
					<col width="200">
		<% if (subApprovals.length == i) { %>
					<col width="*">
		<% } else { %>
					<col width="100">
		<% } %>
	<% } %>
				</colgroup>
				<tbody>
					<tr>
					<th scope="row"><%= i18n.approver %></th>
	<% for (var i = 0; i < subApprovals.length; i++) { %>
						<td><%- subApprovals[i].levels %><%= i18n.levels %></td>
						<td>
							<%- displayUser(subApprovals[i].approverName, subApprovals[i].approver) %> <span class="ok_date2"><%- formatDate(subApprovals[i].approvalTime) %></span>
						</td>
		<% if (subApprovals[i].status == 'approve') { %>
						<td class="ok_ico nol"><span title="<%= i18n.approve %>" class="icoOk_txt"><%= i18n.approve %></span></td>
		<% } else if (subApprovals[i].status == 'reject' || subApprovals[i].status == 'auto-reject') { %>
						<td class="ok_ico nol"><span title="<%= i18n.reject %>" class="icoBack_txt"><%= i18n.reject %></span></td>
		<% } else { %>
						<td class="ok_ico nol"><span title="<%= i18n.request %>" class="icoWait_txt"><%= i18n.request %></span></td>
	<%
			}
		}
	%>
					</tr>
				</tbody>
			</table>
<%
	} else {
%>
			<table>
				<colgroup>
					<col width="126">
					<col width="300">
					<col width="*">
				</colgroup>
				<tbody>
					<tr>
					<th scope="row"><%= i18n.approver %></th>
						<td>
							<%- displayUser(approval.approverName, approval.approver) %> <span class="ok_date"><%- approval.approveTime %></span>
						</td>
	<% if (approval.status == 'approve') { %>
						<td class="ok_ico nol"><span title="<%= i18n.approve %>" class="icoOk_txt"><%= i18n.approve %></span></td>
	<% } else if (approval.status == 'reject' || approval.status == 'auto-reject') { %>
						<td class="ok_ico nol"><span title="<%= i18n.reject %>" class="icoBack_txt"><%= i18n.reject %></span></td>
	<% } else { %>
						<td class="ok_ico nol"><span title="<%= i18n.request %>" class="icoWait_txt"><%= i18n.request %></span></td>
	<% } %>
					</tr>
				</tbody>
			</table>
<% } %>
			<ul>
				<li>
					<dl>
						<dt><%= i18n.filtered %></dt>
						<dd class="blue">
<%
	var filtered = [];
	var filters = approval.filters;
	var filterIds = approval.filterIds.split(',');
	_.each(filters, function(filter) {
		for (var i = 0; i < filterIds.length; i++) {
			if (filterIds[i] == filter.id) {
				filtered.push(i18n.policy[filter.code]);
			}
		}
	});
%>
							<%- filtered.join(', ') %>
						</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt><%= i18n.approvalStatus %></dt>
						<dd>
<%
	var status, time, reason;
	var states = [];
	if (subApprovals) {
		_.each(subApprovals, function(approval) {
			states.push(approval.status);
			if (approval.status == 'approve' || approval.status == 'reject') {
				time = approval.approvalTime;
			}
			if (approval.status == 'reject' || approval.status == 'auto-reject') {
				reason = approval.reason;
			}
		});
		for (var i = 0; i < states.length; i++) {
			if (states[i] == 'recall') {
				status = 'recall';
				break;
			} else if (states[i] == 'reject' || states[i] == 'auto-reject') {
				status = 'reject';
				break;
			} else if (states[i] == 'approve') {
				status = 'approve';
			} else {
				status = 'request';
			}
		}
	} else {
		status = approval.status;
		time = approval.approvalTime;
		reason = approval.reason;
	}
%>
<% if (status == 'recall') { %>
							<span title="<%= i18n.recall %>" class="icoCancel_txt"><%= i18n.recall %></span>
<% } else if (status == 'reject') { %>
							<span title="<%= i18n.reject %>" class="icoBack_txt"><%= i18n.reject %></span>
<% } else if (status == 'approve') { %>
							<span title="<%= i18n.approve %>" class="icoOk_txt"><%= i18n.approve %></span>
<% } else { %>
							<span title="<%= i18n.request %>" class="icoWait_txt"><%= i18n.request %></span>
<% } %>
						</dd>
					</dl>
				</li>
				<li>
					<dl>
						<dt><%= i18n.requestTime %></dt>
						<dd><%- $.format.date(approval.requestTime, 'yy-MM-dd HH:mm:ss (E)') %></dd>
					</dl>
				</li>
<% if (status == 'approve' || status == 'reject') { %>
				<li>
					<dl>
						<dt><%- status == 'approve' ? i18n.approveTime : i18n.rejectTime %></dt>
						<dd><%- $.format.date(time, 'yy-MM-dd HH:mm:ss (E)') %></dd>
					</dl>
				</li>
<% } %>
<% if (status == 'reject') { %>
				<li class="backReason">
					<dl>
						<dt><%= i18n.comment %></dt>
						<dd><%- reason %></dd>
					</dl>
				</li>
<% } %>
			</ul>
		</div>
		<!-- 원문메일 보기 박스 -->
		<div class="okMail_view">
<%
	var approvalId = approval.id;
	var mail = approval.mail ? approval.mail : {};
%>
<% if (mail.M_FORWARDED) { %>
	<!-- 전달한 메일정보 표시 -->
	<table class="mc-relativeView">
		<tr>
			<td><a href="#" class="to"><%= i18n.forwardedMailPrefix %><%= $.format.date(mail.M_FORWARDED, 'yy-MM-dd (E) HH:mm') %><%= i18n.forwardedMailSuffix %></a></td>
		</tr>
	</table>
	<!-- //전달한 메일정보 표시 -->
<% } %>
<% if (mail.M_REPLYED) { %>
	<!-- 답장한 메일정보 표시 -->
	<table class="mc-relativeView">
		<tr>
			<td><a href="#" class="to"><%= i18n.repliedMailPrefix %><%= $.format.date(mail.M_REPLYED, 'yy-MM-dd (E) HH:mm') %><%= i18n.repliedMailSuffix %></a></td>
		</tr>
	</table>
	<!-- //답장한 메일정보 표시 -->
<% } %>
	<div class="okMail_viewTit">
		<h3><%= i18n.orginalApprovalMail %></h3>
	</div>
	<!-- VIEW HEAD -->
	<div class="mc-viewTit">
		<h4>
<%
	var importantClass;
	if (mail.M_PRIORITY && mail.M_PRIORITY == 1) {
		importantClass = 'icoImportantOn';
	} else {
		importantClass = 'icoImportantOff';
	}
%>
			<%- mail.M_TITLE || i18n.noSubject %>
		</h4>
		<p class="send_date"><%= $.format.date(mail.M_TIME, 'yy-MM-dd (E) HH:mm') %></p>
		<dl>
			<dt class="first_child">
				<button type="button" class="viewMoreOn" id="icoVm" onclick="$(this).parent().next().nextAll().toggle();$(this).toggleClass(function() { return $(this).is('.viewMoreOn') ? 'viewMoreOff' : 'viewMoreOn'; });"></button>
				<%= i18n.from %>
			</dt>
			<dd>:
				<a href="#compose?to=<%= encodeURIComponent(mail.M_SENDER) %>"><%- mail.M_SENDER %></a>
				<span class="mLink">
				</span>
			</dd>
 			<dt id="viewMore"><%= i18n.to %></dt>
			<dd id="viewMore2">:
<%
	var rcptTo = [];
	try {
		var addrs = InternetAddress.parseHeader(mail.M_TO, false);
		for (var i = 0; i < addrs.length; i++) {
			if (addrs[i].getPersonal())
				rcptTo[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
			else
				rcptTo[i] = addrs[i].getAddress();
		}
	} catch (error) {
		rcptTo[0] = mail.M_TO;
	}
	for (var i = 0; i < rcptTo.length; i++) {
%>
				<a href="#compose?to=<%= encodeURIComponent(rcptTo[i]) %>" title="<%- rcptTo[i] %>"><%- rcptTo[i] %></a><%= (rcptTo.length > 1 && i < rcptTo.length - 1) ? ',' : '' %>
<%
	} // end for
%>
			</dd>
<%
	if (mail.M_CC) {
		var rcptCc = [];
		try {
			var addrs = InternetAddress.parseHeader(mail.M_CC, false);
			for (var i = 0; i < addrs.length; i++) {
				if (addrs[i].getPersonal())
					rcptCc[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
				else
					rcptCc[i] = addrs[i].getAddress();
			}
		} catch (error) {
			rcptCc[0] = mail.M_CC;
		}
%>
			<dt id="viewMore"><%= i18n.cc %></dt>
			<dd id="viewMore2">:
<%		for (var i = 0; i < rcptCc.length; i++) { %>
				<a href="#compose?to=<%= encodeURIComponent(rcptCc[i]) %>" title="<%- rcptCc[i] %>"><%- rcptCc[i] %></a><%= (rcptCc.length > 1 && i < rcptCc.length - 1) ? ',' : '' %>
<%		} // end for %>
			</dd>
<%
	} // end if (mail.M_CC)
%>
		</dl>
	</div>
	<!-- //VIEW HEAD -->
<%
if (mail.attachments && mail.attachments.length > 0) {
	var numOfAttachments = mail.attachments.length;
	var sizeOfAttachments = 0;
	_.each(mail.attachments, function(attachment) {
		sizeOfAttachments += attachment.size;
	});
	var allDownloadLink = urlRoot + '/' + approvalId + '/attachments/all';
%>
	<!-- 일반 첨부파일 영역 -->
	<div class="mc-attFile_area">
		<h5>
			<%= i18n.attachments %>
			<span class="num">
				<em><%= i18n.numOfAttachmentsPrefix %><%= numOfAttachments %><%= i18n.numOfAttachmentsSuffix %></em>
				(<%= numeral(sizeOfAttachments).format('0b') %>)
			</span>
			<a href="<%- allDownloadLink %>"><%= i18n.downloadAllAttachments %></a>
		</h5>
		<p class="virus">
			<!-- <%= i18n.attachmentVirusScanning %><span class="bar">|</span> -->
			<!-- [D] class=close 접기/ class=open 펼치기 -->
			<button type="button" class="close" onclick="$(this).parent().next('div.file_list').toggle(); $(this).empty().is('.close') ? $(this).text('<%- i18n.expand %>')[0].className = 'open' : $(this).text('<%- i18n.collapse %>')[0].className = 'close'; $(this).append($(document.createElement('img')).attr('src', '<%= popup ? '../img/b.gif' : 'img/b.gif' %>'));"><%= i18n.collapse %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></button>
		</p>
	<% if (mail.M_INJURIOUSE && mail.M_INJURIOUSE == 'Y') { %>
		<div class="noImgs" style="display:">
			<span class="ico_caution"><%= i18n.maliciousAttachmentsWarning %></span>
			<%= i18n.maliciousAttachmentsWarningPhrase %>
		</div>
	<% } %>
		<!-- 첨부파일 리스트 -->
		<div class="file_list">
			<ul>
	<%
		for (var i = 0; i < mail.attachments.length; i++) {
			var downloadLink = urlRoot + '/' + approvalId + '/attachments/' + mail.attachments[i].num;
	%>
				<li>
					<span class="el_ct">
						<a href="<%- downloadLink %>"><%- mail.attachments[i].name %></a>&nbsp;
						<span class="st"><%= numeral(mail.attachments[i].size).format('0b') %></span>
					</span>
					<a href="<%- downloadLink %>" class="btn_savepc"><span class="mc-blind"><%= i18n.downloadAttachment %></span></a>
				</li>
	<% } %>
			</ul>
		</div>
		<!-- //첨부파일 리스트 -->
	</div>
	<!-- //일반 첨부파일 영역 -->
<%
} // end if (mail.attachments && mail.attachments.length > 0)
%>
	<!-- READ FRAME -->
	<div class="mc-readFrame">
		<div style="width:100%; max-width:980px;">
			<!-- 내용 -->
			<div style="font-family:Gulim;font-size:10pt">
				<!-- 기본내용 뿌려짐 -->
				<%= mail.M_CONTENT %>
				<p>&nbsp;</p>
				<!-- // 기본내용 뿌려짐 -->
<%
	if (!mail.mails)
		mail.mails = [];
	for (var subMailNum = 0; subMailNum < mail.mails.length; subMailNum++) {
		var subMail = mail.mails[subMailNum];
%>
				<!-- 전달된 편지 Forwarded Message -->
				<p style="padding:0;font-family:Gulim,AppleGothic,sans-serif;font-size:10pt;">
					<span style="font-weight:bold">----- Forwarded Message -----</span><br>
					<b>From:</b> <%- subMail.M_SENDER %><br>
					<b>To:</b> <%- subMail.M_TO %><br>
				<% if (subMail.M_CC) { %>
					<b>Cc:</b> <%- subMail.M_CC %><br>
				<% } %>
					<b>Sent:</b> <%= $.format.date(mail.M_TIME, 'yyyy-MM-dd (E) HH:mm') %><br>
					<b>Subject:</b> <%- subMail.M_TITLE %><br><br>
				</p>
<%
		if (subMail.attachments && subMail.attachments.length > 0) {
			var numOfAttachments = subMail.attachments.length;
			var sizeOfAttachments = 0;
			_.each(subMail.attachments, function(attachment) {
				sizeOfAttachments += attachment.size;
			});
%>
				<!-- 전달된 편지 첨부파일 영역 -->
				<div class="mc-attFile_area _clearfix">
					<h5>
						<%= i18n.attachments %>
						<span class="num">
							<em><%= i18n.numOfAttachmentsPrefix %><%= numOfAttachments %><%= i18n.numOfAttachmentsSuffix %></em>
							(<%= numeral(sizeOfAttachments).format('0b') %>)
						</span>
						<a href="<%= urlRoot %>/<%- mail.M_IDX %>/attachments/all/<%= i %>"><%= i18n.downloadAllAttachment %></a>
					</h5>
					<p class="virus">
						<!-- <%= i18n.attachmentVirusScanning %><span class="bar">|</span> -->
						<!-- [D] class=close 접기/ class=open 펼치기 -->
						<button type="button" class="close" onclick="$(this).parent().next('div.file_list').toggle(); $(this).empty().is('.close') ? $(this).text('<%- i18n.expand %>')[0].className = 'open' : $(this).text('<%- i18n.collapse %>')[0].className = 'close'; $(this).append($(document.createElement('img')).attr('src', '<%= popup ? '../img/b.gif' : 'img/b.gif' %>'));"><%= i18n.collapse %><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></button>
					</p>
			<% if (subMail.M_INJURIOUSE && subMail.M_INJURIOUSE == 'Y') { %>
					<div class="noImgs" style="display:">
						<span class="ico_caution"><%= i18n.maliciousAttachmentsWarning %></span>
						<%= i18n.maliciousAttachmentsWarningPhrase %>
					</div>
			<% } %>
					<!-- 전달된 편지 첨부파일 리스트 -->
					<div class="file_list" id="attFileList">
						<ul>
			<% for (var idx = 0; idx < subMail.attachments.length; idx++) { %>
							<li>
								<span class="el_ct">
									<a href="<%= urlRoot %>/<%- mail.M_IDX %>/attachments/<%- subMailNum %>.<%- subMail.attachments[idx].num %>"><%- subMail.attachments[idx].name %></a>&nbsp;
									<span class="st"><%= numeral(subMail.attachments[idx].size).format('0b') %></span>
								</span>
								<a href="<%= urlRoot %>/<%- mail.M_IDX %>/attachments/<%- subMailNum %>.<%- subMail.attachments[idx].num %>" class="btn_savepc"><span class="mc-blind"><%= i18n.downloadAttachment %></span></a>
								<a href="#" class="btn_del" data-mail-id="<%- mail.M_IDX %>" data-attachment-index="<%- subMailNum %>.<%- subMail.attachments[idx].num %>"><span class="mc-blind"><%= i18n.deleteAttachment %></span></a>
							</li>
			<% } %>
						</ul>
					</div>
					<!-- //전달된 편지 첨부파일 리스트 -->
				</div>
				<!-- //전달된 편지 첨부파일 영역 -->
<%
		} // end if (subMail.attachments && subMail.attachments.length > 0)
%>
				<div style="width:100%; max-width:980px;">
					<div style="font-family:Gulim;font-size:10pt">
						<%= subMail.M_CONTENT %>
						<p>&nbsp;</p>
					</div>
				</div>
				<!-- //전달된 편지 Forwarded Message -->
<%
	} // for (var subMailNum = 0; subMailNum < mail.mails.length; subMailNum++)
%>
			</div>
		</div>
	</div>
	<!-- //READ FRAME-->
<%
var numOfAttachedImages = 0;
_.each(mail.attachments, function(attachment) {
	if (attachment.type.indexOf('image/') != -1) {
		numOfAttachedImages += 1;
	}
});
for (var i = 0; i < mail.mails.length; i++) {
	var subMail = mail.mails[i];
	_.each(subMail.attachments, function(attachment) {
		if (attachment.type.indexOf('image/') != -1) {
			numOfAttachedImages += 1;
		}
	});
}

var iterateAttachedImages = function() {
	var mailNum = -1, attachmentNum = 0;
	return function() {
		if (mailNum == -1) {
			for (var i = attachmentNum; i < mail.attachments.length; i++) {
				var attachment = mail.attachments[i];
				attachmentNum = i + 1;
				if (attachment.type.indexOf('image/') != -1) {
					return {
						index : attachment.num,
						name : attachment.name,
					};
				}
			}
			mailNum = 0;
			attachmentNum = 0;
		}
		for (var i = mailNum; i < mail.mails.length; i++) {
			var subMail = mail.mails[i];
			for (var idx = attachmentNum; idx < subMail.attachments.length; idx++) {
				var attachment = subMail.attachments[idx];
				attachmentNum = idx + 1;
				if (attachment.type.indexOf('image/') != -1) {
					var index = mailNum + '.' + attachment.num;
					return {
						index : index,
						name : attachment.name,
					};
				}
			}
			mailNum = mailNum + 1;
			attachmentNum = 0;
		}
		return null;
	};
};

if (numOfAttachedImages > 0) {
%>
	<!-- IMAGES PREVIEW AREA -->
	<div class="mc-imgPrev_area">
		<h5>
			<%= i18n.attachedImagesPreview %> <span>(<em><%= numOfAttachedImages %></em><%= i18n.attachedImagesSuffix %>)</span>
		</h5>
		<table class="mc-list_attImg">
			<colgroup>
				<col/>
				<col width="50"/>
				<col/>
				<col width="50"/>
				<col/>
			</colgroup>
			<tbody>
<%
	var nextAttachedImage = iterateAttachedImages();
	var remainder = 0;
	for (var i = 0; i < numOfAttachedImages; i++) {
		var attachedImage = nextAttachedImage();
		if (!attachedImage) {
			break;
		}
		remainder = i % 3;
		if (remainder == 0) {
%>
				<tr>
					<td>
						<div class="img_area">
							<div class="vert_align">
								<table>
									<tr>
										<td>
											<a href="<%= urlRoot %>/<%- approvalId %>/attachments/image/<%= attachedImage.index %>" target="_blank"><img style="max-height:200px;max-width:200px;" alt="첨부 파일 이미지 미리보기" src="<%= urlRoot %>/<%- approvalId %>/attachments/image/<%= attachedImage.index %>"></a>
										</td>
									</tr>
								</table>
							</div>
							<div class="img_tit">
								<a href="<%= urlRoot %>/<%- approvalId %>/attachments/<%= attachedImage.index %>"><%= attachedImage.name %></a>
							</div>
						</div>
					</td>
					<td></td>
<%
		} else if (remainder == 1) {
%>
					<td>
						<div class="img_area">
							<div class="vert_align">
								<table>
									<tr>
										<td>
											<a href="<%= urlRoot %>/<%- approvalId %>/attachments/image/<%= attachedImage.index %>" target="_blank"><img style="max-height:200px;max-width:200px;" alt="첨부 파일 이미지 미리보기" src="<%= urlRoot %>/<%- approvalId %>/attachments/image/<%= attachedImage.index %>"></a>
										</td>
									</tr>
								</table>
							</div>
							<div class="img_tit">
								<a href="<%= urlRoot %>/<%- approvalId %>/attachments/<%= attachedImage.index %>"><%= attachedImage.name %></a>
							</div>
						</div>
					</td>
					<td></td>
<%
		} else if (remainder == 2) {
%>
					<td>
						<div class="img_area">
							<div class="vert_align">
								<table>
									<tr>
										<td>
											<a href="<%= urlRoot %>/<%- approvalId %>/attachments/image/<%= attachedImage.index %>" target="_blank"><img style="max-height:200px;max-width:200px;" alt="첨부 파일 이미지 미리보기" src="<%= urlRoot %>/<%= mail.M_IDX %>/attachments/image/<%= attachedImage.index %>"></a>
										</td>
									</tr>
								</table>
							</div>
							<div class="img_tit">
								<a href="<%= urlRoot %>/<%- approvalId %>/attachments/<%= attachedImage.index %>"><%= attachedImage.name %></a>
							</div>
						</div>
					</td>
				</tr>
<%
		}
	} // end for (var i = 0; i < numOfAttachedImages; i++)

	if (remainder < 2) {
%>
				</tr>
<%
	} // end if (remainder < 2)
%>
			</tbody>
		</table>
	</div>
	<!-- //IMAGES PREVIEW AREA -->
<%
} // end if (numOfAttachedImages > 0)
%>
		</div>
		<!-- //원문메일 보기 박스 -->

		<!-- GO TO TOP-->
		<div class="mc-toTop">
			<a href="#">맨위로</a>
		</div>
		<!-- //GO TO TOP-->
</script>
<script type="text/template" id="prev-next-approvals-template">
	<div id="prevNextList">
		<ul class="mc-mailList mc-readUnder">
<%
	if (approval.prevApproval) {
		var prevApproval = approval.prevApproval;
%>
			<li>
				<div class="mc-mTitle">
					<div class="mc-name">
						<a href="#compose?to=<%= encodeURIComponent(prevApproval.applicant) %>" title="<%- prevApproval.applicant %>">
							<%- prevApproval.applicant %>
						</a>
					</div>
					<div class="mc-subject">
						<a href="<%= prevApprovalHash %>" data-mail-id="<%= prevApproval.id %>"><%- prevApproval.subject %></a>
<%
	if (!popup) {
%>
						<a href="#" data-mail-id="<%= prevApproval.id %>" onclick="window.open('<%= popup ? '../' : '' %>popup/<%= prevApprovalHash %>','','scrollbars=yes,width=900,height=680'); return false;" title="<%= i18n.viewInNewWindow %>" class="newWin"></a>
<%
	}
%>
					</div>
				</div>
				<ul class="mc-mInfo">
					<li><img class="mPrev" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></li>
					<li class="mc-read">
<% if (prevApproval.status == 'recall') { %>
						<span class="icoOk"></span>
<% } else if (prevApproval.status == 'approve') { %>
						<span class="icoOk"></span>
<% } else if (prevApproval.status == 'reject' || prevApproval.status == 'auto-reject') { %>
						<span class="icoBack"></span>
<% } else { %>
						<span class="icoWait"></span>
<% } %>
					</li>
<% if (prevApproval.attachments > 0) { %>
					<li class="mc-file"><span class="icoFile"></span></li>
<% } %>
					<li class="mc-date"><%= $.format.date(prevApproval.requestTime, 'yy-MM-dd HH:mm') %></li>
				</ul>
			</li>
<%
	}
	if (approval.nextApproval) {
		var nextApproval = approval.nextApproval;
%>
			<li>
				<div class="mc-mTitle">
					<div class="mc-name">
						<a href="#compose?to=<%= encodeURIComponent(nextApproval.applicant) %>" title="<%- nextApproval.applicant %>">
							<%- nextApproval.applicant %>
						</a>
					</div>
					<div class="mc-subject">
						<a href="<%= nextApprovalHash %>" data-mail-id="<%= nextApproval.id %>"><%- nextApproval.subject %></a>
<%
	if (!popup) {
%>
						<a href="#" data-mail-id="<%= nextApproval.id %>" onclick="window.open('<%= popup ? '../' : '' %>popup/<%= nextApprovalHash %>','','scrollbars=yes,width=900,height=680'); return false;" title="<%= i18n.viewInNewWindow %>" class="newWin"></a>
<%
	}
%>
					</div>
				</div>
				<ul class="mc-mInfo">
					<li><img class="mNext" src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>"></li>
					<li class="mc-read">
<% if (nextApproval.status == 'recall') { %>
						<span class="icoOk"></span>
<% } else if (nextApproval.status == 'approve') { %>
						<span class="icoOk"></span>
<% } else if (nextApproval.status == 'reject') { %>
						<span class="icoBack"></span>
<% } else { %>
						<span class="icoWait"></span>
<% } %>
					</li>
<% if (nextApproval.attachments > 0) { %>
					<li class="mc-file"><span class="icoFile"></span></li>
<% } %>
					<li class="mc-date"><%= $.format.date(nextApproval.requestTime, 'yy-MM-dd HH:mm') %></li>
				</ul>
			</li>
<%	} %>
		</ul>
	</div>
</script>
<script type="text/template" id="approval-reject-template">
<%
	var ids = data.ids;
	var msg = data.msg;
%>
	<div class="ad_layer" id="okMail_backReason_layer" style="left: 50%; top: 50%; width: 400px; margin-top: -169px; margin-left: -200px; z-index: 2016; display: block;">
		<div class="adl_header adl_hd_ico ico_top clearfix">
<% if (ids && ids > 0) { %>
    		<h4><%= msg %></h4>
<% } else { %>
    		<h4><%= i18n.rejectConfirm %></h4>
<% } %>
    		<div class="close_bt"><span class="ic_main ic_cancle rejected-reason-close"><span class="blind"><%= i18n.close %></span></span></div>
		</div>
		<div class="adl_contents">
    		<textarea class="rejected-reason-textarea" placeholder="<%= i18n.rejectedReasons %>" rows="2" cols="20"></textarea>
		</div>
		<div class="adl_footer">
    		<div class="ad_btn_area">
        		<button title="<%= i18n.confirm %>" class="b rejected-reason-save" type="button"><%= i18n.confirm %></button>
        		<button title="<%= i18n.cancel %>" class="b layer_cancle rejected-reason-cancel" type="button"><%= i18n.cancel %></button>
    		</div>
		</div>
	</div>
</script>
<script type="text/template" id="approval-advanced-search-template">
	<div class="srch_item_row1">
		<div class="srch_item">
			<label><%= i18n.applicant %></label>
			<input name="" type="text" class="ipt_text advanced-search-applicant">
		</div>
		<div class="srch_item2">
			<label><%= i18n.approver %></label>
			<select name="" class="slt_mailBox advanced-search-to-options">
				<option value="to"><%= i18n.approver %></option>
			</select>
			<input name="" type="text" class="ipt_text advanced-search-approver">
		</div>
		<div class="srch_item3">
			<label for="chk_srchOption1"><%= i18n.search.contents %></label>
			<select name="" class="slt_mailBox advanced-search-contents-options">
				<option value="subject"><%= i18n.search.subject %></option>
			</select>
			<input name="" type="text" class="ipt_text advanced-search-contents">
		</div>
	</div>
	<div class="srch_item_row2">
		<div class="srch_item">
			<label><%= i18n.search.mbox %></label>
			<select name="" class="slt_mailBox advanced-search-mbox-select">
			</select>
		</div>
		<div class="srch_item3">
			<label><%= i18n.search.period %></label>
			<select name="" class="advanced-search-period-select">
				<option value="ALL"><%= i18n.search.all %></option>
				<option value="1W"><%= i18n.search.oneWeek %></option>
				<option value="1M"><%= i18n.search.oneMonth %></option>
				<option value="3M"><%= i18n.search.threeMonths %></option>
				<option value="6M"><%= i18n.search.sixMonths %></option>
				<option value="1Y"><%= i18n.search.oneYear %></option>
				<option value="CUSTOM"><%= i18n.search.custom %></option>
			</select>
			<input name="" type="text" class="ipt_text advanced-search-start-date" style="width: 65px;" disabled>
			<span class="hyphen">-</span>
			<input name="" type="text" class="ipt_text advanced-search-end-date" style="width: 65px;" disabled>
		</div>
	</div>
	<button class="btn_srch_submit"><span><%= i18n.search.text %></span></button>
</script>
<script type="text/template" id="malicious-mail-view-template">
	<!-- 보안메일 열람정보 #secure-mail-info-template -->
	<div class="se_info"></div>
	<!-- 보안메일 열람내역 #secure-mail-readings-template -->
	<div class="ad_layer sp" style="display: none;"></div>
<% if (mail.M_FORWARDED) { %>
	<!-- 전달한 메일정보 표시 -->
	<table class="mc-relativeView">
		<tr>
			<td><a href="#" class="to"><%= i18n.forwardedMailPrefix %><%= $.format.date(mail.M_FORWARDED, 'yy-MM-dd (E) HH:mm') %><%= i18n.forwardedMailSuffix %></a></td>
		</tr>
	</table>
	<!-- //전달한 메일정보 표시 -->
<% } %>
<% if (mail.M_REPLYED) { %>
	<!-- 답장한 메일정보 표시 -->
	<table class="mc-relativeView">
		<tr>
			<td><a href="#" class="to"><%= i18n.repliedMailPrefix %><%= $.format.date(mail.M_REPLYED, 'yy-MM-dd (E) HH:mm') %><%= i18n.repliedMailSuffix %></a></td>
		</tr>
	</table>
	<!-- //답장한 메일정보 표시 -->
<% } %>
	<!-- VIEW HEAD -->
	<div class="mc-viewTit">
		<h4>
<%
	var importantClass;
	if (mail.M_PRIORITY && mail.M_PRIORITY == 1) {
		importantClass = 'icoImportantOn';
	} else {
		importantClass = 'icoImportantOff';
	}
%>
			<a href="#" class="<%= importantClass %>" id="vtCont" title="<%= mail.M_PRIORITY == 1 ? i18n.importantMail : i18n.normalMail %>"></a>
			<%- mail.M_TITLE || i18n.noSubject %>
<%
	if (!popup) {
		var mboxId = mail.MBOX_IDX;
		if (mbox && mbox.SHARED_MBOX_ID > 0) {
			mboxId = mbox.MBOX_IDX;
		}
%>
			<a href="#" title="<%= i18n.inNewWindow %>" class="newWin" onclick="window.open('popup/#mboxes/<%= mboxId %>/<%= urlRoot %>/<%= mail.M_IDX %>','','scrollbars=yes,width=900,height=680'); return false;"><%= i18n.inNewWindow %></a>
<%
	}
%>
		<span class="mail-labels">
			<!-- changeMailLabels -->
		</span>
		</h4>
<% if (mail.delayDateTime) { %>
 		<p class="reser_mark"><span class="reser_txt"><%= i18n.scheduled %></span><span class="ic_timer"><span class="blind">시계</span></span></p> 
<% } %>
		<p class="send_date">
		<%= mail.M_TIME ? $.format.date(mail.M_TIME, 'yy-MM-dd (E) HH:mm') : '' %></p>
		<dl>
			<dt class="first_child from">
				<button type="button" class="viewMoreOn" id="icoVm" onclick="$(this).parent().next().nextAll().toggle();$(this).toggleClass(function() { return $(this).is('.viewMoreOn') ? 'viewMoreOff' : 'viewMoreOn'; });"></button>
				<%= i18n.from %>
			</dt>
			<dd class="from">:
				<a href="#" class="<%= mail.importantSender ? 'icoImportantOn' : 'icoImportantOff' %> sender-important" title="<%= i18n.importantAddress %>"></a>
				<a href="#compose?to=<%= encodeURIComponent(mail.M_SENDER) %>"><%- mail.M_SENDER %></a>

				<span class="mLink">

<%
	if (popup) { 
%>
					<a href="#" class="refuse"><%= i18n.blockAddress %></a>
<%	} else { %>
					<a href="#" class="addAdrs"><%= i18n.addToContacts %></a> | <a href="#" class="refuse"><%= i18n.blockAddress %></a>
<%
	}
%>
				</span>
<%
	var ip = i18n.geoIp.noInformation;
	var countryName = '';
	var countryCode = '';
	if (mail.geoIps.length > 0) {
		for (var i = 0; i < mail.geoIps.length; i++) {
			ip = mail.geoIps[i].ip;
			countryName = mail.geoIps[i].countryName;
			countryCode = mail.geoIps[i].countryCode;
			if (countryName && countryName.trim().length > 0)
				break;
		}
		countryName = countryName && countryName.trim().length > 0 ? countryName : i18n.geoIp.noInformation;
	}
%>
				<span class="info_ip">
					<strong>IP : <%= ip %></strong><em class="naflag <%= countryCode %>" title="<%= countryName %>"></em>
<%
	if (mail.geoIps.length > 1) {
%>
					<a href="#" class="more-geo-ip"><img src="<%= popup ? '../img/b.gif' : 'img/b.gif' %>" title="추가보기" class="ic_plus"></a>
<%
	}
%>
				</span>
			</dd>
 			<dt id="viewMore" class="to"><%= i18n.to %></dt>
			<dd id="viewMore2" class="to">:
<%
	var rcptTo = [];
	try {
		var addrs = InternetAddress.parseHeader(mail.M_TO, false);
		for (var i = 0; i < addrs.length; i++) {
			if (addrs[i].getPersonal())
				rcptTo[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
			else
				rcptTo[i] = addrs[i].getAddress();
		}
	} catch (error) {
		rcptTo[0] = mail.M_TO;
	}
	for (var i = 0; i < rcptTo.length; i++) {
%>
				<a href="#compose?to=<%= encodeURIComponent(rcptTo[i]) %>" title="<%- rcptTo[i] %>"><%- rcptTo[i] %></a><%= (rcptTo.length > 1 && i < rcptTo.length - 1) ? ',' : '' %>
<%
	} // end for
%>
			</dd>
<%
	if (mail.M_CC) {
		var rcptCc = [];
		try {
			var addrs = InternetAddress.parseHeader(mail.M_CC, false);
			for (var i = 0; i < addrs.length; i++) {
				if (addrs[i].getPersonal())
					rcptCc[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
				else
					rcptCc[i] = addrs[i].getAddress();
			}
		} catch (error) {
			rcptCc[0] = mail.M_CC;
		}
%>
			<dt id="viewMore" class="cc"><%= i18n.cc %></dt>
			<dd id="viewMore2" class="cc">:
<%		for (var i = 0; i < rcptCc.length; i++) { %>
				<a href="#compose?to=<%= encodeURIComponent(rcptCc[i]) %>" title="<%- rcptCc[i] %>"><%- rcptCc[i] %></a><%= (rcptCc.length > 1 && i < rcptCc.length - 1) ? ',' : '' %>
<%		} // end for %>
			</dd>
<%
	} // end if (mail.M_CC)

	if (mail.M_BCC && mbox.MBOX_TYPE === 2) {
		var rcptBcc = [];
		try {
			var addrs = InternetAddress.parseHeader(mail.M_BCC, false);
			for (var i = 0; i < addrs.length; i++) {
				if (addrs[i].getPersonal())
					rcptBcc[i] = '"' + addrs[i].getPersonal() + '" <' + addrs[i].getAddress() + '>';
				else
					rcptBcc[i] = addrs[i].getAddress();
			}
		} catch (error) {
			rcptBcc[0] = mail.M_BCC;
		}
%>
			<dt id="viewMore"><%= i18n.bcc %></dt>
			<dd id="viewMore2">:
<%		for (var i = 0; i < rcptBcc.length; i++) { %>
				<a href="#compose?to=<%= encodeURIComponent(rcptBcc[i]) %>" title="<%- rcptBcc[i] %>"><%- rcptBcc[i] %></a><%= (rcptBcc.length > 1 && i < rcptBcc.length - 1) ? ',' : '' %>
<%		} // end for %>
			</dd>
<%
	} // end if (mail.M_BCC)
%>
		</dl>
	</div>
	<!-- //VIEW HEAD -->
	<div class="mc-readFrame">
		<div style="font-family: '돋움', dotum; font-size: 12px; color: #5f6062; height: 100%; width: 100%; overflow: hidden">
			<div style="margin: 3% 3% 0; border: 1px solid #000; padding: 25px 33px 33px; width: 500px; box-sizing: border-box;">
				<table width="100%" border="0" cellpadding="0" cellspacing="0">
					<tr>
						<td>
							<h2 style="font-size: 28px; color: #525354; line-height: 36px; letter-spacing: -3px; margin: 8px 0 20px;">
								<%= i18n.malicious.title %>
							</h2>
						</td>
						<td style="text-align: right; vertical-align: top; width: 90px">
							<img src="<%= popup ? '../img/helper_logo.png' : 'img/helper_logo.png' %>">
						</td>
					</tr>
				</table>
				<div style="line-height:22px; background-color:#f9f9f9; border:1px solid #ededed; padding:8px 8px 5px; margin:0 0 15px">
					<em style="display:inline-block; background-color:#F00;color:#fff; width:16px;height:16px;overflow:hidden; line-height:22px; font-style:normal; font-weight:bold; text-align:center; vertical-align:-3px; margin-right:2px">!</em> 
					<strong>
						<%= i18n.malicious.reason %> [<%= i18n.malicious.admin %>]
					</strong>
<%
	if (mail.maliciousDetails.keyword) {
%>
					<p style="margin:3px 0 0;padding:0 0 0 22px; line-height:14px">
						<span style="color:#F36"><%= i18n.malicious.keyword %> :</span> <%- mail.maliciousDetails.keyword %>
					</p>
<%
	}
%>
				</div>
				<div style="line-height: 22px;">
					<%= i18n.malicious.inquiry %>
				</div>
			</div>
		</div>
	</div>
</script>
<script type="text/template" id="mail-droppable-template">
	<div class="drag_cont">
		<div class="drag_img">
			<img class="left-doodle" src="<%= popup ? '../' : '' %>img/attach_upload_img1.png">
			<img class="right-doodle" src="<%= popup ? '../' : '' %>img/attach_upload_img2.png">
		</div>
		<p class="drag_txt">
			<span><%= i18n.dropFilesToUpload %></span>
			<br>
			<%= i18n.descriptionDropFilesToUpload %>
		</p>
	</div>
</script>
<script type="text/template" id="popup-notice-template">
	<div class="popup-title">
		<em class="mar_noti"><%= i18n.popup.notice %></em> <%- popup.POPUP_TITLE %>
	</div>
	<a href="#" class="today_close"><%= i18n.popup.stopByToday %> <strong>X</strong></a>
</script>
<script type="text/template" id="malicious-forgery-help-layer-template">
	<div class="adl_header clearfix">
		<h4><%= i18n.help %></h4>
		<div class="close_bt">
			<span class="ic_main ic_cancle"><span class="blind">닫기</span></span>
		</div>
	</div>

	<div class="adl_contents">
		<p class="sTipTxt">
		<%= i18n.maliciousEmailHelpTxt1 %><br>
		<%= i18n.maliciousEmailHelpTxt2 %><br><br>
		<%= i18n.maliciousEmailHelpTxt3 %>
		</p>
		<ul class="sTipTxt2">
			<li><%= i18n.maliciousEmailCase1 %></li>
			<li><%= i18n.maliciousEmailCase2 %></li>
			<li><%= i18n.maliciousEmailCase3 %></li>
			<li><%= i18n.maliciousEmailCase4 %></li>
			<li><%= i18n.maliciousEmailCase5 %></li>
		</ul>
		<p class="sTipTxt">
			<%= i18n.maliciousEmailHelpTxt4 %><br>
			&nbsp;&nbsp;&nbsp;&nbsp;<%= i18n.maliciousEmailHelpTxt5 %>
		</p>
	</div>
</script>^      c[c[E6MccU   x    O^partitionKey=%28http%2Cseoultech.ac.kr%29,:http://mail.seoultech.ac.kr/mail/app/mail/mail-template.html?v=202301181454 necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 
Accept-Ranges: bytes
ETag: W/"245277-1664418088000"
Last-Modified: Thu, 29 Sep 2022 02:21:28 GMT
Content-Type: text/html;charset=UTF-8
Content-Length: 245277
Date: Wed, 01 Feb 2023 07:57:14 GMT
 original-response-headers Accept-Ranges: bytes
ETag: W/"245277-1664418088000"
Last-Modified: Thu, 29 Sep 2022 02:21:28 GMT
Content-Type: text/html;charset=UTF-8
Content-Length: 245277
Date: Wed, 01 Feb 2023 07:57:14 GMT
 ctid 1 uncompressed-len 0 net-response-time-onstart 12 net-response-time-onstop 17  